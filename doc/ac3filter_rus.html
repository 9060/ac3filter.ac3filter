<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>AC3Filter</title>
  

  
  
  <meta http-equiv="content-type" content="text/html; charset=windows-1251"></head>
<body>

<!-- --------------------------------------------------------------------------
                                    Header
--------------------------------------------------------------------------- -->

<!-- AC3Filter title & Source forge logo -->

<table width="100%">

<tbody><tr>

  <td>
    <h1><b>AC3Filter</b><small><i> ver $ver</i></small></h1>
  </td>

  <td style="text-align: right;">
    <a href="http://sourceforge.net"><img src="http://sourceforge.net/sflogo.php?group_id=66022&amp;type=5" alt="SourceForge Logo" border="0" height="62" width="210"></a> 
  </td>

</tr></tbody>
</table>




<!-- Language selection -->

<table>

<tbody><tr>
  <td><a href="ac3filter_eng.html"><img src="pic/flag_eng.gif" border="0">English</a>&nbsp;&nbsp;</td>
  <td>                             <img src="pic/flag_rus.gif" border="0"><b>Russian</b>&nbsp;&nbsp;</td>
  <td><a href="ac3filter_ita.html"><img src="pic/flag_ita.gif" border="0">Italian</a>&nbsp;&nbsp;</td>
</tr></tbody>
</table>




<!-- Top-level links -->

<table width="100%">

<tbody><tr>
  <td><a href="$download_bin">Download</a></td>
  <td><a href="http://sourceforge.net/projects/ac3filter">Source forge project</a></td>
  <td><a href="http://sourceforge.net/forum/?group_id=66022">Project forum</a></td>
</tr></tbody>
</table>




<!-- --------------------------------------------------------------------------
                                  Description
--------------------------------------------------------------------------- -->

<hr size="2" width="100%"><br>


AC3Filter - это DirectShow фильтр предназначенный для декодирования и
обработки звука в реальном времени при просмотре фильма. Приоритет на широкую 
функциональность и удобство настройки. Декодирование форматов 
AC3/DTS/MPEG Audio. Поддержка многоканального и цифрового (SPDIF) выхода.

<br>


<h2>Основные особенности:</h2>


<ul>

  
  <li>Декодирование форматов AC3/DTS/MPEG1/2 Audio Layer I/II<br>
</li><li>Поддержка AVI/AC3, AVI/DTS, WAV/AC3 и WAV/DTS<br>
  </li>
<li>Поддержка DVD</li><li>Информация о входном потоке</li>
  <li>Поддержка режима SPDIF passthrough для форматов AC3, DTS и MPEG Audio</li>
  <li>Вывод многоканального звука на SPDIF из любого источника (кодирование в AC3 на лету)</li>
  <li>Поканальное усиление для всех входных/выходных каналов</li>
  <li>Поканальные задержки (для компенсации разного расстояния до колонок)</li>
  <li>Автоматическая регулировка усиления</li>
  <li>Клиппинг</li>
  <li>Сжатие динамического диапазона (Dynamic Range Compression, DRC)</li>
  <li>Разложение любого стереоисточника на 3-5 каналов</li>
  <li>Индикация уровней входных и выходных каналов</li>
  <li>Матричный микшер и возможность напрямую изменять матрицу микширования.</li>
  <li>Микширование в Dolby Surround / Pro Logic / Pro Logic II</li>
</ul>


<br>


<!-- --------------------------------------------------------------------------
                                  Contents
--------------------------------------------------------------------------- -->

<hr size="2" width="100%">

<h2>Содержание</h2>


<ol>

  <li>  <a href="#download">         Скачать                  </a></li>
  <li>  <a href="#install">          Установка                </a></li>
  <li>  <a href="#uninstall">        Удаление                 </a></li>
  <li>  <a href="#system_setup">     Настройка системы        </a></li>
  <ol>
    <li><a href="#system_setup_windows">                             Windows</a>                   </li>
    <li><a href="#system_setup_multichannel">                             Настройки для многоканального режима</a> </li>
    <li><a href="#system_setup_spdif">                             Настройки для режима SPDIF (цифровой выход)</a> </li>
    <li><a href="#system_setup_subwoofer">                             Низкочастотный канал (сабвуфер)</a> </li>
    <li><a href="#system_setup_filter">                             Настройки фильтра</a>         </li>
  </ol>
  <li>  <a href="#player_setup">  Настройка плеера</a></li>
  <ol>
    <li><a href="#player_setup_table">Таблица совместимости</a></li>
    <li><a href="#player_setup_mpc">Media Player Classics</a></li>
    <li><a href="#player_setup_wmp64">Windows Media Player 6.4</a></li>
    <li><a href="#player_setup_wmp7">Windows Media Player 7+</a></li>
    <li><a href="#player_setup_bsp">BSPlayer</a></li>
    <li><a href="#player_setup_zp">ZoomPlayer</a></li><li><a href="#player_setup_la">LightAlloy</a><br>
    </li>
  </ol>
  <li>  <a href="#filter_setup">            Настройка фильтра         </a></li>

  <ol>
    <li>Вызов окна настройки<br>
  </li><li><a href="#filter_setup_main">  Основные настройки (страница Main) </a></li>

    <li>  <a href="#filter_setup_mixer">          Настройки микшера (страница Mixer)</a></li><li><a href="#filter_setup_gains">Уровни (страница Gains)</a></li>
    <li><a href="#filter_setup_system">Системные настройки (страница System)</a><br>
    </li>
  </ol>
  <li><a href="#theory">Теоретические сведения</a><br>
  </li>
  <ol><li><a href="#theory_loudness">Громкость и динамический диапазон</a></li>
    <ol>
      <li>Что такое громкость</li>
      <li>Переполнение и клиппинг</li>
      <li>Гистограмма громкостей</li>
      <li>Шумы и динамический диапазон</li>
      <li>Микширование и громкость</li>
      <li>Сравнительный анализ гистограмм</li>
      <li>Сжатие динамического диапазона</li>
    </ol>
    <li><a href="ac3filter_rus.html#theory_lfe">              Что такое LFE?</a></li>
    <li>Dolby или не Dolby?</li>
    <li>SPDIF<br>
    </li>

  </ol>
  <li><a href="#troubleshooting">Решение проблем</a></li>
  
  <li>FAQ<br>
</li><li>Технические подробнотси</li>

  <ol></ol>
</ol>


<br>




<!-- --------------------------------------------------------------------------
                                  Projects
--------------------------------------------------------------------------- -->

<hr size="2" width="100%">

<h2>Близкие проекты:</h2>


<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">

<tbody>

  <tr><td style="background-color: rgb(255, 204, 51);">
    Базовые проекты (код которых был использован в AC3Filter)
  </td></tr>

  <tr><td>

    <table style="text-align: left;" border="0" cellpadding="0" cellspacing="0"><tbody>

      <tr>
        <td><a href="http://liba52.sourceforge.net/">LibA52</a><br></td>
        <td>&nbsp;Библиотека декодирования AC3 (c) Michel Lespinasse &amp; Aaron Holtzman</td>
      </tr>

      <tr>
        <td>LibDTS</td>
        <td>&nbsp;Библиотека декодирования DTS (c) Gildas Bazin</td>
      </tr>

      <tr>
        <td>FFMPEG</td>
        <td>&nbsp;AC3 кодер</td>
      </tr>

    </tbody></table>

  </td></tr>

  <tr><td style="background-color: rgb(255, 204, 0);">
    Проекты, основанные на коде AC3Filter, а также являющиеся частью самого проекта:
  </td></tr>

  <tr><td>

    <table style="text-align: left;" border="0" cellpadding="0" cellspacing="0"><tbody>

      <tr>
        <td><a href="http://matrix-mixer.sourceforge.net/">MatrixMixer</a></td>
        <td>&nbsp;Упрощенный вариант AC3Filter без декодеров - только микширование и обработка звука</td>
      </tr>

      <tr>
        <td><a href="http://winampac3.sourceforge.net/">WinampAC3</a></td>
        <td>&nbsp;AC3 декодер для Winamp 2.x и 5.x</td>
      </tr>

      

      <tr>
        <td>vac3acm<br>
</td>
        <td>&nbsp;ACM AC3 декодер. Необходим для работы VFW-программ (например VirtualDub, TMPGEnc и другие) с AC3 аудио треками.</td>
      </tr>

      <tr>
        <td>valdec<br>
</td>
        <td>&nbsp;Утилита командной строки для проигрывания и декодирования AC3/DTS/MPA с поддержкой всех возможностей фильтра.</td>
      </tr>

      

      <tr>
        <td>VALIB</td>
        <td>&nbsp;Библиотека работы со звуком. Декодирование / обработка / кодирование / вывод звука.</td>
      </tr>

    </tbody></table>
  </td></tr>
</tbody>
</table>


<br>




<!-- --------------------------------------------------------------------------
                                  Download
--------------------------------------------------------------------------- -->

<hr size="2" width="100%">

<h2><a name="download"></a>1. Скачать.</h2>


Новые версии программы всегда можно найти на сайте:

<br>


<a href="http://ac3filter.sourceforge.net">http://ac3filter.sourceforge.net</a> - официальный сайт проекта.<br>

<a href="http://sourceforge.net/forum/?group_id=66022">http://sourceforge.net/forum/?group_id=66022</a> - форум AC3Filter<br>

<a href="http://sourceforge.net/projects/ac3filter">http://sourceforge.net/projects/ac3filter</a> - страница проекта на Source forge - ошибки, пожелания...

<br>

<br>


<b>Все версии:</b>

<br>


<a href="http://sourceforge.net/projects/ac3filter/">http://sourceforge.net/projects/ac3filter</a>

<br>

<br>


<b>ac3filter ver $ver</b>

<br>


<table style="text-align: left;" border="0" cellpadding="0" cellspacing="0">

<tbody>
  <tr>
    <td><a href="$download_bin">$download_bin</a></td>
    <td>&nbsp;Инсталлятор</td>
  </tr>

  <tr>
    <td><a href="$download_dbg">$download_dbg</a></td>
    <td>&nbsp;Инсталлятор отладочной версии</td>
  </tr>

  <tr>
    <td><a href="$download_src">$download_src</a></td>
    <td>&nbsp;Исходники</td>
  </tr>

</tbody>
</table>


<br>




<!-- --------------------------------------------------------------------------
                                  Install
--------------------------------------------------------------------------- -->

<hr size="2" width="100%">

<h2><b><a name="install"></a>2. Установка.</b></h2>


&nbsp;&nbsp;&nbsp; Запустить программу установки и следовать инструкциям. 

<br>

<br>




<!-- --------------------------------------------------------------------------
                                  Uninstall
--------------------------------------------------------------------------- -->

<hr size="2" width="100%">

<h2><b><a name="uninstall"></a>3. Удаление.</b></h2>


&nbsp;&nbsp;&nbsp; Запустить программу удаления из меню Пуск или из Панели 
Управления.

<br>

<br>


<font color="#ff0000">
  &nbsp;&nbsp;&nbsp; ! Все записанные настройки матриц, эквалайзеров и т.д. 
  будут удалены !
</font>

<br>

<br>


&nbsp;&nbsp;&nbsp; Фильтр может быть установлен вместе с другими 
программами (кодек-паки, плееры...). В таком случае фильтр может быть
удален только вместе с этой программой. Если Вы не знаете, с какой
программой был установлен фильтр, или хотите удалить фильтр без
деинсталляции программы то удалить фильтр вручную можно следующим
способом:

<br>


<ul>

  <li>Найти файл ac3filter.ax.</li>
  <li>Дерегистрировать модуль из командной строки: &gt;regsvr32 /u x:\some_dir\ac3filter.ax</li>
  <li>Найти и удалить файлы ac3filter.ax и ac3filter.cpl (последний файл может отсутствовать)</li>
  <li>Удалить ключ реестра HKCU\Software\AC3Filter</li>
</ul>


<br>

<br>




<!-- --------------------------------------------------------------------------
                                  System setup
--------------------------------------------------------------------------- -->

<hr size="2" width="100%">

<h2><a name="system_setup"></a>4. Настройка системы</h2>


&nbsp;&nbsp;&nbsp; Если установка прошла успешно то в большинстве случаев 
фильтр немедленно готов к работе и в общем случае не требует настроек.

<br>

<br>


&nbsp;&nbsp;&nbsp; Наиболее совместимым является режим стерео 16 бит. Он
должен работать на любой версии Windows и с любой звуковой картой. Для
стабильной работы многоканальных режимов и цифрового выхода необходимо
проверить следующие требования:

<br>

<br>


<!-- ------------------------------ Windows ------------------------------- -->

<b><a name="system_setup_windows"></a>4.1. Windows</b>

<br>

<br>


Таблица совместимости:

<br>


<table style="text-align: center;" border="1" cellpadding="2" cellspacing="2">

<tbody>
  <tr>
    <td style="text-align: left;">&nbsp;</td>
    <td>Win95, Win98</td>
    <td>Win98SE</td>
    <td>WinNT <a href="#system_setup_note3">(3)</a></td>
    <td>Win2000</td>
    <td>WinXP</td>
  </tr>
  <tr>
    <td style="text-align: left;">моно/стерео 16 бит</td>
    <td>+</td>
    <td>+</td>
    <td>+</td>
    <td>+</td>
    <td>+</td>
  </tr>
  <tr>
    <td style="text-align: left;">многоканальный режим</td>
    <td>- (?)</td>
    <td>WaveOut <a href="#system_setup_note1">(1)</a></td>
    <td>SP6</td>
    <td>+</td>
    <td>+</td>
  </tr>
  <tr>
    <td style="text-align: left;">SPDIF</td>
    <td>- (?)</td>
    <td>WaveOut <a href="#system_setup_note1">(1)</a> + патч <a href="#system_setup_note2">(2)</a></td>
    <td>- (?)</td>
    <td>SP2</td>
    <td>+</td>
  </tr>
</tbody>
</table>



<small>
  <a name="system_setup_note1"></a>1) см.&nbsp; <a href="#filter_setup_system">6.5. Системные настройки</a><br>
  <a name="system_setup_note2"></a>2) cкачать патч можно здесь:<br>

  <div style="margin-left: 40px;">
    <b>server1:</b><a href="http://ac3filter.sourceforge.net/download/269601USA8.EXE">http://ac3filter.sourceforge.net/download/269601USA8.EXE</a><br>
    <b>server2:</b><a href="ftp://download.intel.com/design/motherbd/bt2/269601USA8.EXE">ftp://download.intel.com/design/motherbd/bt2/269601USA8.EXE</a><br>
    <b>server3:</b><a href="ftp://ftp.asus.com.tw/pub/ASUS/beta/mb/driver/269601USA8.EXE">ftp://ftp.asus.com.tw/pub/ASUS/beta/mb/driver/269601USA8.EXE</a><br>
    Действие этого патча описано в <a href="http://www.microsoft.com/hwdev/tech/audio/Non-PCM.asp">http://www.microsoft.com/hwdev/tech/audio/Non-PCM.asp</a>.<br>
  </div>

  <a name="system_setup_note3"></a>3) звуковая карта должна поддерживать режим 48кГц <br>
</small>

<br>


<!-- ------------------------------ Multichannel -------------------------- -->

<b><a name="system_setup_multichannel"></a>4.2. Настройки для многоканального режима</b>

<br>

<br>


&nbsp;&nbsp;&nbsp; Большинство звуковых карт имеют собственные утилиты
для переключения режима колонок. Рекомендуется пользоваться именно
утилитой, поставляемой в комплекте с драйвером звуковой карты. При
помощи этой утилиты установите режим колонок соответствующий количеству
реально присутствующих колонок.

<br>

<br>
&nbsp;&nbsp;&nbsp; Установить режим колонок в <b>Control Panel-&gt;Sounds and 
Multimedia-&gt;Audio-&gt;Sound Playback-&gt;Advanced</b>. <small>(Некоторые драйвера при переключении режима колонок 
не изменяют настроек системы - это распространенная ошибка в дарйверах.)</small><br>

<br>


&nbsp;&nbsp;&nbsp; Некоторые звуковые карты работают некорректно с 
<i>нечетным</i> количеством колонок (например, 2/2+SW или 3/0). Поэтому 
таких режимов следует по возможности избегать.

<br>

<br>


&nbsp;&nbsp;&nbsp; Для звуковых карт Creative необходимо отключить все
звуковые эффекты и эквалайзеры - в противном случае возможно пропадание
центрального/тыловых каналов.

<br>
<br>
&nbsp;&nbsp;&nbsp; Режимы <b>Dolby Surround/ProLogic</b> и <b>Doby ProLogic2</b> это <i>не являются</i> многоканальными режимами (см. рездел <u>7.4 Dolby или не Dolby</u>). Не следует также использовать режимы с сабвуфером (2/0+SW, 4/0+SW) если аукстика не имеет <i>отдельного</i> входа для сабвуфера (см. раздел <a href="theory_lfe">7.2. Что такое LFE?</a>).<br>

<br>


<!-- ------------------------------ SPDIF --------------------------------- -->

<b><a name="system_setup_spdif"></a>4.3. Настройки для режима SPDIF (цифровой выход)</b>

<br>

<br>&nbsp;&nbsp;&nbsp; Режим SPDIF необходим только при цифровом
подключении и наличии внешнего декодера/ресивера. В документации на
ресивер необходимо выяснить, какие форматы им поддерживаются, и затем
указать их в настройках фильтра (см. рзадел <a href="ac3filter_rus.html#filter_setup_system">6.5. Системные настройки</a>).
В большинстве случаев поддерживается формат AC3, а поддержка прочих
форматов опциональна. Поэтому включать другие форматы следует <i>только</i> если есть уверенность, что этот формат поддерживается ресивером.<br>
<br>
&nbsp;&nbsp;&nbsp; Некоторые драйверы обладают возможностью
декодирования AC3. Если такая опция присутствует, ее необходимо
отключить (см. руководство по звуковой карте).

<br>

<br>


<!-- ------------------------------ Subwoofer ----------------------------- -->

<b><a name="system_setup_subwoofer"></a>4.4. Низкочастотный канал (сабвуфер)</b> 
(рекомендуется предварительно ознакомиться с разделом <a href="theory_lfe">7.2. Что такое LFE?</a>)

<br>

<br>


&nbsp;&nbsp;&nbsp; Не следует использовать режимы с сабвуфером (2/0+SW, 4/0+SW) если аукстика не имеет <i>отдельного</i> входа для сабвуфера (см. раздел <a href="theory_lfe">7.2. Что такое LFE?</a>).<br>
<br>
&nbsp;&nbsp;&nbsp; Для режимов с сабвуфером рекомендуется включить
перенаправление басов. В документации на акустику должна содержаться
информация о частоте пропускания колонок и сабвуфера; частоту среза
рекомендуется установить равной нижнему пределу для колонок и верхнему
для сабвуфера. Например, если частотный диапазон колонок равен
100Гц-20кГц, а сабвуфера - 30Гц-100Гц, то частоту среза необходимо
установить равной 100Гц. В большинстве случаев подходит настройка
установленная по умолчанию, поэтому ничего изменять не требуется.<br>
<br>
&nbsp;&nbsp;&nbsp; Некоторые звуковые карты имеют собственные настройки
по управлению перенаправлением басов. <i>Не рекомендуется</i>
включать обе опции одновременно! Это может привести к значительным
искажениям. Перенаправление басов необходимо отключить либо в фильтре
либо в настройках звуковой карты.<br>

<br>
&nbsp;&nbsp;&nbsp; Перенаправление басов не нужно включать для
высококачественных систем домашнего кинотеатра, где колонки имеют
достаточно широкую подосу пропускания, а саб выполняет только
вспомогательную роль.<br>
<br>


<!-- ------------------------------ Filter -------------------------------- -->

<b><a name="system_setup_filter"></a>4.5. Настройки фильтра</b>

<br>

<br>


&nbsp;&nbsp;&nbsp; Некоторые из системных настроек могут настраиваться
из свойств фильтра (см. <a href="#filter_setup_system">6.5. Системные настройки</a>)

<br>

<br>


<!-- --------------------------------------------------------------------------

                                  Player setup
--------------------------------------------------------------------------- -->

<hr size="2" width="100%">

<h2><a name="player_setup"></a>5. Настройка плеера.</h2>


<h3><a name="player_setup_table"></a>5.1 Таблица совместимости</h3>



<table style="background-color: rgb(204, 255, 204);" border="1" cellpadding="2" cellspacing="2">

<tbody>
  <tr>
    <td style="background-color: rgb(102, 255, 153);">Плеер</td>
    <td style="background-color: rgb(102, 255, 153);">Сокр</td>
    <td style="background-color: rgb(102, 255, 153);">Сайт</td>
    <td style="background-color: rgb(102, 255, 153);">Лицензия</td>
    <td style="background-color: rgb(102, 255, 153);">AVI</td>
    <td style="background-color: rgb(102, 255, 153);">DVD</td>
    <td style="background-color: rgb(102, 255, 153);">Filters</td>
    <td style="background-color: rgb(102, 255, 153);">Renderer</td>
    <td style="background-color: rgb(102, 255, 153);">Decoder</td>
    <td style="background-color: rgb(102, 255, 153);">Supported</td>
    <td style="background-color: rgb(102, 255, 153);">Подробности</td>
  </tr>
  <tr>
    <td style="background-color: rgb(204, 255, 204);">Media Player Classics</td>
    <td style="background-color: rgb(204, 255, 204);">MPC</td>
    <td style="background-color: rgb(204, 255, 204);"><a href="http://sourceforge.net/projects/guliverkli">(site)</a></td>
    <td style="background-color: rgb(102, 255, 255);">OpenSource</td>
    <td style="text-align: center; background-color: rgb(51, 255, 51);">+</td>
    <td style="text-align: center; background-color: rgb(51, 255, 51);">+</td>
    <td style="text-align: center; background-color: rgb(51, 255, 51);">+</td>
    <td style="text-align: center; background-color: rgb(51, 255, 51);">+</td>
    <td style="text-align: center; background-color: rgb(51, 255, 51);">+</td>
    <td style="text-align: center; background-color: rgb(51, 255, 51);">+</td>
    <td style="text-align: center; background-color: rgb(204, 255, 204);"><a href="#player_setup_mpc"> (details)</a></td>
  </tr>
  <tr>
    <td style="background-color: rgb(204, 255, 204);">Windows Media Player v6.4</td>
    <td style="background-color: rgb(204, 255, 204);">WMP64</td>
    <td style="background-color: rgb(204, 255, 204);"><a href="http://download.microsoft.com">(site)</a></td>
    <td style="background-color: rgb(51, 204, 0);">Freeware</td>
    <td style="text-align: center; background-color: rgb(51, 255, 51);">+</td>
    <td style="text-align: center; background-color: rgb(153, 0, 0);">-</td>
    <td style="text-align: center; background-color: rgb(51, 255, 51);">+</td>
    <td style="text-align: center; background-color: rgb(153, 0, 0);">-</td>
    <td style="text-align: center; background-color: rgb(153, 0, 0);">-</td>
    <td style="text-align: center; background-color: rgb(51, 255, 51);">+</td>
    <td style="text-align: center;"><a href="#player_setup_wmp64"> (details)</a></td>
  </tr>
  <tr>
    <td style="background-color: rgb(204, 255, 204);">Windows Media Player 7+</td>
    <td style="background-color: rgb(204, 255, 204);">WMP7+</td>
    <td style="background-color: rgb(204, 255, 204);"><a href="http://download.microsoft.com">(site)</a></td>
    <td style="background-color: rgb(51, 204, 0);">Freeware</td>
    <td style="text-align: center; background-color: rgb(51, 255, 51);">+</td>
    <td style="text-align: center; background-color: rgb(51, 255, 51);">+</td>
    <td style="text-align: center; background-color: rgb(153, 0, 0);">-</td>
    <td style="text-align: center; background-color: rgb(153, 0, 0);">-</td>
    <td style="text-align: center; background-color: rgb(153, 0, 0);">-</td>
    <td style="text-align: center; background-color: rgb(51, 255, 51);">+</td>
    <td style="text-align: center;"><a href="#player_setup_wmp7"> (details)</a></td>
  </tr>
  <tr>
    <td style="background-color: rgb(204, 255, 204);">BSPlayer</td>
    <td style="background-color: rgb(204, 255, 204);">BSP</td>
    <td style="background-color: rgb(204, 255, 204);"><a href="http://www.bsplayer.org/">(site)</a></td>
    <td style="background-color: rgb(51, 204, 0);">Freeware</td>
    <td style="text-align: center; background-color: rgb(51, 255, 51);">+</td>
    <td style="text-align: center; background-color: rgb(153, 0, 0);">-</td>
    <td style="text-align: center; background-color: rgb(51, 255, 51);">+</td>
    <td style="text-align: center; background-color: rgb(51, 255, 51);">+</td>
    <td style="text-align: center; background-color: rgb(51, 255, 51);">+</td>
    <td style="text-align: center; background-color: rgb(51, 255, 51);">+</td>
    <td style="text-align: center;"><a href="#player_setup_bsp"> (details)</a></td>
  </tr>
  <tr>
    <td style="vertical-align: top;">ZoomPlayer<br>ZoomPlayerPro<br></td>
    <td style="vertical-align: top;">ZP<br>ZPP<br></td>
    <td style="vertical-align: top;"><a href="http://www.inmatrix.com/">(site)</a></td><td style="vertical-align: top; background-color: rgb(255, 204, 0);">Freeware<br>Shareware<br></td>
    <td style="vertical-align: top; text-align: center; background-color: rgb(51, 255, 51);">+<br>+<br></td>
    <td style="vertical-align: top; text-align: center; background-color: rgb(51, 255, 51);">-<br>+<br></td>
    <td style="vertical-align: top; text-align: center; background-color: rgb(51, 255, 51);">+<br>+<br></td>
    <td style="vertical-align: top; text-align: center; background-color: rgb(51, 255, 51);">+<br>+<br></td>
    <td style="vertical-align: top; text-align: center; background-color: rgb(51, 255, 51);">+<br>+<br></td>
    <td style="vertical-align: top; text-align: center; background-color: rgb(51, 255, 51);">+<br>+<br></td>
    <td style="vertical-align: top; text-align: center;"><a href="#player_setup_zp"> (details)</a></td>
  </tr>
  <tr>
    <td style="vertical-align: top;">LightAlloy<br></td>
    <td style="vertical-align: top;">LA<br></td>
    <td style="vertical-align: top;"><a href="http://www.softella.com/index.en.htm">(site)</a></td><td style="vertical-align: top; background-color: rgb(51, 204, 0);">Freeware</td>
    <td style="vertical-align: top; text-align: center; background-color: rgb(51, 255, 51);">+<br></td>
    <td style="vertical-align: top; text-align: center; background-color: rgb(51, 255, 51);">+<br></td>
    <td style="vertical-align: top; text-align: center; background-color: rgb(51, 255, 51);">+<br></td>
    <td style="vertical-align: top; text-align: center; background-color: rgb(51, 255, 51);">+<br></td>
    <td style="vertical-align: top; text-align: center; background-color: rgb(153, 0, 0);">-<br></td>
    <td style="vertical-align: top; text-align: center; background-color: rgb(51, 255, 51);">+<br></td>
    <td style="vertical-align: top; text-align: center;"><a href="#player_setup_la"> (details)</a></td>
  </tr>
  
  <tr>
    <td style="vertical-align: top;">PowerDVD<br>WinDVD<br></td>
    <td style="vertical-align: top;">PDVD<br>WDVD<br></td>
    <td style="vertical-align: top;"><a href="http://www.gocyberlink.com">(site)</a><br><a href="http://www.intervideo.com">(site)</a><br></td>
    <td style="vertical-align: top; background-color: rgb(255, 204, 51);">Shareware<br>Shareware<br></td>
    <td style="vertical-align: top; text-align: center; background-color: rgb(51, 255, 51);">+<br>+<br></td>
    <td style="vertical-align: top; text-align: center; background-color: rgb(51, 255, 51);">+<br>+<br></td>
    <td style="vertical-align: top; text-align: center; background-color: rgb(153, 0, 0);">-<br>-<br></td>
    <td style="vertical-align: top; text-align: center; background-color: rgb(153, 0, 0);">-<br>-<br></td>
    <td style="vertical-align: top; text-align: center; background-color: rgb(153, 0, 0);">-<br>-<br></td>
    <td style="vertical-align: top; text-align: center; background-color: rgb(204, 0, 0);">AVI only<br>AVI only<br></td>
    <td style="vertical-align: top; text-align: center;"><a href="#player_setup_pdvd">(details)</a></td>
  </tr>
</tbody>
</table>



<small>
Сокр - сокращенное название плеера<br>
AVI - возможность проигрывания AVI файлов<br>
DVD - возможность проигрывания DVD<br>
Filters - плеер поддерживает возможность конфигурирования фильтров<br>
Renderer - плеер поддерживает возможность смены устройства вывода<br>
Decoder - плеер поддерживает возможность смены декодера<br>
Supported - плеер имеет возможность использовать AC3Filter<br>
</small>

<br>


&nbsp;&nbsp;&nbsp; Разумеется, таблица далеко неполна, поэтому любые поправки и дополнения всячески приветствуются.<br>


<br>



<span style="font-weight: bold;"><a name="player_setup_mpc"></a>5.2. Media Player Classics</span><br>


<br>


&nbsp;&nbsp;&nbsp; Один из самых многофункциональных плееров. Несмотря
на непритязательный внешний вид и скромный размер (~1Mb) плеер по
функциональности уступает лишь ZoomPlayer'у, а кроме того имеет
огромное количество встроенных декодеров (отпадает необходимость в
установке кодек-паков и других внешних декодеров). Поддерживает
проигрывание DVD, Flash-анимации (причем с возможностью перемотки!),
RealVideo/RealAudio, QuickTime, и многого другого. Надежный, стабильный
и непритязательный к ресурсам. <small>(мой любимый плеер :-).<span style="font-weight: bold;"></span><br>
</small>
<br>










&nbsp;&nbsp;&nbsp; Настройки фильтра вызываются щелчком правой кнопкой
мыши на кадре и далее в выпадающем меню выбрать Filters-&gt;AC3Filter<br>










<br>










<div style="text-align: center;"><img alt="" src="pic/players/mpc_filters.png" height="401" width="500"><br>
</div>










<br>










&nbsp;&nbsp;&nbsp; Настройки плеера вызываются в меню <b>View-&gt;Options</b>.
Для того, чтобы плеер использовал AC3Filter необходимо изменить
настройки плеера как показано на рисунке:<br>










<br>










<div style="text-align: center;"><img alt="" src="pic/players/mpc_options1.png" height="424" width="620"><br>
</div>










<br>










&nbsp;&nbsp;&nbsp; Если в системе было установлено несколько декодеров,
то будет использоваться декодер, имеющий наивысший приоритет. Для
изменения приоритета фильтра см. <a href="#filter_setup_system">6.5. Системные настройки</a>. Плеер можно
настроить так, чтобы AC3Filter использовался всегда, независимо от
текущих настроек системы. Для этого в настройках плеера в разделе
Overrides нажать кнопку <span style="font-weight: bold;">AddFilter</span>
и в открывшемся списке выбрать <b>AC3Filter</b>. Должно получиться следующее:<br>










<br>










<div style="text-align: center;"><img alt="" src="pic/players/mpc_options2.png" height="424" width="620"><br>
</div>










<br>










<span style="font-weight: bold;"><a name="player_setup_wmp64"></a>5.3. Windows
Media Player 6.4</span><br>










<br>










&nbsp;&nbsp;&nbsp; Простенький плеер, поставляемый со <i>всеми</i> версиями Windows начиная в
Win98. Плеер находится в каталоге <span style="font-weight: bold;">Program
files\Windows Media Player\mplayer2.exe</span>. Плеер крайне надежен,
нетребователен к ресурсам и использует только стандартные методы
проигрывания, поэтому незаменим для выявления разнообразных проблем.
Отсутствуют многие функции, однако с главной задачей - проигрывание
фалов справляется отлично.<br>










<br>










&nbsp;&nbsp;&nbsp; Настройки фильтра вызываются в меню
<b>File-&gt;Properties-&gt;Advanced</b>:<br>










<br>










<div style="text-align: center;"><img alt="" src="pic/players/wmp64_filters.png" height="482" width="457"><br>
</div>










<br>










&nbsp;&nbsp;&nbsp; Плеер не имеет настроек для того, чтобы
использовался именно AC3Filter, поэтому если в системе было установлено
несколько декодеров, то будет использоваться декодер, имеющий наивысший
приоритет. Для
изменения приоритета фильтра см. <a href="ac3filter_rus.html#filter_setup_system">6.5. Системные настройки</a>.<br>










<br>










<span style="font-weight: bold;"><a name="player_setup_wmp7"></a>5.4. Windows
Media Player 7+</span><br>










<br>










&nbsp;&nbsp;&nbsp; У всего семейства плееров нет возможности вызвать
настройки фильтров. Т.о. невозможно увидеть используется ли для
декодирования AC3Filter или какой-либо другой декодер, невозможно
изменять настройки во время проигрывания и наблюдать текущую активность
(свойства текущего аудио-потока, входные/выходные уровни, активность
DRC и т.д.). Единственное исключение составляет Windows Media Player 9
и только в режиме просмотра DVD. В этом случае настройки фильтра
вызываются из меню <b>Tools-&gt;Options</b> (при просмотре .avi и других
форматов данная опция работать не будет):<br>










<br>










<div style="text-align: center;"><img alt="" src="pic/players/wmp9_dvd.png" height="473" width="403"><br>
</div>










<br>










&nbsp;&nbsp;&nbsp; Плеер не имеет настроек для того, чтобы
использовался именно AC3Filter, поэтому если в системе было установлено
несколько декодеров, то будет использоваться декодер, имеющий наивысший
приоритет. Для
изменения приоритета фильтра см. <a href="ac3filter_rus.html#filter_setup_system">6.5. Системные настройки</a>.<br>










<br>










<span style="font-weight: bold;"><a name="player_setup_bsp"></a>5.5. BSPlayer</span><br>










<br>










&nbsp;&nbsp;&nbsp; Многофункциональный плеер с поддержкой скинов.<br>










<br>










&nbsp;&nbsp;&nbsp; Настройки фильтра вызываются щелчком правой кнопкой
мыши на кадре и далее в выпадающем мею выбрать
Options-&gt;Filters-&gt;AC3Filter<br>










<br>










<div style="text-align: center;"><img alt="" src="pic/players/bsp_filters.png" height="528" width="649"><br>
</div>










<br>










&nbsp;&nbsp;&nbsp; Настройки плеера вызываются в меню
<b>Options-&gt;Preferences</b>. Для того, чтобы плеер использовал AC3Filter
необходимо изменить настройки плеера как показано на рисунке:<br>










<br>










<div style="text-align: center;"><img alt="" src="pic/players/bsp_options.png" height="444" width="572"><br>
</div>










<br style="font-weight: bold;">










<span style="font-weight: bold;"><a name="player_setup_zp"></a>5.6. ZoomPlayer</span><br>










<br>










&nbsp;&nbsp;&nbsp; Самый многофункциональный плеер. Функций настолько
много что перечислять их нет смысла.<br>










<br>










&nbsp;&nbsp;&nbsp; Настройки фильтра вызываются щелчком правой кнопкой
мыши на кадре и далее в выпадающем мею выбрать <b>Filter
Properties-&gt;AC3Filter</b>:<br>










<br>










<div style="text-align: center;"><img alt="" src="pic/players/zoom_filters.png" height="417" width="507">&nbsp;&nbsp;
<br>
</div>










<br>










<span style="font-weight: bold;"><a name="player_setup_la"></a>5.7. LightAlloy</span><br>










<br>










&nbsp;&nbsp;&nbsp; Настройки фильтра вызываются как показано на рисунке:<br>










<br>










<div style="text-align: center;"><img alt="" src="pic/players/la_filters.png" height="354" width="376"><br>
</div>










<br>










&nbsp;&nbsp;&nbsp; Плеер не имеет настроек для того, чтобы
использовался именно AC3Filter, поэтому если в системе было установлено
несколько декодеров, то будет использоваться декодер, имеющий наивысший
приоритет. Для
изменения приоритета фильтра см. раздел <a href="ac3filter_rus.html#filter_setup_system">6.5. Системные настройки</a>.<br>










<br>










<a name="player_setup_pdvd"></a><span style="font-weight: bold;">5.8. PowerDVD/</span><span style="font-weight: bold;">WinDVD</span><br>










<br>










&nbsp;&nbsp;&nbsp; Оба плеера <i>не могут</i> использовать AC3Filter для
проигрывания DVD. <i>Это связано с особенностями самих плееров</i> поэтому нет
никакой возможности заставить их использовать AC3Filter. Поэтому для
просмотра DVD рекомендуется использовать другие плееры - Media Player
Classics, LightAlloy или ZoomPlayer.<br>










<br>










&nbsp;&nbsp;&nbsp; При проигрывании этими плеерами AVI-файлов AC3Filter
может использоваться как для пост-обработки так и для декодирования
AC3/DTS аудио-дорожки. Однако, плеер не позволяет вызвать настройки
фильтра и настраивать фильтр можно только <i>до</i> просмотра при помощи утилиты конфигурирования.<br>










<br>










<br>










<hr size="2" width="100%">
<h2><b><a name="filter_setup"></a>6. Настройки фильтра.</b><br>
</h2>










<i><big><br>
&nbsp;&nbsp;&nbsp; Два
самых главных правила настройки:<br style="font-style: italic;">

&nbsp;&nbsp;&nbsp; 1. Если вы не
понимаете, что делает какая-либо настройка не трогайте ее.<br style="font-style: italic;">

&nbsp;&nbsp;&nbsp; 2. Если что-то
сломалось - загрузите пресет 'standard'.<br>

&nbsp;&nbsp;&nbsp; :-).<br style="font-style: italic;">
<br>
&nbsp;&nbsp;&nbsp; Для более полного понимания настроек настоятельно рекомендуется ознакомиться с разделом <a href="ac3filter_rus.html#theory">7. Теоретические сведения</a>.<br>
</big></i>
<br>

<h3><a name="filter_setup_settings"></a>6.1. Вызов окна настройки</h3>

&nbsp;&nbsp;&nbsp; Для настройки фильтра необходимо открыть окно свойств фильтра. Это можно сделать двумя способами:<br>

<ul>

  <li>Непосредственно во время проигрывания. Плеер должен иметь
возможность конфигурирования фильтров. См. таблицу совместимости в
разделе <a href="#player_setup">5. Настройка плеера</a>,
чтобы узнать поддерживает ли плеер эту функцию. Там же описаны действия
для вызова окна настройки. При изменении настроек изменения вступают в
силу немедленно (точнее с небольшим запаздыванием 0.5..2c - зависит от
величины буфера проигрывателя).<br>
  </li>
  <li>Если плеер не имеет возможности конфигурирования, то настройку
можно произвести при помощи утилиты конфигурирования (в меню Старт). <font color="#ff0000">При
настройке при помощи утилиты в окне настройки не будет отображаться
текущая статистика и настройки вступают в силу только после закрытия
окна настройки и перезапуска плеера!</font></li>
</ul>
<br>





<font color="#ff0000">
</font>









<h3><a name="filter_setup_main"></a>6.2. Основные настройки (страница Main)</h3>










&nbsp;&nbsp;&nbsp; Окно настроек выглядит следующим образом (уровни и
информация о потоке показываются <i>только</i>
при вызове окна свойств из плеера):<br>










<br>










<div align="center"><img src="pic/dlg_main.png" alt="" style="width: 623px; height: 427px;" height="427" width="623">&nbsp;
<div style="text-align: left;"><br>
</div>
<div style="text-align: left;"><span style="font-weight: bold;">6.2.1. Выходной формат (Output).<br>
<br>
</span></div>
<div style="text-align: left;">&nbsp;&nbsp;&nbsp; В данном разделе
находятся настройки выходного формата фильтра. Фильтр будет
автоматически пересчитывать любой входной формат в указанную
конфигурацию. Конфигурация колонок указывается в виде фронт/тыл+сабвуфер. Для некоторых
конфигураций приведены общепринятые названия. Например, запись <span style="font-weight: bold;">2/0 - stereo</span> - означает 2
фронтальные колонки, т.е. обычное стерео. <span style="font-weight: bold;">2/2 - quadro</span> - 2 форнтальные
колонки, 2 тыловые - т.е. квадро. <span style="font-weight: bold;">3/2+SW
5.1 channels</span> - 3 фронтальных колонки, 2 тыловых и сабвуфер -
конфигурация 5.1. Желательно, чтобы указанная конфигурация колонок
совпадала с настройками системы (см. раздел <a href="#system_setup_multichannel">4.2. Настройки для многоканального режима</a>), которые, в свою очередь должны совпадать с реальным
количеством колонок. Чем отличается сабвуфер и канал LFE, а также как
производить настройку см. в разделе <a href="#theory_lfe">7.2. Что
такое LFE?</a><br>
</div>
</div>










<br>










&nbsp;&nbsp;&nbsp; Режимы <b>Dolby Surround/ProLogic</b> и <b>Dolby ProLogic II</b> необходимы
если компьютер имеет только стерео выход и полключен к Dolby
ProLogic декодеру. В этом случае тыловые каналы микшируются так, чтобы
внешний декодер мог выделить их обратно. Это не многоканальный режим! Это
особая разновидность стерео-режима необходимая <span style="font-style: italic;">только</span> при наличии внешнего Dolby ProLogic декодера. (см. раздел <u>7.3 Dolby или не Dolby</u>)<br>










<br>
&nbsp;&nbsp;&nbsp; Второй список выбора задает выходной формат сэмпла.
Фильтр будет
автоматически пересчитывать любой входной формат в указанный. При
декодировании задает точность декодирования. На настоящее время
поддерживаются PCM 16, 24, 32 бит и формат с
плавающей точкой.<br>
<br>










&nbsp;&nbsp;&nbsp; Флаг <b>SPDIF</b> включает режим цифрового
выхода. Необходим <i>только</i> при
цифровом (SPDIF) подключении колонок и наличии внешнего аппаратного
декодера/ресивера. В этом случае кодированный поток будет
передаваться на внешний декодер без изменений (при поддержке декодером
этого формата), или перекодироваться в формат, понятный декодеру (за более подробной информацией см. раздел <u>7.4 SPDIF</u>). В
скобках указывается текущее состояние режима цифрового выхода:<br>










<ul>










  <li><span style="font-weight: bold;">disabled</span> - режим
цифрового выхода неактивен, на выход передается
обычный декодированный PCM поток. При включенной опции SPDIF фильтр
всегда пытается использовать цифровую передачу. И только если
цифровая передача невозможна (драйвер звуковой карты отказывается
принимать указанный формат) передается обычный PCM. Например, многие звуковые карты поддерживают цифровую передачу <i>только</i> при частоте дикретизации равной 48000Гц, и <i>не поддерживают</i> распространенный формат 44100Гц.<br>
</li>
  <li><span style="font-weight: bold;">passthrough</span> - режим сквозной передачи. В этом случае упакованный
цифровой поток передается без изменений и декодирование осуществляется
внешним декодером. В этом режиме фильтр не показывает текущей
активности, и никакие настройки фильтра не оказывают влияния на звук (по очевидным
причинам).</li>
  <li><span style="font-weight: bold;">AC3 encode</span>
- режим кодирования в AC3. В этом режиме фильтр
осуществляет декодирование входного потока и производит пост-обработку
(все опции фильтра действуют, включая изменение количества колонок).
Затем полученный сигнал кодируется в AC3 и передается в цифровом виде
внешнему аппаратному декодеру. Этот режим необходим для передачи
многоканального аудио в форматах, которые не поддерживаются внешним
декодером (например, AAC или OGG Vorbis) или если внешний декодер не
поддерживает разложение стерео в многоканальный формат. Необходимо
помнить, что кодирование в AC3 - это потеря качества, поэтому для
многоканальных форматов предпочтительнее использовать аналоговое
подключение.<br>
  </li>
</ul>










&nbsp;&nbsp;&nbsp; Форматы, поддерживаемые внешним декодером
указываются на странице системных настроек в разделе <span style="font-weight: bold;">SPDIF passthrough</span> (см.раздел <a href="#filter_setup_system">6.5. Системеные настройки</a>). <br>
<br>
&nbsp;&nbsp;&nbsp; Необходимо отметить, что
текущий режим может изменяться
при изменении формата входного потока. Например, при просмотре DVD есть
возможность переключать звуковые дорожки. При этом формат дорожки также
может изменяться. Если ресивер поддерживает только формат AC3, то при
переключении со звуковой дорожки формата AC3 на звуковую дорожку
формата DTS произойдет переключение с режима <b>passthrough</b> в режим <b>AC3 encode</b>.<br>










<font color="#000000"><span style="font-weight: bold;"></span></font><br>










<span style="font-weight: bold;"></span><br>
<font color="#000000"><span style="font-weight: bold;">6.2.2. Пресеты
(Preset)</span><br>
<br>
</font><font color="#000000">&nbsp;&nbsp;&nbsp; Все настройки фильтра
можно записать как единый набор настроек (пресет) и потом быстро
загружать их. Вместе с фильтром устанавливается несколько стандартных
пресетов:<br>
</font>
<ul>










  <li><font color="#000000"><b>Standard</b> - не производится никаких
дополнительных обработок и сигнал передается как есть.<br>
    </font></li>
  <li><font color="#000000"><b>Loud</b>&nbsp; - максимальная громкость.</font></li>
</ul>
<br>










<span style="font-weight: bold;">6.2.3. Усиление сигнала (Gain)<br>
</span><br>
&nbsp;&nbsp;&nbsp; Усиление сигнала относительно исходного уровня. Не следует
использовать эту опцию вместо громкости плеера или системной громкости.
При сильном усилении возможно возникновение переполнения и заметное
снижение качества проигрывания. Подробнее см. раздел&nbsp; <a href="ac3filter_rus.html#theory_loudness">7.1. Громкость и динамический диапазон</a>.<br>

<br>










&nbsp;&nbsp;&nbsp; Уровень <span style="font-weight: bold;">Master</span>
задает желаемый уровень усиления в дБ. Если имеющейся шкалы
недостаточно, можно указать желаемый уровень в поле ввода снизу в любых
пределах.<br>










<br>










&nbsp;&nbsp;&nbsp; Уровень <span style="font-weight: bold;">Gain</span>
отображает текущий уровень усиления. В отсутствии переполнения совпадает с уровнем <span style="font-weight: bold;">Master</span>. В случае переполнения система автоматической регулировки усиления понижает этот уровень. Таким
образом изменение уровня <span style="font-weight: bold;">Gain</span>
может сигнализировать о том, что установлен слишком высокий уровень <span style="font-weight: bold;">Master</span> и указать, приблизительно до
какого уровня следует уменьшить усиление.<br>










<br>










&nbsp;&nbsp;&nbsp; См. также опции <span style="font-weight: bold;">Auto
gain control</span> и <span style="font-weight: bold;">One-pass norm</span>
в резделе <a href="#filter_setup_mixer">6.3. Настройки микшера</a>.<br>










<span style="font-weight: bold;"><br>
6.2.4. Сжатие динамического диапазона (DRC)</span><br>










<br>










&nbsp;&nbsp;&nbsp; Флаг <b>Enabled</b> включает/отключает использование
сжатия динамического диапазона. Первый уровень задает уровень сжатия
динамичкеского диапазона. Второй уровень отображает текущий уровень
усиления. Подробнее см. раздел&nbsp; <a href="ac3filter_rus.html#theory_loudness">7.1. Громкость и динамический диапазон</a>.<br>










<br style="font-weight: bold;">










<span style="font-weight: bold;">6.2.5. Информация о потоке (Decoder
info).</span><br>










<br>










&nbsp;&nbsp;&nbsp; Отображает тип и параметры текущего аудио-потока.
Строка <span style="font-weight: bold;">Input</span> отображает тип
входного потока. В большом текстовом поле отображается информация о
формате. Декодеры для разных форматов показывают разную информацию, в
том числе:<br>










<ul>










  <li>speakers - конфигурация каналов в потоке</li>
  <li>sample rate - частота дискретизации<br>
  </li>
  <li>bitrate - битрейт<br>
  </li>
  <li>stream - тип битового потока (8/14/16 bit big/little endian)<br>
</li>
  <li>frame size - размер кадра<br>
  </li>
  <li>nsamples - количество сэмплов на кадр</li>
</ul>










&nbsp;&nbsp;&nbsp; Поля <span style="font-weight: bold;">Frames/errors</span>
отображают статистику декодера. В нормальном режиме работы ошибок быть
не должно!<br>










<br style="font-weight: bold;">










<span style="font-weight: bold;">6.2.6 Загрузка процессора (CPU).</span><br>










<br>










&nbsp;&nbsp;&nbsp; Индикатор показывает загрузку процессора фильтром.<br>










<br style="font-weight: bold;">










<span style="font-weight: bold;">6.2.7 Индикаторы уровней (Levels).</span><br>










<br>










&nbsp;&nbsp;&nbsp; Здесь отображаются текущие входные и выходные
пиковые уровни сигнала. Уровни отображаются в логарифмическом формате.
По входным уровням хорошо видна реальная конфигурация каналов в
потоке. Бывает, что формат потока выставлен как 5.1, однако
фактически низкочастотный канал отсутствует (см. раздел <a href="#theory_lfe">7.2. Что
такое LFE?</a>). При возникновении переполнения индикаторы выходных
уровней становятся красными.<br>










<font color="#ff0000"><br>
</font>
<h3><a name="filter_setup_mixer"></a>6.3. Настройки микшера (страница Mixer)</h3>










&nbsp; <br>










<div align="center"><img src="pic/dlg_mixer.png" alt="" style="width: 623px; height: 427px;" height="427" width="623">&nbsp; </div>










<br style="font-weight: bold;">










<span style="font-weight: bold;">6.3.1. Матрица микширования (Matrix).</span><br>










<br>










&nbsp;&nbsp;&nbsp; Основной элемент этой страницы - матрица
микширования. Она представлена в форме матричного умножения: S' = M*S,
где S = { L, C, R, SL, SR, LFE } - входной сэмпл, S' = { L', C', R',
SL', SR', SW' } - выходной сэмпл. <br>
<br>










&nbsp;&nbsp;&nbsp; Более приземленно это означает, что для каждой
клетки действет следующее правило: мы микширует канал заданный колонкой
в канал заданный строкой с усилением заданным в клетке. Так, если мы
хотим направить левый канал в правый, то мы должны поставить значение 1
в клетке на пересечении колонки 'L' и строки 'R'. После этого из правого канала будет лсышен и левый и правый каналы. <br>
<br>&nbsp;&nbsp;&nbsp; Необходимо четко разделять понятия входного и
выходного канала. Входной канал - это то, что было закодировано в
исходном потоке. Выходной канал - это то, что мы будем слышать в
колонках.<br>










<br>










&nbsp;&nbsp;&nbsp; Строка определяет что мы будем слышать из выходного
канала заданного этой строкой. Так, для матрицы, указанной на рисунке
мы из левого канала мы услышим одну часть входного левого канала, часть
центрального, левый тыл и низкочастотный канал. Полностью поменяв
местами строки матрицы колонки поменяются ролями - левая колонка будет
работать вместо правой и наоборот<br>










<br>










&nbsp;&nbsp;&nbsp; Столбец означает куда будет микшироваться входной
канал. Так, центральный канал направляется одновременно и на левую и на
правую колонку с множителем 0.7 (иначе центр идущий из двух колонок
будет звучать громче, чем если бы у нас была настоящая третья колонка).
Таким образом мы услышим центральный канал посередине между левой и
правой колонками. Изменяя множитель в левом или правом выходном канале
'подвинуть' центр. Так, если поставить 1 в столбце 'С' строки 'L', то
центр будет слышен громче из левого канала и будет казаться сдвинутым
влево.<br>










<br>










&nbsp;&nbsp;&nbsp; При включенной опции <b>Auto matrix</b> матрица
автоматически обновляется при изменении параметров. Так, изменив
уровень для центрального канала мы также увидим изменения в
коэффициентах матрицы (столбец 'C'). В зависимости от текущего режима изменения матрицы могут быть более сложными.<br>










<br>










<span style="font-weight: bold;">6.3.2. Уровни усиления (Gains).</span><br>










<br>










&nbsp;&nbsp;&nbsp; <span style="font-weight: bold;">Master</span>/<span style="font-weight: bold;">Gain</span> - желаемый и текущий уровень
усиления. (см. п.6.1.3.).<br>










<br>










&nbsp;&nbsp;&nbsp; <span style="font-weight: bold;">Voice</span> -
уровень усиления центра. В случае, если во входном сигнале присутствует
центральный канал, то этот уровень влияет только на него. Если
выделенного центрального канала нет но установлен флаг <b>Voice control</b>,
то этот уровень управляет уровнем 'виртуального' центра. Этот уровень
является параметром матрицы, поэтому имеет смысл только когда включена
опция <span style="font-weight: bold;">AutoMatrix</span>. При
изменении уровня матрица пересчитывается.<br>










<br>










&nbsp;&nbsp;&nbsp; <span style="font-weight: bold;">Surround </span>-
уровень усиления тыла. В случае, если во входном сигнале присутствуют
тыловые каналы то этот уровень влияет только на них, как в случае с
понижающим микшированием (в этом случае будет регулироваться уровень
микширования тыловых каналов во фронтальные), так и без него (т.е.
просто регулироваться уровень тыловых каналов относительно
фронтальных). В случае, если тыловых каналов в источнике нет но
установлен флаг <b>Expand stereo</b>, то этот уровень управляет
уровнем 'виртуального' тыла. Этот уровень является параметром матрицы,
поэтому имеет смысл только когда включена опция <span style="font-weight: bold;">AutoMatrix</span>. При изменении уровня
матрица пересчитывается.<br>










<br>










&nbsp;&nbsp;&nbsp; <span style="font-weight: bold;">LFE</span> -
уровень канала LFE. Этот уровень является параметром матрицы, поэтому
имеет смысл только когда включена опция <span style="font-weight: bold;">AutoMatrix</span>. При изменении уровня
матрица пересчитывается.<br>










<b><br>
6.3.3. Опции (Options)</b><br>

<br>

<ul>
<li><b>Auto gain control</b> - автоматическая регулировка усиления.
Уменьшает текущий уровень усиления, чтобы не допустить переполнения.
Текущий уровень усиления показывает индикатор <b>Gain</b>. При
отключенной опции слишком сильный сигнал будет обрезаться, что приводит
к неприятным на слух искажениям. При включенной опции при возникновении
переполнения звук будет становиться тише и переполнения просто не
происходит. Поведение системы после переполнения определяется опцией <b>One-pass
norm</b>. Если <b>One-pass norm</b> выключен, то текущий уровень будет
возвращаться к заданному уровню <b>Master</b>. В этом случае этот
уровень задает средний уровень усиления. При большом количестве мест,
где происходит переполнение такое поведение может привести к неприятным
скачкам громкости, поэтому не следует устанавливать
уровень <b>Master</b> слишком большим. Этот режим рекомендуется
использовать, когда переполнений не ожидается или они достаточно редки.
Если опция <b>One-pass norm</b> включена, то после переполнения не
восстанавливается. Таким образом каждое переполнение уменьшает
вероятность и 'силу' следующего переполнения и через некоторое время
уровень усиления устанавливается на некоторое среднее значение,
которого потом и придерживается. Обычно после ~10 минут фильма уровень
стабилизируется. Этот режим используется для того, чтобы получить
максимальную возможную громкость при минимуме возможных артефактов.
Уровень <b>Master</b> в этом случае работает как начальное значение
усиления для работы однопроходной нормализации и поэтому обычно
устанавливается на максимум. (см. также раздел <a href="#theory_loudness">7.1. Громкость и динамический диапазон</a>)<br>
  </li>
  <li><b>One-pass norm</b> - однопроходная нормализация. См. <b>Auto
gain control</b>.<br>
  </li>
  <li><b>Auto matrix</b> - автоматический рассчет матрицы микширования.
Когда эта опция включена, прямое редактирование матрицы невозможно.
Уровни усиления <b>LFE</b>, <b>Voice</b> и <b>Surround</b> являются
параметрами для рассчета матрицы при из изменении вы сразу можете
видеть, как изменяется матрица. При отключении этой опции следующие
элементы управления теряют влияние: уровни усиления <b>LFE</b>, <b>Voice</b>
и <b>Surround</b>, опции <b>Normalize matrix</b>, <b>Expand stereo</b>,
    <b>Voice control</b>, <b>Expand stereo</b>. Сохраняют свое
действие элементы: <b>Master</b>, <b>Gain</b>,<b> DRC level</b>, <b>DRC
power</b>,<b> Auto gain control</b>, <b>One-pass norm</b>, <span style="font-weight: bold;">Bass redir</span>. Появляется возможность
напрямую редактировать матрицу микширования.</li>
  <li><b>Normalize matrix</b> - нормализация матрицы. При включении этой
опции матрица микширования нормируется так, чтобы гарантированно не
происходило переполнения в выходных каналах (сумма каналов на выходе
&lt;= 1). Но при этом при изменении уровней усиления <b>LFE</b>, <b>Voice</b>
и <b>Surround</b> может происходить перераспределение громкостей
(например увеличив громкость LFE мы получим уменьшение громкости всех
остальных каналов), что не всегда удобно. Отключение этой опции
позволяет избежать этого эффекта, однако при этом возникает опасность
переполнения. Автоматическая регулировка усиления, сглаживает
последствия, но все-таки рекомендуется немного понизить общий уровень
усиления <b>Master</b> если уровни повышаются.</li>
  <li><b>Expand stereo</b> - работает только когда в исходном потоке
нет тыловых каналов. В этом случае позволяет усиливать эффект
окружения. Управляется уровнем <b>Surround</b> (который по умолчанню
не работает при отсутствии тыловых каналов на входе). Если в выходной
конфигурации колонок присутствуют тыловые колонки, то туда направляется
окружающая информация.<br>
  </li>
  <li><b>Voice control</b> - работает только когда в исходном потоке
нет центрального канала. В этом случае позволяет управлять уровнем
центра (диалогов) с помощью уровня <b>Voice</b> (который по умолчанню
не работает при отсутствии центрального канала на входе). Если в
выходной конфигурации колонок присутствует центральная колонка то
диалоги направляются туда. Совместно с опцией <b>Expand stereo</b>
позволяет раскладывать стерео сигнал на все колонки.<br>
  </li>
  <li><b>Bass redirection</b> - перенаправление басов со всех каналов
на сабвуфер. Работает только когда в выходной конфигурации колонок
присутствует сабвуфер. Рекомендуется для систем с отдельным сабом (см. <a href="#theory_lfe">7.2. Что такое LFE?</a>). В поле ввода можно задать частоту
среза в Гц.<br>
  </li>
</ul><br>
&nbsp;&nbsp;&nbsp; Список выбора <b>Matrix</b> позволяет сохранять и загружать матрицы.<br>










<br>










<h3><a name="filter_setup_gains"></a>6.4. Уровни (страница Gains)</h3>










<div style="text-align: center;"><img alt="" src="pic/dlg_gains.png" style="width: 623px; height: 427px;" height="427" width="623"><br>
</div>










<br>









<span style="font-weight: bold;">6.4.1. Уровни усиления (Gains)</span><br>










<br>










&nbsp;&nbsp;&nbsp; см. .....<br>










<br>










<span style="font-weight: bold;">6.4.2. Сжатие динамического диапазона (DRC)</span><br>










<br>










&nbsp;&nbsp;&nbsp; см. ......<br>










<br>










<span style="font-weight: bold;">6.4.3. Задержки (Delays)</span><br>











<br>











&nbsp;&nbsp;&nbsp; Задержки для каждого из выходных каналов. Величины задержек можно
задавать в различных единицах. Единицы времени означают, что будет
вносится положительная задержка, т.е. звук будет задерживаться. Единицы
расстояния наоборот означают отрицательную задержку, т.е. что звук
будет воспроизводиться 'заранее'. В обоих случаях допустимы
отрицательные величины задержек. Есть два основных применения задержек:<br>











<ul>










<li>Компенсация разных расстояних до колонок. В идеале все колонки
должны находиться на равном расстоянии от слушателя, чтобы звук
изданный
в определенный момент времени одновременно изо всех колонок дошел до
слушателя также одновременно. В противном случае звуки будут
позиционироваться неверно. Однако, на практике расстояние до колонок
может быть разным. Чем дальше находится колонка, тем раньше должен
воспроизводиться ей звук. Для компенсации этого дефекта можно
непосредственно задать расстояния до колонок.</li><li>Создание эффекта объема при разложении стерео записи на
многоканальную систему. Введение дополнительной задержки на тыловые
каналы может усилить эффект объема.</li>
</ul><br>










<span style="font-weight: bold;">6.4.4. Уровни входных каналов (Input gains)</span><br>










<br>









&nbsp;&nbsp;&nbsp; Уровни усиления для входных каналов. В некоторых
сучаях необходимо изменить уровени усиления именно входных каналов.
Например, если входной сигнал имеет центральный канал, а выходной - нет
(центр микшируется во фронтальные каналы), но требуется изменить
именно уровень диалогов. Т.е. предназначены для компенсации дефектов
записи. <br>










<br>









<span style="font-weight: bold;">6.4.5. Уровни выходных каналов (Output gains)</span><br>










<br>










&nbsp;&nbsp;&nbsp; Уровни усиления выходных каналов. Предназначены в
первую очередь для выравнивания громкости динамиков (если они
расположены несимметрично). Иными словами, для компенсации дефектов
акустики.+<br>










<br>
<br>










<h3><a name="filter_setup_system"></a>6.5. Системные настройки (страница System)</h3>










<br>










<div align="center"><img alt="" src="pic/dlg_system.png" height="427" width="623"><br>
</div>










<br>










<span style="font-weight: bold;">6.5.1. Use AC3Filter for ... (использовать AC3Filter для ...)</span><br>










<br>










&nbsp;&nbsp;&nbsp; Определяет, в каких случаях будет использоваться
AC3Filter.<br>










<ul>










  <li>PCM - использовать AC3Filter для пост-обработки любых
аудио-потоков. Для использования этого режима фильтр должен иметь
высокий приоритет (см. опцию <span style="font-weight: bold;">Filter
merit</span> далее в этом разделе)<br>
  </li>
  <li>AC3 - использовать AC3Filter для декодирования AC3</li>
  <li>DTS - использовать AC3Filter для декодирования DTS<br>
  </li>
  <li>MPEG Audio - использовать AC3Filter для декодирования MPEG Audio</li>
  <li>DVD (PES) - использовать AC3Filter для декодирования аудио в
MPEG1/MPEG2 PES потоках. Необходим для проигрывания VCD/DVD.</li>
</ul>










<br>










<span style="font-weight: bold;">6.5.2. Цифровая передача (SPDIF passthrough)</span><br>










<br>










&nbsp;&nbsp;&nbsp; Определяет, какие форматы поддерживаются внешним
декодером и будут передаваться без изменений при использовании
цифрового выхода. Имеет значение только при включенной опции <span style="font-weight: bold;">SPDIF</span> (см. раздел <a href="#filter_setup_main">6.2. Основные настройки</a>).<br>










<span style="font-weight: bold;"></span><br style="font-weight: bold;">










<span style="font-weight: bold;">6.5.3. Приоритет фильтра (Filter merit)</span><br>










<br>










&nbsp;&nbsp;&nbsp; Фильтр устанавливается в систему с наивысшим
приоритетом, т.е. будет использоваться вместо любых других
установленных декодеров. Если по каким-то причинам необходимо
использовать другие декодеры, то приоритет можно понизить до
минимального при помощи опции <b>Prefer other decoder</b>. Фильтр
останется в системе и будет использоваться только если не установлено
других декодеров. <b>Prefer AC3Filter</b> - вернуть высокий
приоритет. Понижать приоритет необходимо, например, при использовании
NVDVD плеера. NVDVD может работать только со своим собственным
декодером, но при установленном AC3Filter пытвется загрузить его, после
чего вываливается с ошибкой. Это ошибка NVDVD.<br>










<br>










<b>6.5.4. Устройство вывода по умолчанию (</b><b>Default audio renderer)<br>
</b><br>










&nbsp;&nbsp;&nbsp; Звуковая карта может работать в двух режимах:
DirectSound и WaveOut. Если при использовании фильтра возникают
проблемы (например не работает SPDIF), то переключение режима работы
может помочь. Некоторые плееры имеют настройки для изменения устройства вывода (см. раздел <a href="#player_setup">5. Настройка плеера</a>), прочие же используют настройки системы по
умолчанию. Для переключения режима работы используются&nbsp; опции <b>Use
DirectSound</b> - для использования интерфейса DirectSound и <b>Use
WaveOut</b> для использования интерфейса WaveOut. Эта опция изменяет
глобальные настройки системы! Поэтому если плеер имеет собственные
настройки устройства вывода, то лучше пользоваться средствами плеера.<br>










<br>










<span style="font-weight: bold;">6.5.5. </span><b style="font-weight: bold;">Синхронизация аудио и видео (</b><span style="font-weight: bold;">A</span><b style="font-weight: bold;">udio/Video sync)</b><br style="font-weight: bold;">










<br>










&nbsp;&nbsp;&nbsp; В некоторых случаях возможно что аудио и видео
рассинхронизированы. В основном это случается из-за неправильного
микширования видео файла, но возможны и аппаратные причины
десинхронизации. Эта опция предназначена для решения <i>аппаратных</i>
проблем. Эта опция может быть применена для исправления дефекта
конкретного файла, но необходимо не забывать изменить ее обратно! Здесь
указывается сдвиг аудио относительно видео в мс. Если звук слышен <i>до</i>
видео, то необходимо <i>увеличить</i> это значение. Если звук
происходит <i>после</i> событий на экране, то необходимо <i>уменьшить</i>
это значение. Эта опция может исправить только постоянный временной
сдвиг.<br>
<br>










&nbsp;&nbsp;&nbsp; Эта опция действует немедленно. При изменении
значения задержки&nbsp; возможно, что изображение замрет или будет
двигаться скачками в течении нескольких секунд.<br>










<br>
<br>




<hr size="2" width="100%">
<h2><a name="theory"></a>7. Теоретические сведения</h2>

&nbsp;&nbsp;&nbsp; Качество звука - это очень сложное понятие которое
зависит от огромного количества факторов: типа акустической системы,
условий прослушивания, качества исходной записи, самого слушателя и
многих прочих. Невозможно дать однозначные рекомендации как добиться
качества, нет единого рецепта как нет и идеально правильного звука:
запись подготовленная для одних условий прослушивания в других условиях
может звучать совершенно неприемлемо. Однако можно попытаться изложить
некоторые главные принципы, которые помогут понять что необходимо
делать в каждом конкретном случае. Поэтому крайне рекомендуется
ознакомиться с этим разделом для более полного понимания возможностей
фильтра.<br>

<br>

<h3><a name="theory_loudness"></a>7.2. Громкость и динамический диапазон</h3>



<br>
<b>



Что такое громкость</b><br>
<br>
&nbsp;&nbsp;&nbsp; Этот, казалось бы, очевидный вопрос достаточно
трудно формализовать, поскольку в разных случаях подразумеваются
совершенно разные вещи. <br>
<br>
&nbsp;&nbsp;&nbsp; Наиболее очевиден смысл громкости, когда мы
говорим о <i>звуковом давлении</i>, поскольку это то, что непосредственно
воспринимается ухом.<br>
<blockquote><small><i>Звуковое давление</i> - давление, дополнительно
возникающее при прохождении звуковой волны в жидкой и газообразной
среде. Распространяясь в среде, звуковая волна образует сгущения и
разрежения, которые создают добавочные изменения давления по отношению
к среднему значению давления в среде. Т.о., </small><small>звуковое давление</small><small>
представляет собой переменную часть давления, т.е. колебания давления
относительно среднего значения, частота которых соответствует частоте
звуковой волны. (Большая Советская Энциклопедия)</small><br>
</blockquote>
&nbsp;&nbsp;&nbsp; Таким образом мы можем оценить любой звук -
громкие звуки создают большое давление, тихие - малое. Обычно звуковое давление измеряется в <i>децибелах</i> (дБ) относительно порога слышимости (pt = 0.00002 Па). Порог слышимости принимается за 0дБ, а <i>громкость</i>
вычисляется как l = 20 * log(p / pt), где l - звуковое давление
(громкость) в дБ, p - звуковое давление, pt - порог слышимости. При
этом все слышимые звуки имеют положительную величину громкости, а
неслышимые (ниже порога громкости) - отрицательную. Изменение громкости
на 6дБ соответствует двукратному изменению давления. Изменение на 20дБ
- изменению давления в 10 раз. Несколько типичных значений громкости:<br>
<ul>
  <li>тихий шепот на расстоянии 1,5 м - 30 дБ (~0.0005Па)<br>
  </li>
  <li>речь на расстоянии 30 см - 70дБ (~0.05Па)<br>
  </li>
  <li>отбойный молоток на расстоянии 15 м - 80 дБ (~0.2Па)<br>
  </li>
  <li>самолет на взлете
на расстоянии 70 м - 120 дБ (~20Па)<br>
  </li>
</ul>&nbsp;&nbsp;&nbsp; Обратите внимание на диапазон воспринимаемых
давлений: давление у порога слышимости и создаваемое самолетом
отличаются в
миллион раз! Поэтому логарифмическая шкала гораздо лучше согласуется с
физиологией слуха - линейное изменение звукового давления не
соответствует ощущению линейного изменения громкости. Например,
изменение звукового давления на 0.05Па при разговоре будет очень
заметно, однако совершенно незаметно при взлете самолета. Изменение же
звукового давления на 6дБ будет воспринято как примерно равное
изменение громкости в обоих случаях, хотя в первом случае это будет
соответствовать изменению давления на 0.025Па, а во втором - 10Па.<br>

<br>
&nbsp;&nbsp;&nbsp; Регуляторы громкости на усилителе, в настройках
системы, в плеере не создают звукового давления непосредственно. При отсутствии
сигнала даже на при максимальных установках громкости мы не услышим
ничего (при условии, что сама система воспроизведения не создает шума).
Таким образом они влияют на громкость лишь косвенно и имеют смысл <i>усиления </i>сигнала. <small>(усиление может означать и ослабление сигнала).</small> В дальнейшем термин <i>громкость</i> не будет использоваться для обозначения уровней усиления, за исключением <i>системной громкости</i>, поскольку это уже устоявшийся термин. Под системной громкостью
будет пониматься как уровень усиления установленный в настройках
операционной системы, так и в плеере, усилителе/ресивере и т.д.<br>

<br>
&nbsp;&nbsp;&nbsp; Уровень усиления также может измеряться в децибелах.
Это удобно поскольку громкость сигнала и уровень усиления в таком
случае просто складываются. Т.е. сигнал с громкостью 70дБ, усиленный на
10дБ будет звучать с громкостью 80дБ.<br>
<br>
&nbsp;&nbsp;&nbsp; На восприятие громкости также влияет свойство <i>адаптации</i>
слуха. Слух приспосабливается к громкости окружающего шума, и
соответственно корректирует восприятие громкости. Многие наверняка
замечали, что человек в наушниках, в которых играет
громкая музыка начинает говорить громко (согласно восприятию
окружающих), однако с его точки зрения это нормальная громкость речи
(относительно громкости звука в наушниках). В условиях обычного
городского шума тикание часов услышать очень сложно - этот звук
воспринимается как очень тихий. То же самое тикание часов в полной
тишине может восприниматься как оглушительное и мешать спать. Таким
образом звук одной и той же громкости может восприниматься
как громкий или тихий в зависимости от окружающих условий.<br>
<br>
&nbsp;&nbsp;&nbsp; Т.е. громкость звука в отрыве от условий
прослушивания мало что значит. Допустим, мы отрегулировали уровень
усиления так, чтобы громкость диалогов в фильме приблизительно
соответствовал реальности. Тогда, если в фильме есть звук тикающих в
тишине часов и при просмотре фильма в условиях городского шума мы не
услышим часов вовсе, поскольку звук часов значительно тише окружающего
шума, и слух адаптирован отсеивать шум и все, что тише него.<br>
<br>
<u>Переписать: &nbsp;&nbsp; Процесс адаптации слуха происходит достаточно
медленно - порядка нескольких минут. ...прием используемый в фильмах
ужасов - тихий звук в течении продолжительного времени, затем резкий
громкий звук. Если бы не было достаточно большого периода тихого звука,
в течении которого слух приспасабливается слышать тихие звуки, то тот
же резкий звук не произвел бы такого впечатления.<br>
</u><br>
&nbsp;&nbsp;&nbsp; Разность громкостей (относительная громкость)...<br>
<br>
&nbsp;&nbsp;&nbsp; А теперь вспомним, что сигнал - переменный:<br>
<br>
<div align="center">todo: add picture...<br>
</div>
<br>
&nbsp;&nbsp;&nbsp; Что брать для расчета громкости? Очевидно, что
изменение давления за один период звуковой волны не имеет
смысла изменения громкости звука, поскольку мы не слышим отдельные
колебания. Поэтому для вычисления громкости необходима статистическая
обработка сигнала, т.е. на громкость будет влиять не какое-то
конкретное значение звукового давления, а <i>все</i> значения за некоторый промежуток времени.<br>
<br>
мгновенный уровень, усреднение, энергия, частотное взвешивание, пик-уровень.<br>
Для анаиза будут использоваться графики трех типов - амплитуда, громкость, и гистограммы.....<br>

<br>Привести в проядок термины - абсолютная громкость,
относиетльная громкость, просто громкость и т.д. Под абсолютной
громкостью я часто имею в виду относительную...<br>

Чтобы уменьшить путаницу будет использоваться следующая терминология:<br>


<br>
будет использоваться лог. шкала, пиковые уровни.<br>
<br>
Пронумеровать графики...<br>

<br>
<b>
Гистограмма громкостей</b><br>

<br>

<div align="center"><img alt="" src="pic/h_fightclub.png" height="444" width="534"><br>
</div>
<br>

&nbsp;&nbsp;&nbsp; Этот рисунок иллюстрирует распределение
громкостей типичного фильма (DVD FightClub, здесь и далее берутся
только оригинальные аудио-треки, без перевода, дабы не искажать
картину). По оси Х откладывается
громкость в децибелах, по оси Y - насколько чато звук с этой громкостью появляется. Проще говоря, на протяжении
фильма постоянно контролировалсь текущяя громкость и чем чаще
встречается какая-то громкость тем выше с этом месте график. Т.е. можно
сказать, что громких
взрывов было мало, зато очень много разных фоновых звуков... График
поделен на несколько условных областей:<br>

<ol>

  <li>Голос. Уровень диалогов для фильмов - это один из наиболее
важных параметров. Он является отправной точкой для всех остальных
звуков: все, что ниже - считается тихими звуками, все, что выше -
громкими. Хорошая слышимость диалогов это один из главных критериев
настройки (о которой мы будем говорить дальше).<br>
  </li>
  <li>Фоновые звуки - проезжающие автомобили, звуки шагов, фоновая музыка</li>
  <li>Очень тихие звуки - легкий ветер, шуршание травы и т.д.</li>
  <li>Громкие звуки - звонок телефона, удары и прочее</li>
  <li>Взрывы и прочие глобальные катастрофы</li><li>Шумы записи<br>
  </li>

</ol>

&nbsp;&nbsp;&nbsp; Границы между областями весьма условны и могут изменяться для разных записей. В данном случае <i>известно</i>, что громкость голоса приблизительно равна -27дБ.<br>

<br>

&nbsp;&nbsp;&nbsp; Абсолютная величина громкости не имеет большого
значения. Это обусловлено свойством адаптации слухового аппарата.
Многие наверняка замечали, как люди, долгое время сидящие в наушниках с
большой громкостью начинают кричать при разговоре - для них эта
громкость является нормальной. Или, наоборот, когда в полной тишине
тикание часов становится подобным грому :). Именно поэтому громкость
диалогов является настолько важным параметром.<br>

<br>

&nbsp;&nbsp;&nbsp; Рассматривая график можно отметить несколько
интересных моментов. Во-первых, чаще всего в фильме встречались звуки с
громкостью -40дБ. Пока просто отметим этот факт. Во-вторых главный горб
расположен от 0дБ (максимальный уровень) до -70дБ (минимальный
уровень). Разумно предположить, что все важные звуки расположены внутри
этого горба, а все, что тише - просто шумы. Разность максимального и
минимального уровней составляет 70дБ. Эта величина называется
динамическим диапазоном и будет далее иметь огромное значение.<br>

<br>

&nbsp;&nbsp;&nbsp; Для фильмов на DVD привденная картина достаточно
типична. Диалоги занимают значительное время, немного больше - фоновый звук и музыка, периодические всплески громкости и
периодический же постепенный уход в тишину. В целом, звуковая картина
этого фильма достаточно сбалансирована и использует практически весь
доступный динамический диапазон.<br>

<br>

&nbsp;&nbsp;&nbsp; Теперь посмотрим и на другие фильмы:<br>

<br>

<div align="center"><img alt="" src="pic/h_movies.png" height="475" width="612"><br>
<small>(для всех фильмов уровень диалогов равен -27дБ)<br>
</small>
</div>

<br>
&nbsp;&nbsp;&nbsp; На этих примерах очень хорошо видно разделение
на две большие группы. Для первой группы фильмов характерно практически
полное отсутствие громких звуков (Cube, Dracula, About Schmidt,
Savior). Для них диапазон громкостей от 0дБ до -15дБ (очень громкие
звуки) практически не используется. Для другой группы фильмов, наоборот
громкие звуки черезвычайно важны (Interstate60, Blood (Last Vampire),
Pitch Black, Matrix). Казалось бы, что этих звуков относительно мало,
поэтому особой роли они не играют. Однако, например, продолжительность
звука выстрела (его громкой части) составляет доли секунды, но именно
большая громкость выделяет этот звук. Если бы этот звук был тише, то
создалось бы впечатление 'плоскости' и невыразительности звука. В
фильмах первого типа ('тихие' фильмы) громкий звук даже если встретится
один раз на фильм, он все равно не несет большой смысловой нагрузки,
поэтому его громкость не так критична. В фильмах второго типа эти звуки
(даже при относительно малой продолжительности) формируют настроение
фильма.<br>

<br>

&nbsp;&nbsp;&nbsp; Другая бросающаяся в глаза особенность - это высокие 'горбы' в фильмах Cube и Interstate60. В фильме Cube
присутствует <i>постоянный</i>
тихий фоновый гул (работа механизмов куба) и именно поэтому
график имеет горб на громкости около -50дБ. То же самое касается фильма
Interstate 60 - это путешествие на автомобиле, и как следствие,
постоянный звук движения. Для прочих фильмов нет настолько хорошо
выраженных фоновых звуков поэтому графики более 'размазанны' по
динамическому диапазону. Формы обоих гистограмм очень похожи, однако
максимум гистограммы для фильма Cube находится на 10дБ ниже. Так как
уровень голоса в обоих фильмах одинаковый, то сразу можно заключить,
что фильм Cube значительно тише. Это далеко неочевидный вывод. Вспомним
про свойство адаптации слуха - если сдвинуть графики так, чтобы их
максимумы находились на одном и том же уровне фильм Cube все равно
будет восприниматься как 'тихий'!<br>

<br>
&nbsp;&nbsp;&nbsp; Фильм About Schmidt имеет большой горб на уровне
-70дБ..-80дБ. Это шумы записи - в этом фильме они относительно громкие
по сравнению с другими фильмами, однако достаточно тихие, чтобы они не
мешали просмотру.<br>

<br>

&nbsp;&nbsp;&nbsp; До сих пор мы рассматривали исключительно фильмы. Посмотрим теперь на музыку:<br>

<br>

<div align="center"><img alt="" src="pic/h_music.png" height="451" width="623"><br>
</div>

<br>
&nbsp;&nbsp;&nbsp; Сразу бросается в глаза совершенно другое
распределение громкостей. (<i><small>Здесь собраны гистограммы музыки разных направлений и разного качества
для того чтобы показать разнообрразие. Они не показывают реального
соотношения разных типов композиций.</small></i>).
Все звуки сильно сдвинуты в 'громкую' часть динамического диапазона.
Разница в громкости фильмов и музыки достигает 40дБ. Кроме
того, для фильмов характерен плавный спад гистограммы в громкой
области. Для музыки же максимум гистограммы зачастую находится на
максимальном уровне. Таких графиков приведено немного, однако такая
ситуация является очень распространенной.<br>

<br>

&nbsp;&nbsp;&nbsp; Понятие уровня диалогов к музыке в
зачастую неприменимо, поэтому разделить громкие и тихие звуки
очень затруднительно. Звук одной и той же громкости даже в
пределах одной и той же композиции может быть как тихим так и громким
из-за свойства адаптации слуха. Значение
имеют лишь положительные или отрицательные <i>перепады</i> громкости, которые на данных гистограммах не видны.<br>

<br>

&nbsp;&nbsp;&nbsp; Отсутствие единого ориентира приводит к хаосу - звук
из разных источников имеет разную громкость - разница в максимумах гистограмм композиций достигает 20дБ. Да и вообще понятие
'громкости композиции' очень сложно как-то формализовать. Многим
наверняка знакома ситуация, когда есть много разной музыки из разных
источников и при проигрывании ее подряд (например, если записать
AudioCD) громкость постоянно меняется при переходе от одной композиции
к другой. Приведенные графики очень хорошо иллюстрируют такую ситуацию.<br>

<br>

&nbsp;&nbsp;&nbsp; Динамический диапазон музыкальных композиций
(разница между самым громким и самым тихим звуком) составляет 20-40дБ,
что значительно меньше динамического диапазона фильмов (70дБ). Мы еще
вернемся к этому вопросу позже...<br>

<br>

<b>Проблема громкости DVD.</b><br>

<br>

&nbsp;&nbsp;&nbsp; В среднем абсолютный уровень громкости на
музыкальных записях (а также системные звуки Windows) оказывается значительно
выше чем на DVD-фильмах.
Поэтому при одинаковых настройках громкости громкость фильмов будет
ниже и при наличии внешних шумов может оказаться недостаточной, слышно будет плохо (!) и будет казаться, что звук
некачественный. Увеличение усиления в настройках системы и на усилителе
даже до максимальной может не решить проблемы: разница в средней
громкости достигает 40дБ, что достаточно много для компьютерной акустики. Однако, даже если
мощности усилителя окажется
достаточно и проигрывание DVD происходит с достаточной абсолютной громкостью это
не всегда удобно, поскольку звуки операционной системы, которые звучат
с нормальной абсолютной громкостью при нормальных настройках усиления при большом
усилении будут просто громоподобными. <br>

<br>

&nbsp;&nbsp;&nbsp; Эта проблема характерна в основном для компьютерного
проигрвания, поскольку в аппаратных проигрывателях управление уровнем
громкости осуществляется самим декодером. Некоторые софтварные
DVD-проигрыватели также умеют управлять системной громкостью, однако
это тоже не всегда удобно, поскольку изменяется громкость <i>всех</i>
звуков системы (можно случайно оглушить соседей), да и управлять
громкостью на внешнем усилителе программа все равно не может. Поэтому
это только частичное решение проблемы.<br>

<br>

&nbsp;&nbsp;&nbsp; Компромиссное решение состоит в обработке звука
непосредственно перед проигрыванием. Подобная пост-обработка может
сильно повысить качество проигрывания <i>конкретной</i> записи и в <i>конкретных</i>
условиях. Многие могут возразить, что при этом теряется 'качество',
однако, как уже упоминалось - нет абсолютного качества, Мы не ставим
себе целью <i>монтировать</i> звук, наша цель - добиться того, чтобы <i>слушать</i>его
было приятно. Если акустическая система не обладает достаточной
мощностью или у нас нервные соседи смотреть фильм с пониженной
громкостью, когда не разобрать половины слов и не слышно падения капель
будет просто неприятно. Даже самовнушение о максимально достигнутом
'качестве' не сможет сгладить этого впечатления. Еще раз повторю
основную мысль: <i>качество - это то, что мы слышим</i>.
Звук проходит много стадий обработки до того, как попасть к слушателю,
а разнообразие акустики и ее свойств настолько велико, что последняя
стадия обработки непосредственно перед воспроизведением является
практически необходимостью.<br>

<br>
<div align="center">todo: цели пост-обработки.<br>
</div>
<br>

<b>Изменение уровня. Переполнение, обрезание и ограничение.</b><br>

<br>

&nbsp;&nbsp;&nbsp; Изменение уровня - это просто умножение амплитуды
сигнала на определенное значение, в результате чего изменяется
громкость всего сигнала (увеличивается или уменьшается).<br>

<br>

<div align="center"><img alt="" src="pic/a_gain.png" height="354" width="448"><br>
</div>

<br>

&nbsp;&nbsp;&nbsp;&nbsp; В логарифмическом виде умножение на число -
это просто прибавление константы. Поэтому если ко всем уровням
прибавить одно и то же число, то гистограмма уровней просто сдвинется:<br>

<br>

<div align="center"><img alt="" src="pic/h_gain.png" height="409" width="596"><br>
</div>

<br>
&nbsp;&nbsp;&nbsp; Если мы умножим сигнал на слишком большое число, то
возможно переполнение. Если переполнение не отслеживать, то значение
амплитуды принимает практически случайные значения (см. рисунок) и это
приводит к очень заметным на слух частым щелчкам. Самых простой способ
борьбы с этим дефектом - обрезание сигнала (клиппинг, clipping), т.е.
там где амплитуда сигнала выходит за перделы мы 'обрезаем' его (см. рисунок). При
небольшом переполнении клиппинг практически незаметен на слух, однако
при повышении уровня он проявляется как 'песок' в звуке. <br>

<br>

<div align="center"><img alt="" src="pic/a_overflow.png" height="356" width="794"><br>
</div>

<br>
&nbsp;&nbsp;&nbsp; Более сложный, но и более эффективный способ -
это
ограничение сигнала (лимитинг, limiting). Суть его состоит в том, чтобы
автоматически понижать уровень сигнала так, чтобы переполнения просто
не происходило. Для этого необходима система автоматической регулировки
усиления (АРУ, Automatic gain control, AGC), которая будет вносить
поправку в текущий уровень сигнала. Так, пока переполнения нет АРУ не
изменяет сигнал, а как только сигнал превышает максимальный уровень
вносится поправка, которая изменяет сигнал так, чтобы его уровень не
превышал максимальный. Как видно на рисунке, сигнал полностью сохраняет
свою форму! Однако, громкость при этом остается максимальной:<br>

<br>

<div align="center"><img alt="" src="pic/l_limiting.png" height="600" width="400"><br>
</div>

<br>

&nbsp;&nbsp;&nbsp; Необходимо обратить внимание на то, что на
предыдущем рисунке приведена амплитуда, а на этом - громкость
(определенная по <i>большой группе</i>
амплитуд). Поэтому несмотря на то, что график громкости 'обрезан' форма
самого сигнала искажается минимально. Этот способ также не лишен
недостатков. Изначально
звук имел разную громкость, а после ограничения все звуки выходящие за
пределы имеют одну и ту же громкость и звук получается 'плоский' и
невыразительный. Посмотрим на гистограммы (Fight Club):<br>

<br>

<div align="center"><img alt="" src="pic/h_overflow.png" height="391" width="595"><br>
</div>

<br>

&nbsp;&nbsp;&nbsp;&nbsp; Здесь приведен пример неудачного усиления. При
усилении +10дБ искажения еще мало заметны (мест в фильме где возникает
переполнение еще относительно мало), однако с ростом усиления
ограничение уровня появляется все чаще и чаще и при уровне +30дБ
начинает ограничиваться голос, что крайне заметно. Особенно заметны
недостатки ограничения при значительных изменениях громкости за малое
время - субъективно громкость начинает скакать вверх и вниз. Если на
фоне разговора (который при усилении +30дБ уже воспроизводится с максимальной громкостью)
происходит громкий звук (который громче голоса в оригинале, например,
звонок телефона) то уровень усиления уменьшается так, чтобы громкий
звук не искажался, но при этом громкость разговора также резко падает.
Когда громкий звук заканчивается разговор так же резко возвращается к
предыдущей громкости:<br>

<br>

<div align="center"><img alt="" src="pic/l_loudness_jump.png" height="800" width="400"><br>
</div>

<br>

&nbsp;&nbsp;&nbsp; Т.о. относительная громкость разных звуков
воспроизводимых одновременно сохраняется, однако сама громкость
постоянно
изменяется, что хорошо заметно и очень неприятно. Таким образом при
больших уровнях усиления (20-30дБ и больше) ограничение тоже дает
<i>плохой</i>
результат. При малых уровнях усиления дефекты ограничения практически
незаметны, тогда как обрезание хорошо слышно практически всегда.<br>

<br>


&nbsp;&nbsp;&nbsp; Фильтр всегда производит либо ограничение
(опция <b>AGC</b> влючена) либо обрезание (опция <b>AGC</b>
отключена). В дальнейшем если не оговорено явно будет подразумеваться
что включено ограничение (как более качественный метод). Поэтому
рекомендуется всегда держать опцию <b>AGC</b> включенной.<br>

<br>

<b>Нормализация.</b><br>
<br>
&nbsp;&nbsp;&nbsp; Зададимся целью поднять
громкость без потери качества вообще. Такое возможно? Да, если есть
'запас' динамического диапазона. Посмотрим снова на гистограммы с
фильмами, фильм Cube (желтый график, todo: link to pic). На гистограмме видно, что громкость не
поднимается выше -15дБ (возможно, что за весь фильм и есть один-два
таких момента, однако, для целей данного рассмотрения будем считать,
что громких звуков нет вообще). А так как громких звуков нет, то можно
повысить громкость на 15дБ без потери качества!<br>

<br>

<div align="center"><img alt="" src="pic/l_normalize.png" height="402" width="400"><br>
</div>

<br>

&nbsp;&nbsp;&nbsp; При этом гистограмма подвинется вплотную к правому краю:<br>

<br>

<div align="center"><img alt="" src="pic/h_normalize.png" height="409" width="595"><br>
</div>

<br>

&nbsp;&nbsp;&nbsp; Таким образом, окажется, что в фильме теперь
присутствует звук с максимальной громкостью, но если мы будем
увеличивать громкость дальше возникнут искажения (описанные выше).
Такая форма сигнала, где присутствует звук максимальной громкости без
внесенных при этом искажений называется нормальзованной, а процесс -
нормализацией. Нормализация часто производится на стадии подготовки
музыкальных записей и к нам звук попадает уже нормализованным
(например, AudioCD). Однако для фильмов нормализации не производится.
Почему?<br>

<br>

&nbsp;&nbsp;&nbsp; Вспомним гистограммы для музыки и хаос с громкостью.
Для музыки важно воспроизведение с максимальной громкостью, поскольку
рассчитана на максимальную целевую аудиторию - CD-плееры, шум на улице,
метро, дешевые наушники, хрипящие радиостанции, через которые тихие
звуки ниже -40дБ просто не услышать. Еще раз посмотрим на графики для
музыки - минимальная громкость примерно равна -40дБ...<br>

<br>

&nbsp;&nbsp;&nbsp; Для DVD это не так. Они в первую очередь
предназначены для качественных домашних кинотеатров. Воспроизводящая
аппаратура должна быть откалибрована так, чтобы всегда воспроизводить
диалоги с одной и той же <i>абсолютной</i> громкостью для <i>любого</i>
фильма, будь то боевик с его потрясающими стену взрывами или мелодрама
с тихим шуршанием травы. При этом воспроизводящая система <i>всегда</i>должна
быть готова воспроизвести эти звуки без необходимости изменять уровень
усиления. Таким образом на первый план выступает не необходимость
сделать запись максимально громкой, а необходимость жесткого опорного
уровня, чтобы декодер имел возможность подстроить уровень громкости
автоматически. Этот уровень может быть любым (на самом деле это не
важно, т.к. если есть опорный уровень то коррекцию можно сделать
всегда). Стандартом де-факто для DVD является уровень -27дБ. Поэтому
даже если фильм громких звуков не содержит то проводить нормализацию
смысла
нет и динамический диапазон остается неизрасходованным полностью.<br>

<br>
<b>
Однопроходная нормализация.</b><br>

<br>
&nbsp;&nbsp;&nbsp; Итак, для целей повышения громкости нормализация это хорошо. Но для того, чтобы провести нормализацию нужно
знать
максимальный уровень записи и чтобы его найти нужно
просмотреть всю запись заранее. Однако это не всегда возможно да и
просто
неудобно. Есть метод нормализации, для которого не нужно предварительно
просматривать всю запись - однопроходная нормализация. Суть метода
состоит в том, что при просмотре фильма мы ищем максимум громкости <i>постоянно</i>. В начальный момент времени усиление максимально. В момент, когда возникает переполнение мы уменьшаем усиление:<br>

<br>

<div align="center"><img alt="" src="pic/l_onepass.png" height="600" width="400"><br>
</div>

<br>

&nbsp;&nbsp;&nbsp; Как видно на рисунке первый пик громкости срезается
почти также, как и при обычном переполнении (однако продолжительность
'среза' значительно меньше, сравните с ....todo: add link), однако впоследствии
переполнений не происходит. Таким образом усиление будет
корректироваться при нахождении каждого нового максимума и в результате
гистограмма автоматически сдвигается в сторону достижения максимальной
громкости.<br>

<br>

&nbsp;&nbsp;&nbsp; Как и все прочие, метод не лишен недостатков.
Во-первых - метод не лишен искажений (хотя и малозаметных - нужно точно
знать, что слушать, чтобы заметить работу однопроходной нормализации).
Во-вторых громкость постоянно
снижается во время просмотра фильма (хотя обычно основной процесс
снижения
громкости заканчивается на первых 10-15 минутах фильма, поэтому
практически незаметен). И
в-третьих, основная цель - повышение громкости, может быть не
достигнута - все зависит от самого фильма (это касается и обычной
нормализации). Вот пример гистограмм полученных в случае однопроходной
нормализации для фильмов Cube (где нормализация возможна) и Fight Club
(где нормализация не даст желаемого эффекта):<br>

<br>

<div align="center"><img alt="" src="pic/h_onepass.png" height="409" width="595"><br>
</div>

<br>

&nbsp;&nbsp;&nbsp; Как видно на этих гистограммах результат отличается
разительно. Включение
однопроходной нормализации дает существенный положительный эффект для
фильма Cube - стало заметно громче (и подтвердилось наше предположение,
что звуки громче -15дБ в фильме отсутствуют - сравните с графиком ---
todo: add link). Но для фильма Fight Club увеличения громкости вообще
не произошло - таким образом
нужный эффект не был достигнут, но были внесены дополнительные
искажения (первые 10-15 минут происходили переходные процессы).<br>

<br>

&nbsp;&nbsp;&nbsp; Необходимо еще раз отметить, что для работы
однопроходной нормализации необходимо предварительное (начальное)
усиление - без повышения уровня однопроходная нормализация просто
бессмсленна. Также как и обычное усиление оно задается уровнем <b>Master</b>. Однако, если оно будет слишком сильным - с начала работы алгоритма падение громкости будет слишком заметным.<br>

<br>

<b>



Сжатие динамического диапазона</b><br>




<br>

&nbsp;&nbsp;&nbsp; Задумаемся над вопросом - а зачем нам поднимать
громкость? Для того, чтобы в чтобы слышать тихие звуки, которые не
слышны в наших условиях (например, если нельзя слушать громко, если
есть посторонние шумы в комнате и т.д.). А можно ли усилить тихие
звуки, а громкие не трогать? Оказывается можно. Эта техника называется
сжатием динамического диапазона (компрессия, Dynamic Range Compression,
DRC). Для этого необходимо изменять текущую громкость постоянно - тихие
звуки усиливать, громкие - нет. Самый простой закон изменения громкости
- линейный, т.е. громкость изменяется по закону output_loudness = k *
input_loudness, где k - коэффициент сжатия динамического диапазона:<br>

<br>

<div align="center"><img alt="" src="pic/drc_linear.png" height="405" width="388"><br>
</div>

<br>

&nbsp;&nbsp;&nbsp; При k = 1 никаких изменений не производится
(выходная громкость равна входной). При k
&lt; 1 громкость будет увеличиваться а динамический диапазон -
сужаться. Посмотрим на график (k=1/2) - громкость звука, имевшего
громкость -50дБ станет равной -25дБ, что значительно (на 25дБ) громче
оригинала, но при этом громкость диалогов (-27дБ) повысится всего лишь
на 13.5дБ, а громкость самых громких врывов (0дБ) вообще не изменится.
При k &gt; 1 -
уменьшаться, а динамический диапазон - увеличиваться. <br>

<br>

&nbsp;&nbsp;&nbsp; Посмотрим на
графики громкости (k = 1/2: сжатие ДД в два раза):<br>

<br>

<div align="center"><img alt="" src="pic/l_drc.png" height="402" width="400"><br>
</div>

<br>

&nbsp;&nbsp;&nbsp; Как видно в оригинале присутствовали как очень тихие
звуки, на 30дБ ниже уровня диалогов, так и очень громкие - на 30дБ выше
уровня диалогов. Т.о. динамический диапазон составлял 60дБ. После
компрессии громкие звуки всего лишь на 15дБ выше, а тихие - на 15дБ
ниже уровня диалогов (динамический диапазон теперь составляет 30дБ).
Таким образом громкие звуки стали значительно тише, а тихие -
значительно громче. При этом переполнения не происходит!<br>

<br>

&nbsp;&nbsp;&nbsp; Сначала, как всегда - обратимся к гистограммам:<br>

<br>

<div align="center"><img alt="" src="pic/h_drc.png" height="426" width="595"><br>
</div>


<br>

&nbsp;&nbsp;&nbsp; Как хорошо видно - при усилении до +30дБ форма
гистограммы хорошо сохраняется, что означает, что громкие звуки
остаются хорошо выраженными (не уходят в максимум и не обрезаются, как
это происходит на рис ....todo: add link). При этом выделяются тихие
звуки. Гистограмма это показывает плохо, однако разница очень заметна
на слух. Другой недостаток метода - те же самые скачки громкости.
Однако
механизм из возникновения отличается от скачков громкости возникающих
при обрезании а их характер совершенно отличен - они проявляются в
основном при очень сильном усилении тихих звуков (а не при обрезании
громких, как при обычном усилении). Кроме того сильное усиление тихих
звуков может привести к тому, что станут слышимы шумы записи. Поэтому в
фильтре применен немного модифицированный алгоритм, чтобы уровень шумов
поднимался меньше:<br>

<br>

<div align="center"><img alt="" src="pic/drc_bended.png" height="405" width="388"><br>
</div>

<br>

&nbsp;&nbsp;&nbsp; Т.е. на уровне -50дБ происходит перегиб передаточной
функции и шумы будут усиливаться меньше (желтая линия). При отсутствии
такого перегиба шумы будут значительно громче (серая линия). Такая
простая модификация значительно снижает количество шумов даже при очень
сильных уровнях сжатия (на рисунке - сжатие 1:5).<br>

<br>
<b>



Микширование и громкость<br>
</b>




<br>

&nbsp;&nbsp;&nbsp; Есть еще одна далеко неочевидная тонкость, которая
может сильно повлиять на громкость при проигрывании многоканальных
записей на стерео-системе (или в наушниках). Пусть мы имеем исходную
запись в формате 5.1. На выходе нам нужно получить 2 канала. В каждый
из выходных каналов микшируется один фронтальный канал, один тыловой,
канал LFE, и часть центрального канала:<br>

<br>

&nbsp;&nbsp;&nbsp; L' = L + 0.7*C + SL + LFE<br>

&nbsp;&nbsp;&nbsp; R' = R + 0.7*C + SR + LFE<br>

<br>

&nbsp;&nbsp;&nbsp; Допустим, что по всем входным каналам сразу запущен
звук максимальной громкости (хотя это и не слишком вероятно). Тогда
амплитуда в выходном канале будет составлять 3.7, что на 11дБ выше
максимального уровня, т.е. произойдет сильнейшее переполнение. Чтобы
переполнения не допустить формулы микширования должны быть переписаны
следующим образом:<br>

<br>

&nbsp;&nbsp;&nbsp; L' = (L + 0.7*C + SL + LFE) / 3.7<br>


&nbsp;&nbsp;&nbsp; R' = (R + 0.7*C + SR + LFE) / 3.7<br>

<br>

&nbsp;&nbsp;&nbsp; Это нормализованное микширование (не путать с
нормализацией самой записи!) - переполнения гарантировано не
происходит. Однако, смикшированный таким образом звук на целых 11дБ
тише! Можно ли не проводить нормализацию? Можно. Однако в таком случае
возможно переполнение и соответствующие искажения. Переполнение
происходит только тогда, когда по всем входным каналам одновременно воспроизводится
громкий звук. Это не характерно для фильмов (обычно тыловые каналы
заметно тише фронтальных, да и канал LFE далеко не всегда работает), но
характерно для многоканальных музыкальных записей. Поэтому для фильмов
можно оставить микширование ненормализованным, а для музыки
нормализацию лучше включать. (В фильтре за нормализацию микширования
отвечает опция <b>Normalize matrix</b>).<br>

<b><br>
Рекомендации.</b>
<br>

<br>

&nbsp;&nbsp;&nbsp; Рекомендации по настройке сильно зависят от
конкретных условий прослушивания и поставленной цели. Условно можно
разделить все условия на следующие категории:<br>

<br>

&nbsp;&nbsp;&nbsp; 1) Высококачественные домашние кинотеатры и хорошие
условия прослушивания - отсутствуют посторонние шумы (уличный шум,
соседи сверху, бегающие вокруг дети) и можно шуметь самим (отсутствие
тех же соседей :) ). Для этой категории всю пост-обработку можно
отключить (пресет standard).<br>

&nbsp;&nbsp;&nbsp; 2) Хорошая акустика, но наличие внешнего шума. Можно
применить небольшое усиление и небольшой уровень компрессии.<br>

&nbsp;&nbsp;&nbsp; 3) Нельзя шуметь самим (ночь, соседи/дети) или
посредственная акустика (дешевые наушники, слабые колонки).
Необходимо сильный уровень компрессии плюс повышение уровня или однопроходная нормализация.<br>

<br>

&nbsp;&nbsp;&nbsp; Наилучших результатов можно добиться только при
комбинировании всех методик. В данном разделе будет рассматриваться
только случай просмотра DVD-фильмов. Для других
случаев (музыка, MPEG4-фильмы и пр.) характеристики звука слишком
отличаются. Однако, освоив настройку фильтра для DVD-фильмов уже
несложно будет разобраться и с другими случаями.<br>

<br>

&nbsp;&nbsp;&nbsp; Усиление. Скачки громкости возникающие при
переполнении незаметны только в случае, когда обрезаемый звук намного
громче основного: в примере с телефоном звук телефона сравним по
громкости со звуком голоса, однако если вместо телефона будет
оглушительный взрыв звук голоса в любом случае будет неразличим.
Поэтому ограничение самых громких звуков допустимо и практически
незаметно. Очень громкими можно считать звуки от +15..+20дБ
относительно уровня диалогов. Таким образом, при уровне диалогов равном
-27дБ (де-факто для DVD) допустимый уровень усиления равен +7..+13дБ. В
качестве еще одного ориентира можно обратиться к графикам (todo: add
link): усиление до +10дБ не сильно сказывается на форме гистограммы, в
то время как при усиленни +20дБ ограниченным оказывается очень большое
количество звуков. Т.о. будем считать допустимым усиление до +10дБ. Его
можно держать в этом положении практически всегда - на тихих фильмах
это заметно поднимет громкость, а на громких - не будет сильно мешать.
(Еще раз отметим, что рассуждения приведены только для случая просмотра
DVD-фильмов - для музыки и большинства mpeg4-фильмов они неприменимы).<br>

<br>
&nbsp;&nbsp;&nbsp; Усиление также может применяться для ограничения
громкости сигнала (например, для прослушивания ночью). При уровне
диалогов равном -27дБ и усилении +17дБ уровень диалогов после усиления
будет составлять -10дБ, а самого громкого звука, как всегда, 0дБ, что
всего лишь на +10дБ выше уровня диалогов. Т.о. отрегулировав усиление
так, чтобы диалоги имели приемлемую громкость в 70дБ получим гарантию,
что самые громкие звуки не будут превышать 80дБ. (Хотя, конечно, в этом
случае будет применено ограничение сигнала).<br>
<br>

&nbsp;&nbsp;&nbsp; Компрессия. Границы применения компрессии определить
намного сложнее, поскольку слышимость дефектов компресси очень сильно
зависит от акустической системы. То же самое относится и к слышимости
шумов - на качественных системах усиление шумов как следствие
компрессии становится заметным сразу, а на других они незаметны даже
при очень сильной компрессии. Если подойти к вопросу с формальной точки
зрения то верхний предел применимости компресси можно оценить как
+20..+30дБ (см todo: add link). В этом случае громкие звуки еще
остаются выделенными по громкости от слабых. Таким образом уровень
компрессии подбирается только на слух - до тех пор пока не будет
достигнута необходимая громкость и дефекты будут оставаться незаметными.<br>
<br>
&nbsp;&nbsp;&nbsp; Необходимо учитывать, что компрессия и усидение
действуют одновременно, поэтому при уровне усиления +20дБ и компресии в
два раза (+25дБ) реальный уровень усиления будет составлять +10дБ.<br>

<br>

&nbsp;&nbsp;&nbsp; Однопроходная нормализация. Применима также
практически всегда. Для высококачественных систем с небольшим уровнем
усиления позволит уменьшить количество переполнений, а в остальных
случаях в комбинации с компрессией позволит добиться максимальной
громкости опять же с минимумом искажений по переполнению. Начальный уровень усиления
для нормализации выбирается исходя из целей - если большого усиления не
нужно - устанавливается желательное, а для достижения максимальной
громкости можно установить +20дБ.<br>

<br>




<br>





<h3><a name="theory_lfe"></a>7.2. Что такое LFE?</h3>












&nbsp;&nbsp;&nbsp; Первое, что необходимо отметить - <big style="font-weight: bold;">LFE это не то же самое, что сабвуфер</big>!
И то, что обозначение '5.1' в случае с AC3 это совсем не те же самые '5.1' акустической
системы. Поэтому начнем с рассмотрения этой разницы.<br>












<br>




&nbsp;&nbsp;&nbsp; Формат AC3 создавался для кинотеатров, а совсем
не
для компьютера. В кинотеатрах качественная акустика может вполне
адекватно воспроизвадить низкие частоты. LFE же был задуман как канал
для мощных
низкочастотных <i>эффектов</i>, то есть эффектов, с которыми обычная
акустика уже не может справиться. Чтобы стены тряслись, народ вопил от
ужаса, а слабонервные барышни падали в обморок. Таким образом <i>все</i>
каналы ac3-потока содержат низкие частоты, и только
иногда (в особо взрывоопасные моменты) в работу вступает канал LFE и
только для того, чтобы помочь основной акустике потрясать стены. Вполне
может случиться так, что канал LFE вообще не включится ни разу за весь
фильм. И это также будет нормальным.<br>












<br>
&nbsp;&nbsp;&nbsp; У компьютерной же акустики совсем другая специфика.
Большинство современной 5.1 акустики просто не в состоянии
воспроизвести НЧ через основные колонки (сателлиты) и
сабвуфер должен
полностью отвечать за их воспроизведение. Поэтому для таких систем
необходимо перенаправления басов со всех каналов на сабвуфер. Таким
образом если мы подключим 5.1 акустику, и
станем смотреть фильм со звуковой дорожкой формата 5.1, назначив канал
LFE на
сабвуфер (без перенаправления низких частот из основных каналов), то мы
рискуем не услышать низких частот вообще!<br>
<br>
&nbsp;&nbsp;&nbsp; Акустические системы с сабвуфером можно разделить на
несколько категорий. Во-первых, акустика может иметь сабвуфер, однако
не иметь отдельного входа для сабвуфера. В этом случае акустическая
система самостоятельно разделяет входной сигнал на НЧ-сигнал для
сабвуфера и сигнал для основных колонок. Для таких систем необходимо,
чтобы вся НЧ-информация уже содержалась в сигнале для основных колонок,
т.е. необходимо микшировать LFE канал во все основные каналы. Поэтому
выходной режим необходимо указывать <i>без</i> сабвуфера. (С точки
зрения операционной системы и звуковой карты сабвуфера у акустической
системы нет, т.к. акустика не имеет отдельного для него входа).<br>
<br>
&nbsp;&nbsp;&nbsp; Системы, где сабвуфер управляется отдельно можно
разделить на две категории:<br>
<ul>
  <li>Основные колонки не могут воспроизводить НЧ, поэтому за
воспроизведение НЧ отвечает только сабвуфер. В этом случае
перенаправление басов с основных каналов на сабвуфер необходимо!
Частоту среза для сабвуфера можно найти в документации на акустическую
систему.</li>
  <li>Основные колонки являются широкополосными и способны
воспроизводить НЧ самостоятельно, а сабвуфер выполняет только
вспомогательную роль. В этом случае перенаправление басов может быть не
обязятельно.</li>
</ul>













&nbsp;&nbsp;&nbsp; За более подробной информацией о роли канала LFE,
сабвуфера и управлением басами можно обратиться на сайт Dolby: <a href="http://www.dolby.com/tech/c.in.0011.LFE.pdf">http://www.dolby.com/tech/c.in.0011.LFE.pdf</a> (англ).<br>
<br>


<h3><a name="theory_dolby"></a>7.3. Dolby или не Dolby?</h3>

&nbsp;&nbsp;&nbsp; Очень часто возникает путаница с различными
обозначениями Dolby. В этом разделе будет кратко изложено, что все это
означает.<br>

<br>

7.3.1. Dolby Surround.<br>
<br>

7.3.2. Dolby ProLogic.<br>

7.3.3. Dolby Digital<br>

7.3.4. Не Dolby.<br>

&nbsp;&nbsp;&nbsp; Dolby - не единственная компания, которая занимается разработкой технологий окружающего звука. ......<br>

<br>
<h3><a name="theory_spdif"></a>7.4 SPDIF</h3>
<br>
<br>











<hr style="width: 100%; height: 2px;">
<h2><a name="troubleshooting"></a>8. Решение проблем.</h2>

&nbsp;&nbsp;&nbsp; Некторые из распространенных проблем перечислены
ниже. Если проблема не решилась, то для успешного ее разрешения<br>

<ul>

  <li><a href="#troubleshoot_no_center">










Не работает центральный и/или  тыловые каналы</a></li>
  <li><a href="#troubleshoot_channel_swap">



Каналы меняются местами</a></li>
  <li><a href="#troubleshoot_spdif_disabled">



Не работает SPDIF (фильтр отображает SPDIF (disabled))</a></li>
  <li><a href="#troubleshoot_spdif_decode">Не работает SPDIF (ресивер показывает PCM стерео).</a></li><li>Периодически пропадает звук в режиме SPDIF.<br>
  </li>

  <li><a href="#troubleshoot_bug_report">Сбор сведений для баг-репорта.</a></li>
</ul>

<br>
<b><a name="troubleshoot_no_center"></a>8.1. Не работает центральный и/или  тыловые каналы.</b><br>
<br>

&nbsp;&nbsp;&nbsp; Проверить настройки в Панели управления: <b>Control Panel-&gt;Sounds and 
Multimedia-&gt;Audio-&gt;Sound Playback-&gt;Advanced</b>.
Проверить настройки колонок в утилите, поставляемой с драйверами
звуковой карты (если такая утилита есть). Выключить все эквалайзеры и
эффекты в настройках звуковой карты (если есть). <small>(Последнее особенно относится к звуковым картам Creative - этот баг наблюдается практически на всей линейке звуковых карт).</small> Для BSPlayer'а выключить встроенный эквалайзер и Dedynamic фильтр.<br>
<b><br>
<a name="troubleshoot_channel_swap"></a>8.2. Каналы меняются местами.</b><br>

<br>

&nbsp;&nbsp;&nbsp; Использовать конфигурацию каналов с четным числом колонок (сабвуфер учитывается).<br>

<b><br>
<a name="troubleshoot_spdif_disabled"></a>8.3. Не работает SPDIF  (фильтр отображает SPDIF (disabled)).</b><br>

<br>

&nbsp;&nbsp;&nbsp; Статус SPDIF (disabled) означает, что устройство
вывода отказывается принимать SPDIF-формат. Некоторые распространенные
случаи:<br>

<ul>

  <li>USB-Audio устройства. К сожалению, текущая версия фильтра не поддерживает SPDIF для большинства подобных устройств :-(.<br>
  </li>
  <li>Стандартом SPDIF предусмотрены следующие частоты дискретизации:
32000Гц, 44100Гц, 48000Гц. Если звук имеет другую частоту
дискретизации, то он не может быть передан по цифровому соединению.
Звуковые карты Creative (и, возможно, некоторые другие) могут
передавать поток с частотой дискретизации <b>только</b> 48000Гц,
поэтому достаточно распространенный формат 44100Гц ими не
поддерживается. Посмотреть частоту дискретизации для текущего потока
можно в настройках фильтра, страница Main, раздел Decoder info: <br>
    <img alt="" src="pic/dlg_input.png" height="215" width="210"></li>
</ul>

<br>

<b><a name="troubleshoot_spdif_decode"></a>8.4. Не работает SPDIF (ресивер показывает PCM стерео)</b><br>

<br>&nbsp;&nbsp;&nbsp; Проверить, включен ли режим цифрового выхода в настройках.<br>
&nbsp;&nbsp;&nbsp; Выключить опцию декодирования AC3 в настройках звуковой карты.<br>

<b><br>
<a name="troubleshoot_bug_report"></a>8.7. Сбор сведений для баг-репорта.</b><br>

<ul>

  <li>Краткое описание сути проблемы. Например, фильтр не работает
вообще, искажает звук, не включается SPDIF, пропускает звук, возникают
щелчки, звук отстает от видео, проблемы при перемотке, дрожит
изображение и т.д.</li>
  <li>Насколько регулярно проблема проявляется - на всех фильмах или на
некоторых, всегда или время от времени, на всех плеерах или только на
конкретных.</li><li>Проявляется ли проблема в обычном стерео-режиме и без SPDIF?<br>
  </li>

  <li>Подробное описание действий для воспроизведения проблемы - так,
чтобы повторив эти действия можно было бы повторить проблемную ситуацию
- что запускалось, при каких настройках, что и где надо нажимать, чтобы
проблема проявилась.</li>
  <li>Версия Windows, установленные сервис-паки, версия DirectX.</li>
  <li>Звуковая карта. Что подключено к звуковой карте -
колонки/усилитель/ресивер/..., количество колонок, аналоговое/цифровое
подключение.</li>
  <li>Используемый плеер, и (желательно) линк, где его можно скачать.</li>
  <li>Ветка реестра <b>[HKEY_CURRENT_USER\Software\AC3Filter]</b>. Для того, чтобы ее получить:</li>
  <ul>
    <li>Запустить Regedit: Start-&gt;Run-&gt;regedit [enter]</li>
    <li>Установить курсор не ветку реестра <b>[HKEY_CURRENT_USER\Software\AC3Filter]</b>.</li>
    <li>Записать ее в файл: меню File-&gt;Export Registry File.</li>
    <li>Прикреписть полученный файл к письму.</li>
  </ul>
  <li>Запустить \Program Files\Windows Media Player\mplayer2.exe, затем:</li>
  <ul>
    <li>Открыть проблемный файл</li>
    <li>Меню File-&gt;Properties-&gt;Advanced - появится список используемых фильтров. Перечислить их.</li>
    <li>Если в списке есть AC3Filter двойным щелчком открыть окно его свойств.</li>
    <li>Есть ли активность в окне настроек фильтра?</li>
    <li>Какой стоит выходной формат? (раздел Output)</li>
    <li>Какой стоит входной формат? (раздел Decoder info)</li>
    <li>Скопировать содержимое текстового окошка в разделе Decoder Info.</li>
    <li>В нижнем правом углу в строке копирайта указана версия фильтра.<br>
    </li>
  </ul>
</ul>





<br>




<br>










<hr style="width: 100%; height: 2px;">
<h2><a name="tech"></a>9. Технические подробности</h2>










<b><br>
<a name="tech_module"></a>





9.1. Бинарный модуль</b>



<br>










<br>
&nbsp;&nbsp;&nbsp; Все функции фильтра являются встренными, фильтр не
использует никаких внешних декодеров или библиотек (за исключением
стандартных). Фильтр не обращается ни к каким внешним файлам. Все
сопроводительные файлы поставляемые в комплекте не являются
обязательными и поставляются только для удобства использования, для работы фильтра необходим только основной модуль <span style="font-weight: bold;">ac3filter.ax</span>. При инсталляции фильтр регистрируется в реестре стандартным способом. <br>

<br>
Регистрация фильтра из командной строки:<br>

<b>&gt; regsvr32ac3filter.ax</b><br>

<br>
Дерегистрация фильтра из командной строки:<br>


<b>&gt; regsvr32 /u ac3filter.ax</b><br>

<br>
Модуль экспортирует функцию 'config', которую также
можно использовать для конфигурации фильтра, например, из командной
строки:<br>

<b>&gt; rundll32 ac3filter.ax,config</b><br>
<br>
<b>Внутренняя кухня:</b><br>
<br>
<div align="center"><img alt="" src="pic/data_flow.gif" height="676" width="486"><br>
</div>
<span style="font-weight: bold;"><br>
Примеры:</span><br>











<b><br>
</b>&nbsp;&nbsp;&nbsp; 1) При просмотре DVD со звуком в формате DTS и
если внешний декодер поддерживает этот формат (опция <span style="font-weight: bold;">DTS passthrough</span> включена) звук будет
передаваться следующим образом (в скобках указан формат потока):<br>












<br>












&nbsp;&nbsp;&nbsp; <span style="text-decoration: underline;">DVD
(MPEG2/DTS) -&gt; AC3Filter [passthrough] -&gt; (SPDIF/DTS) -&gt; звуковая карта
-&gt; (SPDIF/DTS) -&gt; аппаратный декодер -&gt; (аналоговый сигнал) -&gt; колонки</span><br>












<br>












&nbsp;&nbsp;&nbsp; При этом фильтр не производит никаких изменений,
кроме форматирования потока для передачи по SPDIF. <br>












<br>












&nbsp;&nbsp;&nbsp; 2) При просмотре DVD со звуком в формате DTS и
если внешний декодер поддерживает только формат AC3 (опция <span style="font-weight: bold;">DTS
passthrough</span> отключена), то
преобразования будут следующими:<br>












<br>












&nbsp;&nbsp;&nbsp; <span style="text-decoration: underline;">DVD
(MPEG2/DTS) -&gt; AC3Filter </span><span style="text-decoration: underline;">[AC3 encode]</span><span style="text-decoration: underline;">-&gt; (SPDIF/AC3) -&gt; звуковая карта
-&gt; (SPDIF/AC3) -&gt; </span><span style="text-decoration: underline;">ресивер</span><span style="text-decoration: underline;"> -&gt; (аналоговый сигнал) -&gt; колонки</span><br>












<br>












&nbsp;&nbsp;&nbsp; При этом фильтр будет осуществлять следующие
преобразования:<br>












<br>












&nbsp;&nbsp;&nbsp; <span style="text-decoration: underline;">вход
(DTS) -&gt; декодирование DTS -&gt; (PCM float) -&gt; обработка -&gt;
(PCM float) -&gt; кодирование в AC3 -&gt; (AC3) -&gt; форматирование
в формат SPDIF -&gt; (SPDIF/AC3) -&gt; выход</span><br>












<br>












&nbsp;&nbsp;&nbsp; 3) В случае AAC или OGG Vorbis (опция <span style="font-weight: bold;">Use AC3Filter for PCM</span> включена) звук
будет передаваться следующим образом:<br>












<br>












&nbsp;&nbsp;&nbsp; <span style="text-decoration: underline;">OGG
(Vorbis) -&gt; Vorbis декодер -&gt; (PCM) -&gt; AC3Filter [AC3 encode] -&gt; (SPDIF/AC3) -&gt;
звуковая карта (SPDIF/AC3) -&gt; </span><span style="text-decoration: underline;">ресивер -&gt;</span><span style="text-decoration: underline;"> (аналоговый сигнал)
-&gt; колонки</span><br>












<br>












&nbsp;&nbsp;&nbsp; При этом фильтр будет осуществлять следующие
преобразования:<br>












<br>












&nbsp;&nbsp;&nbsp; <span style="text-decoration: underline;">вход
(PCM) -&gt; обработка -&gt; (PCM float) -&gt; кодирование
в AC3 -&gt; (AC3) -&gt; форматирование в формат SPDIF -&gt; (SPDIF/AC3) -&gt; выход</span><br>












<br>











&nbsp;&nbsp;&nbsp; 4) В случае если цифровая передача невозможна:<br>











<br>












&nbsp;&nbsp;&nbsp; <u>Movie (любой формат) -&gt;<span style="text-decoration: underline;"> AC3Filter [SPDIF disabled] -&gt; (PCM </span><span style="text-decoration: underline;">multichannel</span><span style="text-decoration: underline;">) -&gt; звуковая карта
-&gt; (SPDIF/PCM stereo) -&gt; ресивер -&gt; (аналоговый сигнал) -&gt; колонки</span></u><br>











<br>
<br>
<b><a name="tech_ac3_dec"></a>





AC3 - декодер.</b><br>












<br>












&nbsp;&nbsp;&nbsp; Изначально основан на библиотеке LibA52 (<a href="http://liba52.sourceforge.net/">http://liba52.sourceforge.net</a>),
однако практически полностью переписан, откомментирован и дополнен.
Постоянно осуществляется контроль качества, используя на LibA52 как
референсный декодер. При стандартных настройках (пресет standard) и
корректном входном файле качество полностью совпадает с LibA52.<br>











<b><br>
<a name="tech_ac3_enc"></a>





AC3 - кодер.</b>



<br>












<br>












&nbsp;&nbsp;&nbsp; Изначально основан на AC3 кодере из проекта FFMPEG (<a href="http://ffmpeg.sourceforge.net/">http://ffmpeg.sourceforge.net</a>),
полностью переписан и оптимизирован (на данный момент работает даже
быстрее декодера :). Качество кодирования осталось на уровне FFMPEG, и
оставляет желать лучшего (не дотягивает даже до базового кодера,
описанного в стандарте). Главная проблема - не релизован channel
coupling.<br>












<b><br>
<a name="tech_dts"></a>





DTS - декодер.</b>



<br>












<br>












&nbsp;&nbsp;&nbsp; Полностью основан на LibDTS. Немного оптимизирован.<br>












<b><br>
<a name="tech_mpa"></a>





MPEG Audio - декодер</b>



<br>












<br>












&nbsp;&nbsp;&nbsp; Основан на ISO-декодере. Полностью переписан и
сильно оптимизирован. Однако при этом сохранил полную совместимость с
референсным декодером (производится постоянный контроль качества).

<br>

<br>

<b>
<a name="tech_registry"></a>Реестр</b>



<br>











<br>











&nbsp;&nbsp;&nbsp; Фильтр сохраняет свои настройки в разделе реестра:
<i>[HKEY_CURRENT_USER\Software\AC3Filter]</i>. Названия параметров совпадают с перечисленными в <a href="#tech_settings">списке</a>. Все значения с плавающей точкой
сохраняются в реестре в виде значений 'REG_SZ'. Значения 'bool'
записываются в реестр как целые, нуль означает ложь, все прочие
значения - истина.<br>





<br>





&nbsp;&nbsp;&nbsp; При сохранении пресетов создаются подразделы в разделе <i>[HKEY_CURRENT_USER\Software\AC3Filter\presets]</i> с именем совпадающим с именем пресета. При записи матрицы создаются подразделы в разделе <i>[HKEY_CURRENT_USER\Software\AC3Filter\matrix]</i>. <br>





<span style="font-weight: bold;"></span><br>





&nbsp;&nbsp;&nbsp; При загрузке пресета изменяются только те параметры,
которые указаны в реестре, остальные остаются без изменений. Т.е.
возможно создавать пресеты, изменяющие только отдельные параметры и не
меняющие остальные.<br>




<br>

&nbsp;&nbsp;&nbsp; При изменении устройства вывода по умолчанию модифицируются следующие ветки реестра:<br>
<br>

Для Windows 9x:<br>

<i>[HKEY_CLASSES_ROOT\CLSID\{E0F158E1-CB04-11d0-BD4E-00A0C911CE86}\InstanceCm\Default DirectSound Device]<br>

[HKEY_CLASSES_ROOT\CLSID\{E0F158E1-CB04-11d0-BD4E-00A0C911CE86}\InstanceCm\Default WaveOut Device]<b><br>
</b></i><br>

Для Windows 2000/XP:<i><br>
[HKEY_CURRENT_USER\Software\Microsoft\ActiveMovie\devenum\{E0F158E1-CB04-11D0-BD4E-00A0C911CE86}\Default DirectSound Device]<br>

[HKEY_CURRENT_USER\Software\Microsoft\ActiveMovie\devenum\{E0F158E1-CB04-11D0-BD4E-00A0C911CE86}\Default WaveOut Device]</i>
<b><br>
<br>
<a name="tech_settings"></a>




Список настроек фильтра.</b>



<br>




<br>




&nbsp;&nbsp;&nbsp; Как часть имени некоторых параметров используются следующие сокращения имен каналов:<br>












<br>












<table align="center" border="1" cellpadding="2" cellspacing="2">





<tbody>

  <tr align="center" valign="top">
    <td><b>Сокращение</b></td>
    <td><b>Значение</b></td>
  </tr>

  <tr align="center" valign="top">
    <td>L</td>
    <td align="left">Передний левый</td>
  </tr>

  <tr align="center" valign="top">
    <td>C</td>
    <td align="left">Центральный</td>
  </tr>

  <tr align="center" valign="top">
    <td>R</td>
    <td align="left">Передний правый</td>
  </tr>

  <tr align="center" valign="top">
    <td>SL</td>
    <td align="left">Левый тыл</td>
  </tr>

  <tr align="center" valign="top">
    <td>SR</td>
    <td align="left">Правый тыл</td>
  </tr>

  <tr align="center" valign="top">
    <td>LFE</td>
    <td align="left">Канал LFE или cабвуфер</td>
  </tr>
</tbody>
</table>






<br>




&nbsp;&nbsp;&nbsp; Все уровни указываются в виде коэффициентов (не в децибелах!). Битовые маски и перечисления имеют тип целого.<br>




<br>









<table align="center" border="1" cellpadding="2" cellspacing="2" width="80%">







<tbody>
  <tr>
    <td align="center"><b>Параметр</b></td>
    <td align="center"><b>Тип</b></td>
    <td valign="top"><br>
      </td>
<td align="center"><b>Описание</b></td>
  </tr>

  <tr>
    <td><b>Output format</b></td>
    <td><br>
</td>
    <td valign="top"><br>
      </td>
<td><br>
</td>
  </tr>

  

  <tr>
    <td style="vertical-align: top;">mask</td>
      <td style="vertical-align: top;">bitmask<br>
      </td>
      <td valign="top">Output (первый список выбора)<br>
      </td>
<td style="vertical-align: top;">Битовая маска выходных каналов. Однозначно определяет конфигурацию АС:<br>
      <table style="margin-left: auto; margin-right: auto; text-align: left;" border="1" cellpadding="2" cellspacing="2">
        <tbody>
          <tr>
            <td style="vertical-align: top; text-align: center; font-weight: bold;">Канал<br>
            </td>
            <td style="vertical-align: top; text-align: center; font-weight: bold;">Маска<br>
            </td>
          </tr>
          <tr>
            <td style="vertical-align: top; text-align: center;">L<br>
C<br>
R<br>
SL<br>
SR<br>
LFE<br>
            </td>
            <td style="vertical-align: top; text-align: center;">1<br>
2<br>
4<br>
8<br>
16<br>
32<br>
            </td>
          </tr>
        </tbody>
      </table>

      </td>
    </tr>
    <tr>
<td valign="top">format</td><td valign="top">enum</td><td valign="top">Оutput (второй список выбора)<br>
</td>
<td valign="top">Выходной формат сэмпла:<br>
      <table align="center" border="1" cellpadding="2" cellspacing="2"><tbody>
        <tr align="center">
          <td><b>Значение</b></td>
          <td><b>Режим</b></td>
        </tr>
        <tr align="center">
          <td>
            2<br>
            3<br>
            4<br>
            5<br>
          </td>
          <td>
            PCM 16bit<br>
            PCM 24bit<br>
            PCM 32bit<br>
            PCM float
          </td>
        </tr>
      </tbody></table>
    </td></tr>
<tr>
      <td style="vertical-align: top;">relation<br>
      </td>
      <td style="vertical-align: top;">enum<br>
      </td>
      <td valign="top">Output (первый список выбора)<br>
      </td>
<td style="vertical-align: top;">Маска каналов и формат сэмпла не
всегда могут однозначно определить формат. В некоторых случаях каналы
имеют определенную внутреннюю взаимосвязь, например, два стерео-канала
могут содержать сумму-разность каналов. В настощее время этот параметр
используется для обозначения долби-режимов:<br>
      <table align="center" border="1" cellpadding="2" cellspacing="2">
        <tbody>
          <tr>
            <td align="center" valign="top"><b>Значение<br>
            </b></td>
            <td align="center" valign="top"><b>Режим<br>
            </b></td>
          </tr>
          <tr>
            <td align="center" valign="top">0<br>
1<br>
2<br>
            </td>
            <td align="left" valign="top">-<br>
Dolby Surround/ProLogic<br>
Dolby ProLogic 2<br>
            </td>
          </tr>
        </tbody>
      </table>

      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">spdif<br>
      </td>
      <td style="vertical-align: top;">bool<br>
      </td>
      <td valign="top">SPDIF<br>
      </td>
<td style="vertical-align: top;">Включение режима цифрового выхода.<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><span style="font-weight: bold;">Formats</span><br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
      <td valign="top"><br>
      </td>
<td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">spdif_pt<br>
      </td>
      <td style="vertical-align: top;">bitmask<br>
      </td>
      <td valign="top">SPDIF passthrough<br>
      </td>
<td style="vertical-align: top;">Битовая маска форматов, поддерживаемых
декодером в режиме цифрового выхода. Поддерживаются форматы AC3, MPEG
Audio и DTS (см. параметр <b>formats</b>)<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">formats<br>
      </td>
      <td style="vertical-align: top;">bitmask<br>
      </td>
      <td valign="top">Use AC3Filter for...<br>
      </td>
<td style="vertical-align: top;">Битовая маска форматов, поддерживаемых фильтром:<br>
      <table align="center" border="1" cellpadding="2" cellspacing="2">
        <tbody>
          <tr>
            <td align="center" valign="top"><b>Маска<br>
            </b></td>
            <td align="center" valign="top"><b>Формат<br>
            </b></td>
          </tr>
          <tr>
            <td align="center" valign="top">4<br>
8<br>
16<br>
32<br>
1024<br>
2048<br>
4096<br>
8192<br>
16384<br>
            </td>
            <td valign="top">PCM16<br>
PCM24<br>
PCM32<br>
PCM Float<br>
MPEG1/2 PES<br>
SPDIF<br>
AC3<br>
MPEG Audio<br>
DTS<br>
            </td>
          </tr>
        </tbody>
      </table>

      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><span style="font-weight: bold;">AGC</span><br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
      <td valign="top"><br>
      </td>
<td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">auto_gain<br>
      </td>
      <td style="vertical-align: top;">bool<br>
      </td>
      <td valign="top">Auto gain<br>
      </td>
<td style="vertical-align: top;">Автоматическая регулировка усиления<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">normalize<br>
      </td>
      <td style="vertical-align: top;">bool<br>
      </td>
      <td valign="top">One-pass norm<br>
      </td>
<td style="vertical-align: top;">Однопроходная нормализация<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><span style="font-weight: bold;">Matrix options</span><br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
      <td valign="top"><br>
      </td>
<td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">auto_matrix<br>
      </td>
      <td style="vertical-align: top;">bool<br>
      </td>
      <td valign="top">Auto matrix<br>
      </td>
<td style="vertical-align: top;">Автоматический рассчет матрицы<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">normalize_matrix<br>
      </td>
      <td style="vertical-align: top;">bool<br>
      </td>
      <td valign="top">Normalize matrix<br>
      </td>
<td style="vertical-align: top;">Нормализация матрицы<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">voice_control<br>
      </td>
      <td style="vertical-align: top;">bool<br>
      </td>
      <td valign="top">Voice control<br>
      </td>
<td style="vertical-align: top;">Управление центральным каналом или вируальным центром<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">expand_stereo<br>
      </td>
      <td style="vertical-align: top;">bool<br>
      </td>
      <td valign="top">Expand stereo<br>
      </td>
<td style="vertical-align: top;">Расширение стереобазы<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><span style="font-weight: bold;">Gains</span><br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
      <td valign="top"><br>
      </td>
<td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">master<br>
      </td>
      <td style="vertical-align: top;">float<br>
      </td>
      <td valign="top">Master gain<br>
      </td>
<td style="vertical-align: top;">Общий уровень усиления<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">clev<br>
      </td>
      <td style="vertical-align: top;">float
      </td>
      <td valign="top">Center gain<br>
      </td>
<td style="vertical-align: top;">Уровень усиления центра (параметр для рассчета матрицы)<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">slev<br>
      </td>
      <td style="vertical-align: top;">float
      </td>
      <td valign="top">Surround gain<br>
      </td>
<td style="vertical-align: top;">Уровень усиления тыла (параметр для рассчета матрицы)<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">lfelev<br>
      </td>
      <td style="vertical-align: top;">float
      </td>
      <td valign="top">LFE gain<br>
      </td>
<td style="vertical-align: top;">Уровень усиления канала LFE (параметр для рассчета матрицы)<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">input_gain_{ch}<br>
      </td>
      <td style="vertical-align: top;">float
      </td>
      <td valign="top">Input gains<br>
      </td>
<td style="vertical-align: top;">Уровни усиления входных каналов<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">output_gain_{ch}<br>
      </td>
      <td style="vertical-align: top;">float
      </td>
      <td valign="top">Output gains<br>
      </td>
<td style="vertical-align: top;">Уровни усиления выходных каналов<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><span style="font-weight: bold;">Matrix</span><br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
      <td valign="top"><br>
      </td>
<td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">matrix_{ch}_{ch}<br>
      </td>
      <td style="vertical-align: top;">float
      </td>
      <td valign="top">Matrix<br>
      </td>
<td style="vertical-align: top;">Матрица микширования. Задается в виде набора коэффициентов микширования из канала, указанного первым в канал, указанный вторым.<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><span style="font-weight: bold;">DRC</span><br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
      <td valign="top"><br>
      </td>
<td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">drc<br>
      </td>
      <td style="vertical-align: top;">bool<br>
      </td>
      <td valign="top">DRC Enable checkbox<br>
      </td>
<td style="vertical-align: top;">Включение сжатия динамического диапазона<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">drc_power<br>
      </td>
      <td style="vertical-align: top;">float
      </td>
      <td valign="top">DRC gain<br>
      </td>
<td style="vertical-align: top;">Уровень сжатия динамического диапазона<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><span style="font-weight: bold;">Bass redirection</span><br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
      <td valign="top"><br>
      </td>
<td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">bass_redir<br>
      </td>
      <td style="vertical-align: top;">bool<br>
      </td>
      <td valign="top">Bass redir<br>
      </td>
<td style="vertical-align: top;">Перенаправление басов<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">bass_freq<br>
      </td>
      <td style="vertical-align: top;">int<br>
      </td>
      <td valign="top">Bass redir edit box<br>
      </td>
<td style="vertical-align: top;">Частота среза для перенаправления басов<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><span style="font-weight: bold;">Delays</span><br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
      <td valign="top"><br>
      </td>
<td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">delay<br>
      </td>
      <td style="vertical-align: top;">bool<br>
      </td>
      <td valign="top">Delay checkbox<br>
      </td>
<td style="vertical-align: top;">Включение задержек<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">delay_units<br>
      </td>
      <td style="vertical-align: top;">enum<br>
      </td>
      <td valign="top">Delay drop-down<br>
      </td>
<td style="vertical-align: top;">Единицы измерения для значений задержек:<br>

      
        
          
      <table style="margin-left: auto; margin-right: auto; text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody><tr>
            <td style="vertical-align: top; text-align: center; font-weight: bold;">Значение<br>
            </td>
            <td style="vertical-align: top; text-align: center; font-weight: bold;">Единицы<br>
            </td>
          </tr>
          <tr>
            <td style="vertical-align: top; text-align: center;">0<br>
1<br>
2<br>
3<br>
4<br>
5<br>
            </td>
            <td style="vertical-align: top; text-align: left;">сэмплы<br>
миллисекунды<br>
метры<br>
сантиметры<br>
футы<br>
дюймы</td></tr></tbody>
      </table>
</td>
    </tr>
    <tr>
      <td style="vertical-align: top;">delay_{ch}<br>
      </td>
      <td style="vertical-align: top;">float<br>
      </td>
      <td valign="top">Delays edit boxes</td>
<td style="vertical-align: top;">Значения задержек<br>
      </td>
    </tr>
    <tr>
      <td valign="top"><b>Other</b><br>
      </td>
      <td valign="top"><br>
      </td>
      <td valign="top"><br>
      </td>
      <td valign="top"><br>
      </td>
    </tr>
    <tr>
      <td valign="top">refresh<br>
      </td>
      <td valign="top">int<br>
      </td>
      <td valign="top"><br>
      </td>
      <td valign="top">Частота обновления интерфейса в мс.<br>
      </td>
    </tr>
    <tr>
<td style="vertical-align: top;">time_shift<br>
      </td><td style="vertical-align: top;">float<br>
      </td><td valign="top">Time shift<br>
</td>
<td style="vertical-align: top;">Глобальная задержка для синхронизации аудио и видео.<br>
      </td></tr>

    
  </tbody>
</table>










<br>

<br>

<br>










<hr size="2" width="100%">
<h2><b><a name="misc"></a>Разное.</b><br>

</h2>










&nbsp;&nbsp;&nbsp; Фильтр был основан на OpenSource библиотеке LibA/52 (<a href="http://liba52.sourceforge.net/">http://liba52.sourceforge.net</a>)
и во многом наследует его свойства. Многое было переписано, но основные
положительные свойства я старался сохранить. Можно отметить очень
высокое качество этой библиотеки, и весьма последовательное следование
стандарту (<a class="moz-txt-link-freetext" href="http://www.atsc.org/standards/a_52a.pdf">http://www.atsc.org/standards/a_52a.pdf</a>).
Благодарности Aaron Holtzman и Michel Lespinasse.<br>










&nbsp;&nbsp;&nbsp; <br>










&nbsp;&nbsp;&nbsp; Хочу отдельно поблагодарить Марселло Мота (Marcello
Mota) за моральную поддержку и огромную помощь в тяжком деле
тестирования и отладки.<br>










&nbsp;&nbsp;&nbsp; Огромная благодарность Gabest за поддержку
проигрывания DVD.<br>










&nbsp;&nbsp;&nbsp; Fank'у (форум doom9) за матрицу микширования Dolby
ProLogic II.<br>










&nbsp;&nbsp;&nbsp; Valery Shabaev за скрипт инсталлятора.<br>










&nbsp;&nbsp;&nbsp; Участникам формумов Doom9 и iXBT, а также из
создателям.<br>










&nbsp;&nbsp;&nbsp; А также всем остальным, без чьей помощи этот проект
не был бы таким какой он есть.<br>










<br>










<hr size="2" width="100%">
<h2><a name="distribution"></a>Условия распространения.</h2>










&nbsp;&nbsp;&nbsp; Даный программный продукт распространяется под
лицензией GNU General Public License v2, текст которой прилагается в
файле GNU_eng.txt - на английском языке и GNU_rus.txt - на русском
языке. Вариант на русском языке прилагается только в справочных целях,
поэтому при всех возможных разночтениях приоритет имеет версия на
английском языке. <br>










<font color="#000000"><br>
</font>&nbsp;&nbsp;&nbsp; Данный программный продукт может быть
использован только в демонстрационных целях и в целях обучения. Любое
использование помимо этих целей может быть запрещено в некоторых
странах. Этот программный продукт может распространяться свободно, за
исключением случаев, запрещенных законом.<br>










<br>










<font color="#000000">&nbsp;&nbsp;&nbsp; Даный программный продукт
распространяется исключительно в надежде, что он будет полезен, однако </font><font color="#000000"><b>безо всяких гарантий</b> работы на конкретном
оборудовании, соответствия каким-либо условиям, стандартам или нуждам.
Я </font><font color="#000000"><b>не</b> обязуюсь обеспечивать
круглосуточную (и вообще, какую либо) поддержку, исправление ошибок,
восстановление потерянных из-за работы программы данных, отвечать за
испорченное железо, а также за потерянное рабочее вермя. Я не несу
ответственности за легальность воспроизводимой при помощи данной
программы мультимедиа-продукции.<br>
<br>
&nbsp;&nbsp;&nbsp; </font><font color="#000000">Даный программный
продукт
может распространяться в виде инсталляционного пакета ($download_bin)
на CD-сборниках или вместе с другими программами. Разрешение автора на
это не требуется. Для кодек-паков допустимо распространение фильтра в
виде отдельного модуля.</font><br>










<br>










&nbsp;&nbsp;&nbsp; Данная документация является частью проекта и может распространяться на аналогичных условиях.<br>

<br>










<hr style="width: 100%; height: 2px;">
<h2><a name="author"></a>Связь с автором.</h2>










<br>










<hr size="2" width="100%">
<h2><a name="changelog"></a>Changelog.</h2>










<tt>$changelog</tt><br>










<br>










<br>










<hr size="2" width="100%">
<h2><a name="links"></a>Полезные ссылки.<br>
</h2>










Сайт AC3Filter (<i>rus+eng</i>): (<a href="http://xvalex.hotbox.ru/programs/ac3filter">http://xvalex.hotbox.ru/programs/ac3filter</a>)<br>










Сайт AC3Filter (<i>rus+eng</i>): (<a href="http://ac3filter.sourceforge.net/">http://ac3filter.sourceforge.net</a>)<br>










Сайт AC3 декодера для Winamp (<i>rus+eng</i>): (<a href="http://xvalex.hotbox.ru/programs/winampac3">http://xvalex.hotbox.ru/programs/winampac3</a>)<br>










Сайт AC3 декодера для Winamp (<i>rus+eng</i>): (<a href="http://winampac3.sourceforge.net/">http://winampac3.sourceforge.net</a>)<br>










<br>










Стандарт A/52a (AC3) (<i>eng</i>): (<a class="moz-txt-link-freetext" href="http://www.atsc.org/standards/a_52a.pdf">http://www.atsc.org/standards/a_52a.pdf</a>).<br>










Разъяснения Dolby по поводу LFE (eng): (<a href="http://www.dolby.com/tech/c.in.0011.LFE.pdf">http://www.dolby.com/tech/c.in.0011.LFE.pdf</a>)<br>










Библиотека LibA52 (бывший ac3dec) (<i>eng</i>): (<a href="http://liba52.sourceforge.net/">http://liba52.sourceforge.net</a>).<br>










Многоканальное воспроизведение под Windows (<i>eng</i>): (<a href="http://www.microsoft.com/hwdev/tech/audio/multichaudP.asp">http://www.microsoft.com/hwdev/tech/audio/multichaudP.asp</a>)<br>










Просто полезный сайт по видео (<i>eng</i>): (<a href="http://www.doom9.org">http://www.doom9.org</a>).<br>










<br>










<hr size="2" width="100%">
<table border="0" cellpadding="0" cellspacing="0" width="100%">










  <tbody>
    <tr>
      <td valign="top"><i><small>
        Copyright (c) 2002-2004 by 
        <script language="JavaScript"><!--
        function h979(){var et8="@"; et8=et8+"ma"; et8="alex%20%3Cxvalex"+et8; et8=et8+"il.ru%3E"; et8="V"+et8; return et8}; function ge(){var d6y="sky"; d6y="Alexander Vigov"+d6y; return d6y}; function xq2nz(){return "?Subject=AC3Filter"}; function df(){status="mailto:"+h979()+xq2nz()}; function i5p0f(){status=""}; function nbx8v(){this.location="mailto:"+h979()+xq2nz(); return false}; document.write("<a href='mailto:[antispam_protected]' onMouseOver='df()' onMouseLeave='i5p0f()' onClick='return nbx8v()'>"+ge()+"</a>");
        //--></script><noscript>Alexander Vigovsky</noscript>
      </small></i></td>
      <td align="right" valign="top"><i><small> Last updated $date</small></i></td>
    </tr>
  </tbody>
</table>










</body></html>