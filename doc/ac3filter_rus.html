<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html><head><title>AC3Filter</title>
  
  <meta http-equiv="content-type" content="text/html; charset=windows-1251"></head><body>
<table width="100%">
  <tbody>
    <tr>
      <td>
      <h1><b>AC3Filter</b><small><i> ver $ver</i></small></h1>
      </td>
      <td style="text-align: right;"><a href="http://sourceforge.net"><img src="http://sourceforge.net/sflogo.php?group_id=66022&amp;type=5" width="210" height="62" border="0" alt="SourceForge Logo"></a></td>
    </tr>
  </tbody>
</table>
<table cellpadding="2" cellspacing="2" border="0">
  <tbody>
    <tr>
      <td><a href="ac3filter_eng.html"><img src="pic/flag_eng.gif" width="24" height="18" border="0" align="middle">English</a>&nbsp;&nbsp;</td>
      <td><img src="pic/flag_rus.gif" width="24" height="18" border="0" align="middle"><b>Russian</b>&nbsp;&nbsp;</td>
      <td><a href="ac3filter_ita.html"><img src="pic/flag_ita.gif" width="24" height="18" border="0" align="middle">Italian</a>&nbsp;&nbsp;</td>
    </tr>
  </tbody>
</table>
<table cellpadding="2" cellspacing="2" border="0" width="100%">
  <tbody>
    <tr>
      <td valign="top"><a href="$download_bin">Download</a></td>
      <td valign="top"><a href="http://sourceforge.net/projects/ac3filter">Sourceforge project</a></td>
      <td valign="top"><a href="http://sourceforge.net/forum/?group_id=66022">Project forum</a></td>
      <td valign="top"><a href="http://xvalex.hotbox.ru">Author's
homepage</a></td>
    </tr>
  </tbody>
</table>
<hr width="100%" size="2"><br>
AC3Filter - это DirectShow фильтр для декодирования         AC3.
Возможность воспроизведения .AVI с аудио-треками в формате     AC3 и
MPEG2 (DVD). Распространяется     абсолютно бесплатно, то есть - даром
(FREEWARE, OpenSource).<br>
<br>
<h2>Основные особенности:</h2>
<ul>
  <li>Полная поддержка стандарта AC3.</li>
  <li>Поддержка S/P DIF passthrough.<br>
  </li>
  <li>Декодирование MPEG2 PES потоков.</li>
  <li>Поддержка многоканального вывода.</li>
  <li>Поддержка LFE.</li>
  <li>Поддержка сжатия динамического   диапазона      (Dynamic Range
Compression, DRC).</li>
  <li>Контроль переполнения и автоматическая регулировка  усиления.<br>
  </li>
  <li>Управление уровнями усиления  каналов.</li>
  <li>Информация о потоке (формат каналов,     битрейт, сэмпл-рейт,
частота объединения  и максимальная  частота).</li>
  <li>Индикация уровней каналов.</li>
  <li>Матричный микшер и возможность напрямую изменять матрицу
микширования (перенаправлять любой канал на любую колонку).</li>
  <li>Разложение стерео записи на 3-5 каналов.</li>
  <li>Микширование в DolbySurround/ProLogic/ProLogicII</li>
  <li>Задержки для каждого канала.<br>
  </li>
  <li>Эквалайзер.<br>
  </li>
</ul>
<br>
<hr width="100%" size="2">
<h2>Содержание</h2>
<ul>
  <li><a href="#download">Скачать.</a><br>
  </li>
  <li><a href="#install">Установка.</a></li>
  <li><a href="#uninstall">Удаление.</a></li>
  <li><a href="#system_setup">Настройка системы.</a></li>
  <ul>
    <li><a href="#w98">Windows 98</a></li>
    <li><a href="#w2k">Windows 2000</a><br>
    </li>
  </ul>
  <li><a href="#player_settings">Настройки плееров</a></li>
  <ul>
    <li><a href="#BSPlayer">BSPlayer</a></li>
    <li><a href="#ZoomPlayer">ZoomPlayer</a></li>
  </ul>
  <li><a href="#usage">Настройка фильтра</a></li>
  <ul>
    <li><a href="#main_settings">Основные настройки (Main)</a></li>
    <li><a href="#mixer">Настройки микшера (Mixer)</a></li>
    <li><a href="#equalizer">Эквалайзер и задержки (Equalizer)</a></li>
  </ul>
  <li><a href="#lfe">Что такое LFE?</a></li>
  <li><a href="#cookbook">Рецепты</a></li>
  <ul>
    <li><a href="#lfe_mix">Микшируем LFE</a></li>
    <li><a href="#swap_speakers">Меняем местами колонки</a></li>
    <li><a href="#max_loud">Максимальная громкость</a></li>
  </ul>
  <ul>
    <ul>
    </ul>
  </ul>
  <li><a href="#registry">Реестр и файлы конфигурации</a>.</li>
  <ul>
    <li><a href="#reg_presets">Пресеты</a></li>
    <li><a href="#reg_matrix">Матрицы микширования</a><br>
    </li>
  </ul>
  <li><a href="#misc">Разное</a></li>
  <li><a href="#distribution">Условия распространения.</a><br>
  </li>
  <li><a href="#author">Связь с автором.</a></li>
  <li><a href="#changelog">Changelog.</a></li>
  <li><a href="#links">Полезные ссылки</a><a href="#links">.</a><br>
  </li>
</ul>
<br>
<hr width="100%" size="2">
<h2><font color="#000000">Близкие проекты:</font></h2>
<font color="#ff0000"><font color="#000000">&nbsp;&nbsp;&nbsp; <a href="http://matrix-mixer.sourceforge.net/">MatrixMixer</a> - Позволяет
микшировать любой аудио источник в формат 5.1.<br>
&nbsp;&nbsp;&nbsp; <a href="http://winampac3.sourceforge.net/">WinampAC3</a>
- Мультиканальный ac3 деколер для Winamp.<br>
&nbsp;&nbsp;&nbsp; <a href="http://liba52.sourceforge.net/">LibA52</a>
- Кроссплатформенная библиотека декодирования ac3 (by Michel LESPINASSE).</font><br>
<br>
</font>
<hr width="100%" size="2">
<h2><a name="download"></a>Скачать.</h2>
Новые версии программы можно    найти  на сайте:<br>
<a href="http://ac3filter.sourceforge.net">http://ac3filter.sourceforge.net</a>
- домашняя страница<br>
<a href="http://sourceforge.net/projects/ac3filter">http://sourceforge.net/projects/ac3filter</a>
- страница проекта на Sourceforge - ошибки, пожелания...<br>
<a href="http://sourceforge.net/forum/?group_id=66022">http://sourceforge.net/forum/?group_id=66022</a>
- форум AC3Filter<br>
<br>
<br>
<b><b>Все версии:<br>
</b></b><a href="http://sourceforge.net/projects/ac3filter/">http://sourceforge.net/projects/ac3filter</a><br>
<b><b><br>
</b></b><b><b>ac3filter ver $ver<br>
</b></b><a href="http://prdownloads.sourceforge.net/ac3filter/ac3filter_0_69b.exe?download"></a><a href="$download_bin">$download_bin</a> - Инсталлятор<br>
<a href="$download_src">$download_src</a> - Исходники<br>
<b><b><br>
<br>
</b></b>
<hr width="100%" size="2">
<h2><b><a name="install"></a>Установка.</b></h2>
&nbsp;&nbsp;&nbsp; Просто запустить программу установки. <br>
<br>
&nbsp;&nbsp;&nbsp; Для нормальной работы фильтра все сопроводительные
файлы не являются обязательными и поставляются исключительно для
удобства использования. Единственный необходимый модуль - <b>ac3filter.ax</b>.
Сам модуль также является собственным модулем конфигурации для Панели
Управления. В W2K+ его можно прописать в ветке реестра '<b>HKLM\Software\Microsoft\Windows\CurrentVersion\Control
Panel\Cpls</b>'. Но для совместимости с W98 при установке он копируется
в системный каталог с расширением .cpl.<br>
<br>
<br>
<hr width="100%" size="2">
<h2><b><a name="uninstall"></a>Удаление.</b><br>
</h2>
&nbsp;&nbsp;&nbsp; Запустить программу удаления из меню Пуск или из
Панели Управления.<br>
<br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp; ! Все записанные настройки
матриц, эквалайзеров и т.д. будут удалены !</font><br>
<br>
&nbsp;&nbsp;&nbsp; Возможно, что фильтр был установлен вместе с
каким-либо кодек-паком. В этом случае проще всего удалить сам кодек-пак.
Если необходимо удалить фильтр отдельно, то это можно проделать вручную:<br>
<ul>
  <li>Найти файл ac3filter.ax.</li>
  <li>Дерегистрировать модуль из командной строки: &gt;regsvr32 /u
x:\some_dir\ac3filter.ax</li>
  <li>Найти и удалить файлы ac3filter.ax и ac3filter.cpl</li>
  <li>Удалить ключ реестра HKCU\Software\AC3Filter<br>
  </li>
</ul>
<br>
<hr width="100%" size="2">
<h2><a name="system_setup"></a>Настройка системы</h2>
&nbsp;&nbsp;&nbsp; Если установка прошла успешно то в большинстве
случаев фильтр немедленно готов к работе и в общем случае не требует
настроек (разве что изменить конфигурацию колонок). <br>
<br>
&nbsp;&nbsp;&nbsp; Наиболее совместимым является стерео режим. Он
должен работать на любой версии Windows и любой звуковой картой.<br>
<br>
&nbsp;&nbsp;&nbsp; Некоторые драйвера (Creative!) при переключении
режима колонок со стерео на многоканальные не изменяют настроек системы '<b>Control
Panel-&gt;Sounds and Multimedia-&gt;Audio-&gt;Sound
Playback-&gt;Advanced</b>'. Поэтому необходимо проверить эти настройки.<br>
<br>
&nbsp;&nbsp;&nbsp; Некоторые аудио фильтры не поддерживают (или
поддерживают некорректно) многоканальные режимы . Некоторые плееры могут
подключать свои собственные фильтры для аудио-процессинга (например
эквалайзеры), которые опять могут не поддерживать многоканальные режимы.
В этих случаях может, например, загадочно исчезнуть центральный канал,
или станет невозможно переключать режим колонок. Чтобы этого не
происходило не устанавливайте фильтр-паки и отключайте лишние фильтры!<br>
<br>
&nbsp;&nbsp;&nbsp; Один из таких проблемных фильтров является <b>mmswitch</b>
(тот, который позволяет смотреть .avi и DVD с  несколькими аудио-треками
и переключать      их (в основном для мультиязычных фильмов). Если Вы в
основном смотрите DVD, то лучше использовать mpeg2 парсер, который
поддерживает переключение языков самостоятельно (<small>например,
стандартный <b>MPEG2 Splitter</b> [mpg2splt.ax]поддерживает возможность
переключения аудио-потоков, а <b>Elecard MPEG2 demultiplexor</b>
[mpg2dmx.ax] - нет</small>) а <b>mmswitsh</b> дерегистрировать -  кроме
всего прочего   спадет нагрузка      на процессор. Дело в том,  что если
mpeg2 парсер не поддерживает переключения потоков то для  каждого
аудио-потока создается по собственной цепочке декодирования,    все они
будут работать паралельно и нагружать процессор, несмотря  на то, что на
слышен будет только один.<br>
<br>
&nbsp;&nbsp;&nbsp; Если же наличие <b>mmswitch</b> необходимо,       то
возможны следующие варианты:<br>
<ul>
  <li>Все аудио потоки - ac3. Для корректного переключения между
потоками необходимо, чтобы все ac3 декодеры имели одинаковый выходной
формат.</li>
  <li>Первый поток - ac3, второй - mp3 (к примеру,  в  принципе любой
немногоканальный). Перед переключением на mp3 поток необходимо
установить формат ac3 декодера в 16bit stereo.</li>
  <li>Первый поток - mp3, второй - ac3. перед переключением на ac3
поток установите ac3 декодер в 16 бит стерео режим. После переключения
можно установить желаемый выходной формат.<br>
  </li>
</ul>
<br>
&nbsp;&nbsp;&nbsp; Некоторые из системных настроек могут настраиваться
из свойств фильтра (как их вызывать см. <a href="#usage">Настройки
фильтра</a>):<br>
<br>
<div align="center"><img src="pic/system.gif" title="" alt="" width="628" height="429"><br>
</div>
<br>
<b>* Filter merit (приоритет фильтра)</b><br>
<br>
&nbsp;&nbsp;&nbsp; Фильтр устанавливается в систему с наивысшим
приоритетом, т.е. будет использоваться вместо других установленных
фильтров. Если по каким-то причинам необходимо использовать другие
фильтры, то приоритет можно понизить до минимального при помощи опции <b>'Prefer
other decoder'</b>. Фильтр останется в системе и будет использоваться
только если не установлено других AC3 декодеров. <b>'Prefer AC3Filter'</b>
- вернуть высокий приоритет. Понижать приоритет необходимо, например,
при использовании NVDVD плеера. NVDVD может работать только со своим
собственным декодером, а при установленном AC3Filter пытвется загрузить
его и не может работать.<br>
&nbsp;&nbsp;&nbsp; Эта опция требует выйти и зайти в систему заново под
W2k/XP и перезагрузки системы под W98.<br>
<br>
<b>* Default audio renderer (устройство вывода по умолчанию)</b><br>
<br>
&nbsp;&nbsp;&nbsp; Звуковая карта может работать в двух режимах:
DirectSound и WaveOut. Если при использовании фильтра возникают проблемы
(например не работает SPDIF), то переключение режима работы может
помочь. Некоторые плееры (например, BSPlayer) имеют соответствующие
настройки, прочие же используют системные умолчания. Для переключения
режима работы используются&nbsp; опции <b>'Use DirectSound'</b> - для
использования интерфейса DirectSound по умолчанию и <b>'Use WaveOut'</b>
для использования интерфейса WaveOut.<br>
&nbsp;&nbsp;&nbsp; Эта опция требует выйти и зайти в систему заново под
W2k/XP и перезагрузки системы под W98.<br>
<br>
<b> * Audio/Video sync (синхронизация аудио и видео).</b><br>
<br>
&nbsp;&nbsp;&nbsp; В некоторых случаях возможно что аудио и видео
рассинхронизированы. В основном это случается из-за немправильного
микширования видео файла, но возможны и аппаратные причины
десинхронизации. Эта опция предназначена для решения <b>аппаратных</b>
проблем. Эта опция может быть применена для исправления дефекта файла,
но необходимо не забывать изменить ее обратно! Здесь указывается сдвиг
аудио относительно видео в мс. Если звук слышен <i><u>до</u></i> видео,
то необходимо <u><i>увеличить</i></u> это значение. Если звук происходит <u><i>после</i></u>
событий на экране, то необходимо <u><i>уменьшить</i></u> это значение.
Эта опция может исправить только постоянный временной сдвиг.<br>
&nbsp;&nbsp;&nbsp; Эта опция действует немедленно. При изменении
значения задержки&nbsp; возможно, что изображение замрет или будет
двигаться скачками в течении нескольких секунд.<br>
<br>
<b>* System options (системные опции)</b><br>
<br>
&nbsp;&nbsp;&nbsp; <b>Auto load movie configuration files</b> - При
включенной опции фильтр будет искать файл настроек фильтра с тем же
именем, что и открытый видео файл и автоматически его загрузит.<br>
<br>
&nbsp;&nbsp;&nbsp; <b>Generate timestamps</b> - Эта опция может
повлиять на 'дрожание' видео. Можно попробовать переключить эту опцию
если наблюдается 'дрожание', неплавное течение видео. При включенной
опции обеспечивается наиболее совместимый режим. Фильтр будет вычислять
значения временных меток для каждого декодированного ac3 фрейма. Но в
этом случае возможно, что эти значения не будут совпадать со значениями
временных меток, полученных из файла (фактически они всегда будут
расходиться для .avi файлов) и это может привести в 'дрожанию' видео на
некоторых системах. Это не означает, что фильтр неправильно считает
временные метки, или, что они неправильно проставлены в исходном файле,
это общая проблема .avi файлов с кадровым чередованием (frame-based
interleave). Частично эта проблема может быть решена при помощи опции '<b>Jitter
correction</b>'. <br>
&nbsp;&nbsp;&nbsp; При отключенной опции фильтр будеть использовать
только временные метки из исходного файла. Это может исправить проблему
'дрожания' видео, связанную с различием временных меток. Но в этом
случае часть ac3 фреймов не будет временных меток вообще и некоторые
плееры/драйверы могут некорректно отрабатывать такую ситуацию, что опять
может привести к 'дрожанию' или 'замороженному' изображению.<br>
<br>
&nbsp;&nbsp;&nbsp; <b>Jitter Correction</b> - Имеет смысл только при
включенной опции '<b>Generate timestamps</b>'. Уменьшает дрожание из-за
раницы рассчетного времени и времени, полученного из файла. '<b>Current
jitter</b>' показывает текущую среднюю амплитуду отклонений на выходе.<br>
<br>
&nbsp;&nbsp;&nbsp; <b>Use WAVEFORMATEXTENSIBLE</b> - Для многоканальных
режимов используется структура WAVEFORMATEXTENSIBLE (описанная в <a href="http://www.microsoft.com/hwdev/tech/audio/multichaud.asp">http://www.microsoft.com/hwdev/tech/audio/multichaud.asp</a>).
Некоторые старые драйвера не с ней умеют работать (некоторые новые же,
напротив, в многоканальных режимах работают только с ней).<br>
<br>
<h3><a name="w98"></a>Windows 98</h3>
&nbsp;&nbsp;&nbsp; По умолчанию в Windows98 не поддерживает
многоканальные режимы и SPDIF.<br>
&nbsp;&nbsp;&nbsp; Первое, что необходимо сделать - это установить патч
от microsoft:<br>
<b>server1: </b><a href="ftp://ftp.asus.com.tw/pub/ASUS/beta/mb/driver/269601USA8.EXE">ftp://ftp.asus.com.tw/pub/ASUS/beta/mb/driver/269601USA8.EXE</a><br>
<b>server1: </b><a href="ftp://download.intel.com/design/motherbd/bt2/269601USA8.EXE">ftp://download.intel.com/design/motherbd/bt2/269601USA8.EXE<br>
</a><b>server1: </b><a href="http://ac3filter.sourceforge.net/download/269601USA8.EXE">http://ac3filter.sourceforge.net/download/269601USA8.EXE</a><br>
<br>
&nbsp;&nbsp;&nbsp; Действие этого патча описано в <a href="http://www.microsoft.com/hwdev/tech/audio/Non-PCM.asp">http://www.microsoft.com/hwdev/tech/audio/Non-PCM.asp</a>.<br>
&nbsp;&nbsp;&nbsp; Второе - необходимо использовать WaveOut Device в
качестве устройства вывода аудио.<br>
&nbsp;&nbsp;&nbsp; После этих действий в большинстве плееров должны
работать многоканальное воспроизведение и таже режим spdif.<br>
<br>
<h3><a name="nt4"></a>WinNT4</h3>
&nbsp;&nbsp;&nbsp; Требуется ServicePack6.<br>
<br>
<h3><a name="w2k"></a>Win2K</h3>
&nbsp;&nbsp;&nbsp; Настоятельно рекомендуется ServicePack2 <br>
<br>
<h3><a name="Vortex"></a>Vortex</h3>
&nbsp;&nbsp;&nbsp; Если фильтр не работает в многоканальных режимах,
можно попробовать выключить опцию '<b>Use WAVEFORMATEXTENSIBLE</b>' на
странице настроек 'System'.<br>
<br>
<br>
<hr width="100%" size="2">
<h2><a name="player_settings"></a>Настройки плееров.</h2>
&nbsp;&nbsp;&nbsp; Большинство плееров не требуют настройки - фильтр
определяется автоматически.<br>
<br>
<h3><a name="BSPlayer"></a>BSPlayer</h3>
&nbsp;&nbsp;&nbsp; В настройках плеера (<b>Options-&gt;Preferences</b>)
установить: <br>
<ul>
  <li>General-&gt;Don't load ac3 settings: отмечено </li>
  <li>Audio-&gt;For AC3 decoding use: '--'<br>
  </li>
  <li>Audio-&gt;Use DeDynamic filter: выключено. (при включенном
фильтре DeDynamic невозможны многоканальные режимы!)</li>
</ul>
<br>
<h3><a name="ZoomPlayer"></a>ZoomPlayer</h3>
&nbsp;&nbsp;&nbsp; Для проигрывания AVI файлов никаких настроек
произвадить не нужно. Однако этот плеер может использоваться как DVD
плеер (вместо широко известных WinDVD и PowerDVD). Для использования
AC3Filter для проигрывания DVD необходимы файлы:<br>
<br>
<a href="http://ac3filter.sourceforge.net/download/zoom/AC3Filter-CyberLink-DirectSound.dvdgraph">http://ac3filter.sourceforge.net/download/zoom/AC3Filter-CyberLink-DirectSound.dvdgraph</a><br>
<a href="http://ac3filter.sourceforge.net/download/zoom/AC3Filter-InterVideo-DirectSound.dvdgraph">http://ac3filter.sourceforge.net/download/zoom/AC3Filter-InterVideo-DirectSound.dvdgraph</a><br>
<a href="http://ac3filter.sourceforge.net/download/zoom/AC3Filter-CyberLink-Waveout.dvdgraph">http://ac3filter.sourceforge.net/download/zoom/AC3Filter-CyberLink-Waveout.dvdgraph</a><br>
<a href="http://ac3filter.sourceforge.net/download/zoom/AC3Filter-InterVideo-Waveout.dvdgraph">http://ac3filter.sourceforge.net/download/zoom/AC3Filter-InterVideo-Waveout.dvdgraph</a><br>
<br>
&nbsp;&nbsp;&nbsp; Эти файлы необходимо поместить в каталог
...\ZoomPlayer\DVDGraph. В настройках плеера <b>Player
Options-&gt;DVD-&gt;DVD Setup</b> необходимо выбрать нужный вариант
настроек (в зависимости от того, какой видео декодер используется).<br>
<br>
<br>
<hr width="100%" size="2">
<h2><b><a name="usage"></a>Настройки фильтра.</b><br>
</h2>
<big><big><i><small><br>
&nbsp;&nbsp;&nbsp; Два самых главных правила настройки:<br>
&nbsp;&nbsp;&nbsp; 1. Если вы не понимаете, что делает какая-либо
настройка не трогайте ее.<br>
&nbsp;&nbsp;&nbsp; 2. Если вы не послушались первого правила и что-то
сломалось, и непонятно, как все починить обратно, загрузите пресет
'standart'.<br>
&nbsp;&nbsp;&nbsp; :))).<br>
</small></i></big></big><br>
&nbsp;&nbsp;&nbsp; Настраивать фильтр можно несколькими способами.
Лучше всего, если плеер предоставляет доступ к свойствам фильтров (WMP
6.4, BSP, Sasami, и т.д., нет в WMP 7, 8, 9!). Например, из WMP 6.4
список фильтров вызывается через меню <b>File-&gt;Properties-&gt;Advanced</b>:<br>
<ul>
</ul>
<div align="center"><img src="pic/filters.gif" alt="" width="425" height="435"> <br>
</div>
<br>
<br>
&nbsp;&nbsp;&nbsp; Если плеер не предоставляет доступа к свойствам
фильтра то настройку можно произваодить из меню Пуск '<b>AC3Filter Config</b>'
или по иконке в Панели Управления. Однако эти методы не отображают
текущей активности и не влияют на нее! Т.е. уровни сигнала не будут
отображаться, информация о потоке заполнена нулями, и т.д. Более того,
конфигурирование должно произвадиться когда плеер закрыт. <i><small>(при
закрытии плеера фильтр записывает свою конфигурацию в реестр, поэтому
измененные настройки будут перезаписаны старыми, прочитанными в момент
открытия плеера)</small></i> Потому крайне рекомендуется производить
настройки из плеера, который предоставляет доступ к настройкам фильтра -
это практически любой из широко растространенных: BSPlayer, Sasami,
ZoomPlayer, LighAlloy, и т.д. Вы также получите возможность сразу
услышать, как влияет тот или иной параметр на звук. Не рекомендуются
плееры WMP версий 7, 8, 9.<br>
<br>
<h3><a name="main_settings"></a>Основные настройки (страница Main)</h3>
&nbsp;&nbsp;&nbsp; Окно настроек выглядит следующим образом (уровни и
информация о потоке показываются только при вызове окна свойств из
плеера):<br>
<br>
<div align="center"><img src="pic/main.gif" alt="" width="628" height="427"> <br>
</div>
<h3><br>
</h3>
<h4><b>* Информация о потоке</b> (Bitstream information).<br>
</h4>
&nbsp;&nbsp;&nbsp; Слева сверху - информация о потоке (bitstream
information, BSI):<br>
<ul>
  <li><b>Сhannels</b> - конфигурация каналов  в  потоке    в  виде
передние_каналы/тыловые_каналы + индикация  наличия низкочастотного
канала (низкочастотных  эффектов, Low-Frequency   Effects, LFE). В
данном примере -  3 передних, 2 тыловых     канала   и низкочастотный
присутствует, т.е. конфигурация 5.1.</li>
  <li><b>Sample rate</b> - [кГц], частота дискретизации        .</li>
  <li><b>Bitrate</b> - [bps], битрейт .</li>
  <li><b>Freq (coupl/high)</b> - [кГц], частота    объединения
(coupling) и наивысшая частота. В ac3 начиная   с  определенной частоты
некоторые каналы (в большинстве случаев  - все) объединяются в один
групповой канал и в таком виде сохраняются    в потоке. Т.о.
действительно независимы каналы только в определенном    частотном
диапазоне - до частоты объединения. Наивысшая    частота  - максимальная
кодируемая частота, т.е. частотный   диапазон.</li>
  <li><b>Frames/errors</b> - количество декодированных       пакетов,
количество ошибок   в пакетах.</li>
</ul>
<h4><b>* Переключение конфигурации колонок (Output speakers).</b><br>
</h4>
&nbsp;&nbsp;&nbsp; Слева снизу - настройка выходной  конфигурации
колонок. Это - реально присутствующие колонки,  куда будут
микшироваться. каналы ac3-потока. Формат колонок записывается в
виде&nbsp;передние_каналы/тыловые_каналы + сабвуфер, (SW), для некоторых
конфигураций приведены общепринятые названия. Чем отличается сабвуфер и
канал LFE, а также как производить настройку читайте в разделе <a href="#lfe">Что такое LFE?</a><br>
<br>
&nbsp;&nbsp;&nbsp; Режим '<b>Dolby Surround/ProLogic</b>' задает режим
микширования в 2 канала так, чтобы Dolby Surround/Pro Logic декодер мог
выделить тыловой канал. Режим '<b>Dolby ProLogic II</b>' - аналогично
для декодера DPLII. Поддержка DPLII пока экспериментальна из-за
отсутствия надежной информации.<br>
<br>
&nbsp;&nbsp;&nbsp; Режим '<b>SPDIF</b>' - означает, что AC3 поток будет
передаваться непосредственно на цифровой выход аудиокарты (без
изменений). То есть все остальные настройки <b>не будут действовать</b>.<br>
<br>
&nbsp;&nbsp;&nbsp; Список выбора '<b>Sample format</b>' задает выходной
формат сэмпла. На настоящее время поддерживаются PCM 16, 24, 32 бит и
формат с плавающей точкой. На некоторых картах некоторые форматы не
поддерживаются, поэтому используйте эту опцию осторожно.<br>
<br>
&nbsp;&nbsp;&nbsp; Необходимо отметить, что корректное переключение
режима колонок при проигрывании возможно не всегда.<br>
<br>
<ul>
</ul>
<h4><b>* Уровни усиления (Gains).</b></h4>
&nbsp;&nbsp;&nbsp; Снизу посередине находятся уровни  усиления.<br>
<ul>
  <li><b>Master</b> - задает желаемый уровень усиления. </li>
  <li><b>Gain</b> - отображает текущий уровень усиления.</li>
  <li><b>LFE</b> - уровень канала низкочастотных эффектов.</li>
  <li><b>Voice</b> - уровень центрального канала  (канала     диалогов).</li>
  <li><b>Surround</b> - уровень тыловых каналов.</li>
  <li><b>BSI Lock</b> - устанавливает уровень на значение, указанное в
ac3-потоке.</li>
  <li><b>Normalize</b> - однопроходная нормализация (см. параметр <b>One-pass
norm</b> в разделе <a href="#mixer">Настройки     микшера</a>).<br>
  </li>
</ul>
&nbsp;&nbsp;&nbsp; <b>Master</b> и <b>Gain</b> отвечают за общий
уровень усиления. Master устанавливает желаемый уровень усиления. Если
уровень усиления слишком высок и происходит переполнение, то текущий
уровень усиления уменьшается. Текущий уровень   усиления   отображает <b>Gain</b>.
<h4><b>* Сжатие динамического диапазона (DRC).</b> </h4>
&nbsp;&nbsp;&nbsp; По сути, ac3 - логарифмический формат, сэмплы
хранятся в формате экспоненты и мантиссы. В пересчете   на нормальную
битность один сэмпл может занимать до 40бит (чисто теоретически) или до
24бит (норма), что обеспечивает огромный динамический диапазон (хотя,
как любил говорить великий дедушка Эйнштейн - все  хорошее в этом мире
относительно :-). Это означает, что тихая запись  с низким уровнем при
воспроизведении на 16-битной звуковой карте  будет совершенно не слышна
или воспроизводиться     с очень низким абсолютным уровнем сигнала
(=&gt; большими искажениями). Для решения этой проблемы в ac3 существует
понятие сжатия динамического диапазона.  Идея заключается в том, чтобы
при воспроизведении тихого звука    с низким уровнем поднимать уровень
до преобразования   сэмпла в 16-битную форму (для громких  звуков -
соответственно, наоборот). В ac3 потоке передаются специальные маркеры,
насколько изменять текущий уровень. Эти маркеры записываются режисером
на стадии мастеринга,   потому гарантируют достаточно высокое качество.
Индикатор <b>DRC level</b> (Dynamic Range Compression level) отображает
этот уровень. При помощи чекбокса <b>Use DRC</b> можно включать и
выключать использование сжатия динамического диапазона. <i>(конечно,
все вышесказанное только приблизительное и грубое описание проблемы)</i>.<br>
<br>
&nbsp;&nbsp;&nbsp; Уровень <b>DRC Power</b> отвечает за то, насколько
уровень сжатия динамического диапазона влияет на выходную громкость. При
увеличении этого параметра   тихие   звуки будут подчеркиваться еще
больше, а громкие - еще более затеняться.     При уменьшении <b>DRC
Power</b> влияние сжатия динамического    диапазона будет уменьшаться.
Нулевое значение <b>DRC Powe</b>r означает нормальное    применение
сжатия динамического диапазона.
<h4><b>* Загрузка процессора  (CPU usage).</b><br>
</h4>
&nbsp;&nbsp;&nbsp; Индикатор показывает загрузку процессора декодером.
В эту нагрузку также  включается вся последующая обработка (если есть)
до непосредственного воспроизведения.<br>
<h4><b>* Индикаторы уровней (Levels).</b><br>
</h4>
&nbsp;&nbsp;&nbsp; Правая часть - индикация уровней.  Необходимо
отметить, что уровни здесь  - логарифмические. По входным уровням хорошо
видна <i>реальная</i> конфигурация каналов в потоке.   Так, бывает, что
формат потока выставлен как 5.1,  однако   фактически низкочастотный
канал отсутствует. (см. также <a href="#lfe">Что такое LFE?</a>).
Красные индикаторы означают переполнение.<br>
<h4><font color="#000000">* Пресеты (Preset)</font></h4>
<font color="#000000">&nbsp;&nbsp;&nbsp; Здесь можно
загружать/записывать/удалять пресеты. Вместе с фильтром устанавливается
несколько стандартных пресетов:<br>
</font>
<ul>
  <li><font color="#000000"><b>standart</b> - максимальное соответствие
стандарту.</font></li>
  <li><font color="#000000"><b>loud</b>&nbsp; - максимальная громкость.<br>
    </font></li>
  <li><font color="#000000"><b>LFE boost</b> - усиленный канал LFE
(+10dB).</font></li>
</ul>
<font color="#000000">&nbsp;&nbsp;&nbsp; При помощи конпки file можно
записывать/загружать пресеты в/из файла:<br>
<br>
</font>
<div align="center"><font color="#000000"><img src="pic/preset.gif" title="" alt="" width="273" height="157"><br>
</font></div>
<font color="#ff0000"><font color="#000000"><br>
&nbsp;&nbsp;&nbsp; Если файл конфигурации записан под тем же именем,
что и видео файл (это имя предлагается по умолчанию) то такой файл
конфигурации будет загружен автоматически при открытии этого файла в
будущем.<br>
&nbsp;&nbsp;&nbsp; Все настройки фильтра разделены на несколько
категорий. В автоматически загружаемый файл рекомендуется записывать
только основные настройки (General options), и, возможно, эквалайзер
потому как в будущем этот файл может просматриваться на другой системе.
Те настройки, которые отсутствуют в файле конфигурации не меняются при
загрузке этого файла.<br>
</font><br>
</font>
<h3><a name="mixer"></a>Настройки микшера (Mixer)</h3>
&nbsp;&nbsp;&nbsp; Вторая закладка - настройки микшера:<br>
<br>
<div align="center"><img src="pic/mixer.gif" title="" alt="" width="628" height="429">&nbsp; <br>
</div>
<br>
&nbsp;&nbsp;&nbsp; Основной элемент этой страницы - матрица
микширования. Она представлена в форме матричного умножения: S' = M S,
где S = { L, C, R, SL, SR, LFE } - входной сэмпл, S'  = { L', C', R',
SL', SR', SW' }  - выходной сэмпл.<br>
<br>
&nbsp;&nbsp;&nbsp; Более приземленно это означает, что для каждой
клетки действет следующее правило: мы микширует канал заданный колонкой
в канал заданный строкой с усилением заданным в клетке. Так, если мы
хотим направить левый канал в правый, то мы должны поставить 1 в клетке
на пересечении колонки 'L' и строки 'R'. Если мы больше не хотим слышать
левый канала слева, то ставим 0 на пересечении строки и столбца 'L'.
Проделав аналогичную операцию для правого тыловых каналов мы полностью
поменяем местами левую и правую колонки. (Заметьте, что при этом
поменяются местами строки, соответствующие левой и правой колонке).<br>
<br>
&nbsp;&nbsp;&nbsp; Нужно четко разделять понятия входного и выходного
канала. Входной канал - это то, что было закодировано в AC3 потоке.
Выходной канал - это то, что мы будем слышать в колонках.<br>
<br>
&nbsp;&nbsp;&nbsp; Строка определяет что мы будем слышать из выходного
канала заданного этой строкой. Так, для матрицы, указанной на рисунке мы
из левого канала мы услышим одну часть входного левого канала, часть
центрального, немного приглушенный левый тыл и низкочастотный канал. <br>
<br>
&nbsp;&nbsp;&nbsp; Столбец означает куда будет микшироваться входной
канал. Так, центральный канал направляется одновременно и на левую и на
правую колонку с множителем 0.7 (иначе центр идущий из двух колонок
будет звучать громче, чем если бы у нас была честная третья колонка).
Таким образом мы услышим центральный канал посередине между левой и
правой колонками. Изменяя множитель в левом или правом выходном канале
'подвинуть' центр. Так, если поставить 1 в столбце 'С' строки 'L', то
центр будет слышен громче из левого канала и будет казаться 'сдвинутым'
влево.<br>
<br>
&nbsp;&nbsp;&nbsp; При включенной опции <b>Auto matrix</b> матрица
автоматически обновляется при изменении параметров. Так, изменив уровень
для центрального канала мы также увидим изменения в коэффициентах
матрицы (столбец 'C').<br>
<br>
&nbsp;&nbsp;&nbsp; Для удобства на эту страницу вынесены некоторые
элементы управления со страницы основных настроек, поэтому за их
описанием обращайтесь в разделу <a href="#main_settings">Основные
настройки</a>.<br>
<br>
&nbsp;&nbsp;&nbsp; Описание настроек:<br>
<ul>
  <li><b>Auto gain control</b> - автоматическая регулировка усиления.
Уменьшает текущий уровень усиления, чтобы не допустить переполнения.
Текущий уровень усиления показывает индикатор <b>Gain</b>. При
отключенной опции слишком сильный сигнал будет обрезаться, что приводит
к неприятным на слух искажениям. При включенной опции при возникновении
переполнения звук будет становиться тише и переполнения просто не
происходит. Поведение системы после переполнения определяется опцией <b>One-pass
norm</b>. Если <b>One-pass norm</b> выключен, то текущий уровень будет
постепенно возвращаться к заданному уровню <b>Master</b>. В этом случае
этот уровень задает средний уровень усиления. При большом количестве
мест, где происходит переполнение такое поведение может привести к
неприятным скачкам громкости, поэтому не следует в этом случае
устанавливать уровень <b>Master</b> слишком большим. Этот режим
рекомендуется использовать, когда переполнений не ожидается или они
достаточно редки. Если опция <b>One-pass norm</b> включена, то после
переполнения не восстанавливается. Таким образом каждое переполнение
уменьшает вероятность и 'силу' следующего переполнения и через некоторое
время уровень усиления устанавливается на некоторое среднее значение,
которого потом и придерживается. Обычно после ~10 минут фильма уровень
стабилизируется. Этот режим используется для того, чтобы получить
максимальную возможную громкость при минимуме возможных артефактов.
Уровень <b>Master</b> в этом случае работает как начальное значение
усиления для работы однопроходной нормализации и поэтому обычно
устанавливается на максимум. (см. также раздел <a href="#max_loud">Максимальная
громкость</a>)<br>
  </li>
  <li><b>One-pass norm</b> - однопроходная нормализация. См. <b>Auto
gain control</b>.<br>
  </li>
  <li><b>Auto matrix</b> - автоматический рассчет матрицы микширования.
Когда эта опция включена, прямое редактирование матрицы невозможно.
Уровни усиления <b>LFE</b>, <b>Voice</b> и <b>Surround</b> являются
параметрами для рассчета матрицы при из изменении вы сразу можете
видеть, как изменяется матрица. При отключении этой опции следующие
элементы управления теряют влияние: уровни усиления <b>LFE</b>, <b>Voice</b>
и <b>Surround</b>, <b>Normalize matrix</b>, <b>Expand stereo</b>, <b>Voice
control</b>, <b>Expand stereo</b>. Сохраняют    свое действие
элементы: <b>Master</b>, <b>Gain</b>,<b>DRC level</b>, <b>DRC power</b>,<b>Auto
gain control</b>, <b>One-pass norm</b>. Появляется возможность
напрямую редактировать  матрицу микширования.</li>
  <li><b>Normalize marix</b> - нормализация матрицы. При включении этой
опции матрица микширования нормируется  так, чтобы не происходило
переполнения в выходных каналах (сумма каналов на выходе &lt;= 1). Но
при этом при изменении уровней усиления <b>LFE</b>, <b>Voice</b> и <b>Surround</b>
может происходить перераспределение громкостей  (например увеличив
громкость LFE мы получим уменьшение громкости      всех остальных
каналов), что не всегда удобно. Отключение этой опции  позволяет
избежать этого эффекта, однако при этом возникает опасность
переполнения. Автоматическая регулировка усиления, сглаживает
последствия, но все-таки рекомендуется немного понизить общий уровень
усиления <b>Master</b> если уровни повышаются.</li>
  <li><b>Expand stereo</b> - работает только когда в исходном ac3 потоке
нет тыловых каналов. В этом случае позволяет усиливать эффект окружения.
Управляется уровнем <b>Surround</b> (который по умолчанню не работает
при отсутствии тыловых каналов на входе). Если в выходной конфигурации
колонок присутствуют тыловые колонки, то туда направляется окружающая
информация. Технически, эта опция управляет разностными компонентами
звука и направляет их на тыловые колонки если они присутствуют.<br>
  </li>
  <li><b>Voice control</b> - работает только когда в исходном ac3 потоке
нет центрального канала. В этом случае позволяет управлять уровнем
центра (диалогов) с помощью уровня <b>Voice</b> (который по умолчанню не
работает при отсутствии центрального канала на входе). Если в выходной
конфигурации колонок присутствует центральная колонка то диалоги
направляются туда. Технически, эта опция управляет синфазными
компонентами звука (одинаковыми в обоих передних каналах) и направляет
из на центральную колонку если она присутствует. Совместно с опцией <b>Expand
stereo</b> позволяет раскладывать стерео сигнал на все колонки.<br>
  </li>
  <li><b>Bass redirection</b> - перенаправление басов со всех каналов на
сабвуфер. Работает только когда в выходной конфигурации колонок
присутствует сабвуфер. Рекомендуется для систем с отдельным сабом (см. <a href="#lfe">Что такое LFE?</a>). Перенаправление происходит до
микширования, потому перенаправленный сигнал отображается также во
входном уровне LFE (даже, когда 'настоящий' LFE молчит). Частота среза
375Hz (для частоты дискретизации 48000Hz).</li>
</ul>
&nbsp;&nbsp;&nbsp; Комбо-бокс позволяет сохранять и загружать
сохраненные матрицы.<br>
<br>
<h3><a name="equalizer"></a>Эквалайзер и задержки (Equalizer).</h3>
<div align="center"><img src="pic/equalizer.gif" title="" alt="" width="628" height="427"><br>
</div>
<br>
&nbsp;&nbsp;&nbsp; Правая часть полностью посявящена непосредственно
эквалайзеру. Что все это означает и так очвидно, посему не буду утомлять
себя описанием ;-).<br>
<br>
&nbsp;&nbsp;&nbsp; Левый верхний угол - настройка задержек. Необходима
для компенсации разных расстояний до колонок. В идеале все колонки
должны находиться на равном расстоянии от слушателя, чтобы звук изданный
в определенный момент времени одновременно изо всех колонок дошел до
слушателя также одновременно. В противном случае звуки будут
позиционироваться неверно. Однако, на практике расстояние до колонок
может быть разным. Для компенсации разных расстояний до колонок звук в
них должен воспроизводиться с небольшими задержками.<br>
<br>
&nbsp;&nbsp;&nbsp; Величину задержки можно задавать непосредственно - в
миллисекундах или сэмплах. Отрицательное значение задержки означает, что
канал должен воспроизводиться 'раньше' нулевого времени (чем дальше
находится колонка, тем раньше она должна начать работать, чтобы звук
успел пройти большее расстояние). <br>
<br>
&nbsp;&nbsp;&nbsp; Для удобства, можно указывать расстояние до колонок.
В этом случае положительное значение задает 'отрицательную' задержку,
чтобы удаленная колонка начала воспроизводить звук раньше. Отрицательные
значения означают положительную задержку воспроизведения канала.<br>
<br>
<br>
<hr width="100%" size="2">
<h2><a name="lfe"></a>Что такое LFE?</h2>
<br>
&nbsp;&nbsp;&nbsp; Первое, что необходимо отметить - LFE это не то же
самое, что сабвуфер! И то, что 5.1 в случае с AC3 это совсем не те же
самые 5.1 акустической системы. Поэтому начнем с рассмотрения этой
разницы.<br>
<br>
&nbsp;&nbsp;&nbsp; Формат AC3 создавался для кинотеатров, а совсем не
для компьютера. А в кинотеатрах акустика вполне адекватно может
воспроизвадить низкие частоты. LFE же был задуман как канал для мощных
низкочастотных <i>эффектов</i>, то есть эффектов, с которыми обычная
акустика уже не может справиться. Чтобы стены тряслись, народ вопил от
ужаса, а слабонервные барышни падали в обморок. Таким образом все каналы
ac3-кодированного потока содержат низкие частоты, и только иногда (в
особо взрывоопасные моменты) в работу вступает канал LFE и только для
того, чтобы помочь основной акустике потрясать стены. Вполне может
случиться так, что канал LFE вообще не включится ни разу за весь фильм.
И это также будет нормальным.<br>
<br>
&nbsp;&nbsp;&nbsp; У компьютерной же акустики совсем другая специфика.
Большинство современных компьютерных 5.1 наборов просто не в состоянии
воспроизвести низкие частоты через сателлиты. То есть саб должен
полностью отвечать за воспроизведение низких частот.<br>
<br>
&nbsp;&nbsp;&nbsp; Таким образом если мы подключим 5.1 акустику, и
станем смотреть фильм с 5.1 зауковой дорожкой назначив канал LFE на
сабвуфер, то мы рискуем не услышать низких частот вообще!<br>
<br>
&nbsp;&nbsp;&nbsp; Поэтому, если акустическая система имеет отдельный
сабвуфер крайне рекомендуется перенаправлять туда басы со <i>всех</i>
каналов (т.к. низкочастотная информация содержится во всех каналах).
Т.е. включить опцию <b>Bass redirection</b> в настройках фильтра. Либо
использовать аналогичную опцию в настройках драйвера звуковой карты,
если там такая опция есть, а опцию фильтра выключить. Многие могут
возразить - "А как же правильное воспроизведение?". Сомневающихся
отправляю к документу (<a href="http://www.dolby.com/tech/c.in.0011.LFE.pdf">http://www.dolby.com/tech/c.in.0011.LFE.pdf</a>),
где разъясняется роль LFE и саба при воспроизведении звука.<br>
<br>
<br>
<hr width="100%" size="2">
<h2><a name="cookbook"></a>Рецепты.</h2>
<h3><a name="lfe_mix"></a> Микшируем LFE.</h3>
&nbsp;&nbsp;&nbsp; При отсутствии саба в выходной конфигурации по
умолчанию LFE микшируется только в передние колонки. Если остальные
колонки также имеют достаточную мощность, то можно микшировать его и
туда: <br>
<ul>
  <li>Запускаем фильм.</li>
  <li>Вызываем настройки фильтра.<br>
  </li>
  <li>Отключаем <b>Auto Matrix</b>.</li>
  <li>В колонке LFE матрицы в строках 'SL' и 'SR' ставим '1'.</li>
  <li>Записываем матрицу</li>
</ul>
<br>
<h3><a name="swap_speakers"></a> Меняем местами колонки.</h3>
&nbsp;&nbsp;&nbsp; Для понимания этого раздела рекомендуется
внимательно прочитать раздел <a href="#mixer">Настройки микшера</a> (в
части описания работы матрицы).<br>
<br>
&nbsp;&nbsp;&nbsp; Вы хотите получить полноценный центральный канал на
карте, не поддерживающей только 4 канала? Это возможно. Но для этого
придется пожертвовать одним из задних каналов. Т.е. из конфигурации 2/2
(два передних канала, два занних) будем делать 3/1 (три передних, один
задний). Для этого:<br>
<ul>
  <li>Запускаем фильм.</li>
  <li>Включаем <b>Auto Matrix</b> (это позволит получить базовую
матрицу, которую мы потом будем править).</li>
  <li>В качестве выходной конфигурации устанавливаем 3/1. Т.к. реально
центральной колонки у нас нет, то центр сейчас будет воспроизводиться
через две передние, а обе задние будут работать как одна колонка. Это
происходит на уровне драйверов, но позже мы их обманем.</li>
  <li>Устанавливаем настройки (уровни усиления). </li>
  <li>Отключаем <b>Auto Matrix</b>.</li>
  <li>На этом этапе мы имеем матрицу-заготовку. Мы будем воспроизводить
центр через заднюю правую колонку. Поэтому значеня из строки 'С'
копируем в строку 'SR', а затем обнуляем значения сторки 'C'. Матрица
готова.</li>
  <li>Записываем результат, чтобы не потерять его.<br>
  </li>
  <li>Переставляем заднюю правую колонку на место передней центральной.</li>
  <li>В качестве выходной кофигурации устанавливаем 2/2 и наслаждаемся
результатом. Драйвер думает, что мы выводим честные 2/2 колонки, но
ничего не знает о том, что центр сейчас идет на заднюю правую, т.е.
фактически это конфигурация 3/1.</li>
</ul>
<br>
<h3><a name="max_loud"></a>Максимальная громкость<br>
</h3>
&nbsp;&nbsp;&nbsp; Если кажется, что стандартные настройки дают слишком
тихий звук, то это можно исправить. На самом деле стандартные настройки
дают звук, максимально приближенный к стандарту, потому любые
манипуляции - это отклонение от стандарта и можно услышать совсем не то,
что задумывалось. Но если обстоятельства вынуждают, то посмотрим, что
можно сделать...<br>
<br>
&nbsp;&nbsp;&nbsp; Первое, что необходимо знать - большинство фильмов
нормировано так, чтобы не происходило переполнения. Потому если в данном
моменте звук кажется слишком тихим, то подняв уровень в другом месте
может возникнуть переполнение. Поэтому важно уметь пользоваться всеми
возможностями в меру. <br>
<br>
&nbsp;&nbsp;&nbsp; Основных методов борьбы с переполнением реализовано
три:<br>
<ul>
  <li>Обрезание сигнала. Сигнал выше максимальной амплитуды просто
обрезается. Это дает достаточно заметные на слух искажения.</li>
  <li>Автоматическая регулировка усиления. При переполнении уровень
усиления автоматически опускается. Это происходит без заметных
искажений, но резкие изменения уровня усиления могут привести к заметным
на слух скачкам громкости.</li>
  <li>Сжатие динамического диапазона. Это разновидность автоматической
регулировки усиления, но управляется метками, расставленными
звукорежиссером в ac3 потоке.</li>
</ul>
<br>
&nbsp;&nbsp;&nbsp; Самый простой метод поднять громкость - это
выключить автоматическую регулировку усиления (<b>Auto gain control</b>)
и поднять уровень усиления <b>Master</b>. В этом случае переполнение
будет просто обрезаться. Этот метод подходит только для того, чтобы
слушать на максимальной громкости в ущерб качеству.<br>
<br>
&nbsp;&nbsp;&nbsp; Следующий метод, более качественный - поднять
уровень <b>Master</b> (можно сразу до максимума), включить автоматическю
регулировку усиления и включить однопроходную нормализацию (<b>Normalize</b>).
В этом случае при возникновении переполнения уменьшится усиление. После
определенного промежутка времени усиление почти перестанет изменяться. В
этом случае мы получим максимальное качество при максимуме громкости.
Этот метод также имеет недостатки - во первых для того, чтобы усиление
стабилизировалось необходимо время, а во вторых, тихие звуки могут
оказаться слишком тихими и главная задача - слышать четко все будет не
выполнена. Этот метод рекомендуется как самый быстрый способ получить
максимальную громкость при максимальном же качестве.<br>
<br>
&nbsp;&nbsp;&nbsp; Как разновидность предыдущего метода можно выключить
однопроходную нормализацию. В этом случае усиление будет понемногу
восстанавливаться после переполнения до уровня <b>Master</b>. Этот
метод мало чем отличается от предыдущего, но здесь более важно правильно
выбрать уровень <b>Master</b>. При большом количестве переполнений,
когда уровень <b>Master</b> слишком высок, будут происходить частые и
неприятные смены громкости (предыдущий же метод от этого в некоторой
мере избавлен, поскольку восстановления уровня не происходит). Зато
часть недостатков предыдущего метода можно сгладить. Так, нормально
слышно будет и взрывы и тихий разговор. Но, разговор сразу после взрывов
слышно опять будет плохо. Этот метод можно рекомендовать при небольшом
изменении громкости, когда переполнений не ожидается или ожидается
достаточно мало.<br>
<br>
&nbsp;&nbsp;&nbsp; Следующее, что можно сделать - при поднятом уровне <b>Master</b>
включить сжатие динамического диапазона (<b>Use DRC</b>, см раздел <a href="#main_settings">Основные настройки</a>). Текущий уровень
усиления отображается на соответствующем индикаторе. На громких сценах
он должен уменьшаться, а на тихих увеличиваться. Может оказаться, что
DRC задает слишком малое усиление, поэтому можно увеличить эффект
уровнем <b>DRC Level</b>. &nbsp;Подбирать этот уровень нужно исходя из
того, чтобы скачки громкости, вызванные работой самого DRC и блоком
управления &nbsp;усилением были минимальны при максимальном уровне
самого звука. Понятно, что при увеличении эффекта DRC скачки грмкости
становятся более заметными. Однако, таким образом можно добиться четкого
звучания самых тихих звуков (разумеется из тех, которые посчитал важными
звукорежиссер), и избавиться от скачков громкости автоматической
регулировки усиления. Например, отчетливо разбирать речь на фоне шумных
сцен (взрывы, стрельба). Как вариант - можно вообще выключить
автоматическую регулировку усиления. В этом случае баланс нужно выбирать
между громкостью <b>Master</b>, скачками громкости DRC и ухудшением
качества из-за обрезания сигнала.<br>
<br>
&nbsp;&nbsp;&nbsp; Т.о. следующие параметры влияют на громкость и
четкость тихих звуков: <b>Master</b>, <b>Auto gain control</b>, <b>Normalize</b>,<b>
Use DRC</b>, <b>DRC Level</b>. Подбор этих параметров должен
производиться исключительно индивидуально - в зависимости от типа
акустической системы (высококлассная АС, или пассивные колонки),
восприятия самого слушателя (некоторых раздражают скачки громкости,
другим же болше важно слышать, что говорят), и фильма (ленивый
звукорежиссер не проставил метки DRC в звуковом потоке ;-).<br>
<br>
<br>
<hr width="100%" size="2">
<h2><a name="registry"></a>Реестр и файлы конфигурации<br>
</h2>
&nbsp;&nbsp;&nbsp; Фильтр сохраняет свои настройки в разделе реестра:
[HKEY_CURRENT_USER\Software\AC3Filter]. Все настройки фильтра разделены
на 4 части: общие, матрица, эквалайзер, задержки. Каждая из частей
сохраняется в отдельной ветке. Кажая часть настроек формирует свои
пресеты. Т.е. возможно несколько эквалайзеров или матриц. Особое
назначение имеет пресет '_default'. При загрузке фильтра загружаются все
'_default' пресеты (общие настройки, матрица, эквалайзер и задержки) и
сохраняются там же при выгрузке.<br>
<br>
&nbsp;&nbsp;&nbsp; Файлы конфигурации также разделены на несколько
частей, каждая из которых содержит тот же набор настроек, что и ветки
реестра.<br>
<br>
&nbsp;&nbsp;&nbsp; Все уровни храняться в реестре в виде коэффициентов
(не в  dB).<br>
&nbsp;&nbsp;&nbsp; Все значения с плавающей точкой сохраняются в
реестре в виде значений 'REG_SZ'.<br>
&nbsp;&nbsp;&nbsp; Значения 'bool' записываются как целые в реестр и
как 'true'/'false' значения в файл конфигурации.<br>
<br>
&nbsp;&nbsp;&nbsp; Как часть исени некоторых настроек используются
следующие сокращения имен каналов:
<table cellpadding="2" cellspacing="2" border="1" align="center">
  <tbody>
    <tr>
      <td valign="top" align="center"><b>Сокращение</b><br>
      </td>
      <td valign="top" align="center"><b>Значение</b><br>
      </td>
    </tr>
    <tr>
      <td valign="top" align="center">L<br>
      </td>
      <td valign="top" align="center">Передний левый</td>
    </tr>
    <tr>
      <td valign="top" align="center">C<br>
      </td>
      <td valign="top" align="center">Центральный<br>
      </td>
    </tr>
    <tr>
      <td valign="top" align="center">R<br>
      </td>
      <td valign="top" align="center">Передний правый<br>
      </td>
    </tr>
    <tr>
      <td valign="top" align="center">SL<br>
      </td>
      <td valign="top" align="center">Левый тыл<br>
      </td>
    </tr>
    <tr>
      <td valign="top" align="center">SR<br>
      </td>
      <td valign="top" align="center">Правый тыл<br>
      </td>
    </tr>
    <tr>
      <td valign="top" align="center">LFE<br>
      </td>
      <td valign="top" align="center">Канал LFE или <br>
сабвуфер</td>
    </tr>
  </tbody>
</table>
<br>
<h3><a name="reg_presets"></a>Пресеты</h3>
&nbsp;&nbsp; &nbsp;Ключи реестра:
<ul>
  <li>mode (int) - режим колонок, будет установлен при загрузке
пресета. Это значение можно использовать для привязки конкретного
пресета к конкретной конфигурации колонок. Значение может отсутствовать,
в этом случае  при загрузке пресета текущая конфигуращия колонок не
будет изменена. Может принимать следующие значения:<br>
    <table border="1" cellspacing="2" cellpadding="2" align="center">
      <tbody>
        <tr>
          <td align="center" valign="top"><b>Значение<br>
          </b></td>
          <td valign="top" align="center"><b>Режим<br>
          </b></td>
        </tr>
        <tr>
          <td valign="top" align="center">0<br>
1<br>
2<br>
3<br>
4<br>
5<br>
6<br>
7<br>
8<br>
9<br>
10<br>
11<br>
12<br>
13<br>
14<br>
15<br>
          </td>
          <td valign="top">2/0 (стерео)<br>
1/0 (моно)<br>
2/0 (стерео)<br>
3/0<br>
2/1<br>
3/1<br>
2/2 (квадро)<br>
3/2<br>
2/0+LFE<br>
1/0+LFE<br>
2/0+LFE<br>
3/0+LFE<br>
2/1+LFE<br>
3/1+LFE<br>
2/2+LFE<br>
3/2+LFE (5.1)</td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>spdif (int) - включение режима вывода на SPDIF.</li>
  <li>dolby (int) - включение режима микширования в
DolbySurrouns/ProLogic/ProLogicII. Может принимать значения:<br>
    <table cellpadding="2" cellspacing="2" border="1" align="center">
      <tbody>
        <tr>
          <td valign="top" align="center"><b>Значение<br>
          </b></td>
          <td valign="top" align="center"><b>Режим<br>
          </b></td>
        </tr>
        <tr>
          <td valign="top" align="center">0<br>
1<br>
2<br>
          </td>
          <td valign="top">No DOlby downmix<br>
Dolby Surround/ProLogic<br>
Dolby ProLogicII<br>
          </td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>format (int) - выходной формат сэмпла. Может принимать значения:<br>
    <table cellpadding="2" cellspacing="2" border="1" align="center">
      <tbody>
        <tr>
          <td valign="top" align="center"><b>Значение<br>
          </b></td>
          <td valign="top" align="center"><b>Режим<br>
          </b></td>
        </tr>
        <tr>
          <td valign="top" align="center">0<br>
1<br>
2<br>
3<br>
          </td>
          <td valign="top">PCM 16bit<br>
PCM 24bit<br>
PCM 32bit<br>
PCM float<br>
          </td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>generate_timestamps (bool) - генерация временных меток.</li>
  <li>time_shift (int) - сдвиг аудио относительно видео в мс.</li>
  <li><font color="#000000">config_autoload (bool) - автозагрузка
файлов конфигурации с тем же именем, что и видео файл.<br>
    </font></li>
  <li>matrix (text) - матрица микширования, будет загружена при
загрузке пресета. Это значение можно использовать для привязки к пресету
конкретной матрицы микширования. Не имеет смысла при включенной опции
auto_matrix. Может  отсутствовать, в этом случае при загрузке пресета
матрица не изменится.<br>
  </li>
  <li>master (double) - основной уровень усиления</li>
  <li>clev (double) - уровень усиления центрального канала</li>
  <li>slev (double) - уровень усиления тыловых каналов</li>
  <li>lfelev (double) - уровень усиления канала LFE</li>
  <li>clev_lock (bool) - фиксация уровня усиления центрального  канала</li>
  <li>slev_lock (bool) - фиксация уровня усиления тыловых каналов</li>
  <li>lfelev_lock (bool) - фиксация уровня усиления канала LFE</li>
  <li>dynrng (bool) - использовать сжатие динамического диапазона</li>
  <li>dynrng_power (double) - уровень сжатия динамического диапазона</li>
  <li>auto_matrix (bool) - использовать автоматический рассчет  матрицы
микширования</li>
  <li>normalize_matrix (bool) - нормализация матрицы микширования</li>
  <li>bass_redir (bool) - перенаправление басов.<br>
  </li>
  <li>expand_stereo (bool) - выделять тыловые каналы из стерео  сигнала<br>
  </li>
  <li>voice_control (bool) - выделять центральный канал из  стерео
сигнала</li>
  <li>eq_on (bool) - включен эквалайзер</li>
  <li>delay_on (bool) - включены задержки</li>
</ul>
<br>
<h3><a name="reg_matrix"></a>Матрицы микширования.</h3>
&nbsp;&nbsp;&nbsp; Ключи матрицы именуются  следующим образом:
[from_channel]_[to_channel], где канал from_channel микшируется  в канал
to_channel, с коэффициентом, указанным в  ключе.<br>
<br>
<br>
<hr width="100%" size="2">
<h2><b><a name="misc"></a>Разное.</b><br>
</h2>
&nbsp;&nbsp;&nbsp; Фильтр был основан на OpenSource библиотеке LibA/52 (<a href="http://liba52.sourceforge.net/">http://liba52.sourceforge.net</a>)
и во многом наследует его свойства. Многое было переписано,       но
основные положительные свойства я старался сохранить. Можно отметить
очень высокое        качество этой библиотеки, и весьма последовательное
следование стандарту      (<a class="moz-txt-link-freetext" href="http://www.atsc.org/standards/a_52a.pdf">http://www.atsc.org/standards/a_52a.pdf</a>).
Благодарности Aaron Holtzman и Michel Lespinasse за нее.<br>
&nbsp;&nbsp;&nbsp; <br>
&nbsp;&nbsp;&nbsp; Хочу отдельно поблагодарить Марселло Мота (Marcello
Mota) за моральную поддержку и огромную помощь в тяжком деле
тестирования и отладки.<br>
&nbsp;&nbsp;&nbsp; Огромная благодарность Gabest за поддержку
проигрывания DVD.<br>
&nbsp;&nbsp;&nbsp; Fank'у (форум doom9) за матрицу микширования Dolby
ProLogic II.<br>
&nbsp;&nbsp;&nbsp; Valery Shabaev за скрипт инсталлятора.<br>
&nbsp;&nbsp;&nbsp; Участникам формумов Doom9 и iXBT, а также из
создателям.<br>
&nbsp;&nbsp;&nbsp; А также всем остальным, без чьей помощи этот проект
не был бы таким какой он есть.<br>
<br>
<br>
<hr width="100%" size="2">
<h2><a name="distribution"></a>Условия распространения.</h2>
&nbsp;&nbsp;&nbsp; Даный программный продукт   распространяется     под
лицензией GNU General Public Licence v2, текст которой прилагается  в
файле GNU_eng.txt - на английском языке и GNU_rus.txt - на русском
языке. Вариант на русском языке прилагается только в справочных целях,
поэтому при всех возможных разночтениях приоритет имеет версия на
английском языке. <br>
<font color="#000000"><br>
</font>&nbsp;&nbsp;&nbsp; Данный программный продукт может быть
использован только   в демонстрационных целях и в целях обучения. Любое
использование помимо этих целей может быть   запрещено в некоторых
странах. Этот программный продукт может распространяться  свободно, за
исключением случаев, запрещенных законом.<br>
<br>
<font color="#000000">&nbsp;&nbsp;&nbsp; Даный программный продукт
распространяется исключительно в  надежде,     что он будет полезен,
однако </font><font color="#000000"><b>безо       всяких  гарантий</b>
работы на конкретном оборудовании, соответствия      каким-либо
условиям, стандартам   или нуждам. Я </font><font color="#000000"><b>не</b>
обязуюсь обеспечивать круглосуточную (и вообще, какую либо) поддержку,
исправление ошибок, восстановление потерянных  из-за работы программы
данных, отвечать за испорченное железо,    а также за потерянное рабочее
вермя. Я не несу ответственности за  легальность воспроизводимой при
помощи данной программы мультимедиа-продукции.</font><br>
<br>
<br>
<hr width="100%" size="2">
<h2><a name="author"></a>Связь с автором.</h2>
&nbsp;&nbsp;&nbsp; По всем вопросам, связанным с программой просьба
писать по адресу: <img src="pic/email.gif" title="" alt="" width="111" height="15" align="middle"> под заголовком <b>'AC3Filter'</b>. Большая
просьба сообщать обо всех ошибках в программе, и крайне желательно
приводить следующую информацию:<br>
<ul>
  <li>Описаное проблемы</li>
  <li>Версия Windows</li>
  <li>Звуковая карта</li>
  <li>Используемый плеер<br>
  </li>
  <li>Ветка реестра <b>[HKEY_CURRENT_USER\Software\AC3Filter]</b><br>
  </li>
  <li>Установленный режим колонок (стерео, квадро, 5.1...).</li>
  <li>Данные 'bitstream information' со страницы Main настроек.</li>
  <li>Если Вы знаете, что такое Graphedit, то также скриншот (или
просто описание) графа, который вызывает проблему.</li>
  <li>Если проблема связана с некорректным воспроизведением, то
желательно прислать небольшую часть ac3 файла, на котором возникает
проблема с воспроизведением.<br>
  </li>
</ul>
&nbsp;&nbsp;&nbsp; Это поможет мне в исправлении ошибки. Послания типа
'У меня ничего не работает. Что делать?' без подробного описания что и
как делалось будут игнорироваться.<br>
<br>
<br>
<hr width="100%" size="2">
<h2><a name="changelog"></a>Changelog.</h2>
<tt>$changelog</tt><br>
<br>
<br>
<hr width="100%" size="2">
<h2><a name="links"></a>Полезные ссылки.<br>
</h2>
Сайт AC3Filter (<i>rus+eng</i>): (<a href="http://xvalex.hotbox.ru/programs/ac3filter">http://xvalex.hotbox.ru/programs/ac3filter</a>)<br>
Сайт AC3Filter (<i>rus+eng</i>): (<a href="http://ac3filter.sourceforge.net/">http://ac3filter.sourceforge.net</a>)<br>
Сайт AC3 декодера для Winamp (<i>rus+eng</i>): (<a href="http://xvalex.hotbox.ru/programs/winampac3">http://xvalex.hotbox.ru/programs/winampac3</a>)<br>
Сайт AC3 декодера для Winamp (<i>rus+eng</i>): (<a href="http://winampac3.sourceforge.net/">http://winampac3.sourceforge.net</a>)<br>
<br>
Стандарт A/52a  (AC3) (<i>eng</i>): (<a class="moz-txt-link-freetext" href="http://www.atsc.org/standards/a_52a.pdf">http://www.atsc.org/standards/a_52a.pdf</a>).<br>
Разъяснения Dolby по поводу LFE (eng): (<a href="http://www.dolby.com/tech/c.in.0011.LFE.pdf">http://www.dolby.com/tech/c.in.0011.LFE.pdf</a>)<br>
Библиотека LibA52 (бывший ac3dec) (<i>eng</i>):     (<a href="http://liba52.sourceforge.net/">http://liba52.sourceforge.net</a>).<br>
Многоканальное воспроизведение под Windows (<i>eng</i>):       (<a href="http://www.microsoft.com/hwdev/tech/audio/multichaudP.asp">http://www.microsoft.com/hwdev/tech/audio/multichaudP.asp</a>)<br>
Просто полезный сайт по видео (<i>eng</i>): (<a href="http://www.doom9.org">http://www.doom9.org</a>).<br>
<br>
<hr width="100%" size="2">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
  <tbody>
    <tr>
      <td valign="top"><i><small>Copyright (c) 2002-2003   by Vigovsky
Alexander.<br>
      </small></i></td>
      <td valign="top" align="right"><i><small> Last   updated $date</small></i></td>
    </tr>
  </tbody>
</table>
</body></html>